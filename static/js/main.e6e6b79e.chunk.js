(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,a){e.exports=a(222)},109:function(e,t,a){},11:function(e,t,a){e.exports={header:"styles_header__2wLxh",profile:"styles_profile__31rzl",intro:"styles_intro__1X3Y3",memberSince:"styles_memberSince__1jhAK",sendMessage:"styles_sendMessage__3284j",content:"styles_content__1_9jW",left:"styles_left__vhBr7",right:"styles_right__1-xIl",avatar:"styles_avatar__1sUtC",postContainer:"styles_postContainer__35feo",recentPosts:"styles_recentPosts__1aAFm",infoSection:"styles_infoSection__2k3k7",uuid:"styles_uuid__36WGZ"}},16:function(e,t,a){e.exports={post:"styles_post__2wjTj",avatar:"styles_avatar__2GJc8",header:"styles_header__19BhD",threadLink:"styles_threadLink__3x7tb",username:"styles_username__2fJ1r",totalPosts:"styles_totalPosts__1YOIB",main:"styles_main__TKFmC",panel:"styles_panel__3ULdb",panelContainer:"styles_panelContainer__2nRTc",userInfo:"styles_userInfo__3SK-L",content:"styles_content__2Ru5-",footer:"styles_footer__dMb2p",postedAt:"styles_postedAt__9cLJi"}},17:function(e,t,a){e.exports={threadTitle:"styles_threadTitle__nzF4M",signup:"styles_signup__2AxnY",disabled:"styles_disabled__1TmJj",left:"styles_left__1P-Yx",back:"styles_back__2jFxT",threadLink:"styles_threadLink__1hkCr",addPost:"styles_addPost__1-izz",adContainer:"styles_adContainer__2ZcDv",ad:"styles_ad__36g-4",threadContainer:"styles_threadContainer__22gH-"}},18:function(e,t,a){e.exports={header:"styles_header__VUeZN",startThread:"styles_startThread__2DdKA",quickLinks:"styles_quickLinks__cJQge",info:"styles_info__2f1QB",threadPost:"styles_threadPost__3SWHg",postLink:"styles_postLink__2yHjb",forum:"styles_forum__AVThT",adContainer:"styles_adContainer__3zUCc",left:"styles_left__2_RIC"}},20:function(e,t,a){e.exports={back:"styles_back__3iTuS",input:"styles_input__rHUWj",sectionTitle:"styles_sectionTitle__2wqKD",label:"styles_label___0hEN",signup:"styles_signup__34diQ",disabled:"styles_disabled__3WJTC"}},222:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(85),c=a.n(s),l=(a(109),a(226)),i=a(4),o=a(86),u=a(88),m=a(89),d=a(101),p=a(90),g=a(102),h=a(225),f=a(229),_=a(228),E=a(45),v=a(60),b=a.n(v),y=function(e){var t=e.children,a=Object(E.a)(e,["children"]);return n.createElement("div",Object.assign({className:b.a.width},a),t)},k=function(e){var t=e.children;return n.createElement("div",{className:b.a.body},n.createElement(y,null,t))},j=a(2),O=a(224),N=a(12),w=a.n(N),C=function(){return{innerHeight:window.innerHeight,innerWidth:window.innerWidth}},S=function(e,t){return function(){return window.addEventListener(e,t),function(){return window.removeEventListener(e,t)}}};function U(e){var t=Object(n.useState)(C().innerWidth<=e),a=Object(j.a)(t,2),r=a[0],s=a[1];return Object(n.useEffect)(S("resize",function(){var t=r,a=C().innerWidth<=e;t!==a&&s(a)})),{isMobile:r,isDesktop:!r}}function T(e,t){var a=Object(n.useRef)(null);Object(n.useEffect)(function(){a.current=e},[e]),Object(n.useEffect)(function(){if(null!==t){var e=setInterval(function(){a.current()},t);return function(){return clearInterval(e)}}},[t])}var x=a(6),I=a.n(x),A=a(19),P=a(91),L=a.n(P),M={border:"1px solid",borderRadius:"100%"},B=function(e){var t=e.onClick,a=e.ring;return n.createElement("span",{className:L.a.x,style:a?M:{},onClick:t},"x")},q=a(7),D={male:["man","male","m","boy","guy","b","dude","bro","penis","dick","cock"],female:["woman","female","f","girl","g","gal","broad","bitch","vagina"],other:["transgender","transexual","trans","t","transmasculine","transfeminine","intergender","agender","androgynous"]},F=new Set([].concat(["fastcash","fastcashmoneyplus","fastcashmoneyplusbiz","fastcashmoneybiz","moneybucks","bucks","fast","cash","money","rich","wealth","saving","savings","crypto","cryptocurrency","bitcoin","btc","ethereum","eth","invest","investing","finance","ico","fortune","millionaire","billionaire","blockchain","economy","payment","trick","profit"],["woo","spirit","spirituality","god","chakra","chakras","sound","meditation","reality","dream","dreams","hypnosis","mantra","mantras","technique","energy","karma","cleanse","vegan","ascend","ascension","newage"],["sad","depressed","melencholy","anxious","anxiety","depression","anhedonia","motivation","happy","mental","brain","suicide","suicidal","ocd","obsessed","scared","fear","emptiness","cbd","antidepressant"],["politics","political","government","taxes","democrats","republicans","gop","liberal","liberals","conservative","conservatives","libtards","cucks","cuck","trump","clinton","jews","rockefellers","jfk","fascism","fascist","socialist","socialism","abortion","guns","shillary","sjw","sjws","social","justice","warriors","global","china","russia","fakebullshit","fakebullshitnews"],["achieve","love","sex","greed","power","pizza","hammers","soap","puppies","cats","friendworld","friendworldsocial","trains","subway","food","candy","family"],["ti","targeted","target","tracking","conspiracy","nuclear","drone","5g","radiation","alien","aliens","ufo","ufos","roswell","brain","mind-control","chemtrails","tracking"],Object(q.a)(D.male),Object(q.a)(D.female),Object(q.a)(D.other),["fastcash","fastcashmoneyplus","fastcashmoneyplusbiz","fastcashmoneybiz","moneybucks","bucks","fast","cash","money","rich","wealth","saving","savings","crypto","cryptocurrency","bitcoin","btc","ethereum","eth","invest","investing","finance","ico","fortune","millionaire","billionaire","blockchain","economy","payment","trick","profit","throwing","economic","explosion","market","comfort","home","house","apartment","success","food","taste","suit","dream","dreams","sleep","pillow","weird","family","vortex","hillary","clinton","politics","political","government","democrats","republicans","gop","liberal","liberals","conservative","conservatives","libtards","cucks","cuck","socialist","socialism","shillary","sjw","sjws","social","justice","warriors","science","chemicals","chemtrails","target","targeted","targeting","woo","cleanse","spirit","mental","spirituality","god","chakra","chakras","sound","meditation","reality","hypnosis","mantra","mantras","technique","energy","karma","vegan","ascend","ascension","newage","consciousness","ti","individual","tracking","conspiracy","nuclear","drone","5g","radiation","alien","aliens","ufo","ufos","roswell","brain","mind-control","sad","depressed","melencholy","anxious","anxiety","depression","anhedonia","motivation","happy","suicide","suicidal","ocd","obsessed","scared","fear","emptiness","cbd","antidepressant","addicted","addicting","addiction","internet","evacuate","planet","wrong","psychology","remember","forget","forgetting","foot","death","toenail","nail","fungus","feet","elderly","back","pain","organ","organs","accupuncture","intestine","liver","heart","male","man","testosterone","hair","loss","bald","balding","woman","female","fat","skinny","pepper","hot","furnace","drip","cancer","stop","dead","blood","cells","add","indigo","child","children","special","collective","illuminati","holocaust","internet-of-things","iot","vr","virtual","individuality","jew","jews","jewish","semetic","subliminal","astral","projection","light","healing","luck","clover","horseshoe","sexy","binaural","beats","music","sperm","seamen","sex","digital","hologram","simulation","illusion","numbers","numeric","dna","information","funny","laugh","laughing","lol","haha","kitty","kitten","cat","meow","virus","infected","pleiadians","space","physics","bunker","atlas","nuke","war","disaster","apocalypse","bomb","survival","shelter","girl","doctor","bowels","shit","poop","constipated","octopus","puzzle","stimulation","electrode","dbs","deep","therapy","scanners","scanner","tracker","beauty","ugly","surgery","plastic","constipation","constipate","poo","darpa","mind","control","pot","weed","drugs","marijuana","seduction","dating","romance","singles","chess","666","2016","freemasonry","universal","emperor","42","miracle","hell","genesis","bread","jesus","christianity","sandwich","bible","safe","safety","spyware","malware","security","towers","smartphone","weaponized","thoughts","cognitive","knowledge","processing","radio","transmission","nsa","microwave","frequency","nwo","new","world","order","state","corruption","x-ray","skull","dopamine","driving","muscle","work","hate","emf","electromagnetic","relationship","cocreate","relationships","electo","magnetic","intuition","soul","dreaming","lucid","suffering","jewelry","electric","buddha","moon","christ","blessing","buddhism","harmony","harmonics","spiritual","unarius","venus","mars","water","hydrogen","ion","acidic","alkaline","radicals","health","h20","infinity","oasis","ph","teeth","tooth","dental","dentist","implants","implant","cavity","mouth","gums","dentures","weight","quantum","motivaitonal","phobia"])),W=a(61),J=a.n(W),$=/^(http|https):\/\/.+\..+/,R=/\.(jpg|jpeg|png|PNG|gif|svg)$/,Q=/^@.+/,z=/^#.+/,K=/^\/posts\/.+/,G=/^\/threads\/.+/;function V(e){return(e=te(e)).match(Q)}function H(e){return(e=te(e)).match(z)}function X(e){return F.has(te(e.toLowerCase()))}function Y(e){return e.split(" ").filter(V).map(function(e){return te(e,/^@/)})}function Z(e){return e.split(" ").map(function(e){return te(e).toLowerCase()}).filter(X)}function ee(e){return{tags:JSON.stringify((t=e,t.split(" ").filter(H).map(function(e){return te(e,/^#/).toLowerCase()})).concat(Z(e))),usernames:JSON.stringify(Y(e))};var t}function te(e,t){return e.replace(t?new RegExp(t,"g"):"","").replace(/(\.|\?|!|:|;|,|'|")+$/,"")}var ae=a(92),ne=a.n(ae);function re(e){var t=e.url,a=e.alt,r=Object(E.a)(e,["url","alt"]);return n.createElement("img",Object.assign({className:ne.a.img,src:t,alt:a},r))}var se=a(93),ce=a.n(se);function le(e){return ce()({motherfucker:"m0therf_cker",fuck:"f_ck",shit:"poo"," dick ":"penis",bitch:"b!tch",cunt:"c%nt",cocksuck:"c*cks^ck",cock:"c*ck",nigger:"african-american",nigga:"pal"," fag ":"homosexual",faggot:"homosexual",tranny:"transexual"," god ":"g-d",goddamn:"goshdarn",pussy:"p#ssy"},function(t,a){e=e.replace(a,t)}),e}var ie={maxHeight:300},oe=function(e){if((u=te(u=e)).match(R)&&u.match($))return n.createElement(re,{url:e,style:ie,alt:"user posted content"});if(function(e){return(e=te(e)).match($)}(e))return n.createElement("a",{href:te(e),target:"_blank",rel:"noopener noreferrer"},e);if(V(e)){var t=te(e,/^@/),a=e.replace(t,"").replace(/^@/,"");return n.createElement(n.Fragment,null,n.createElement(O.a,{to:"/users/".concat(t)},"@",le(t)),a)}if(H(e)){var r=te(e,/^#/),s=e.replace(r,"").replace(/^#/,"");return n.createElement(n.Fragment,null,n.createElement(O.a,{to:"/hashtag/".concat(r.toLowerCase())},"#",le(r)),s)}if(function(e){return(e=te(e)).match(K)}(e)){var c=te(e,/^\/posts\//),l=e.replace(c,"").replace(/^\/posts\//,"");return n.createElement(n.Fragment,null,n.createElement(O.a,{to:"/posts/".concat(c)},"/posts/",c),l)}if(function(e){return(e=te(e)).match(G)}(e)){var i=te(e,/^\/threads\//),o=e.replace(i,"").replace(/^\/threads\//,"");return n.createElement(n.Fragment,null,n.createElement(O.a,{to:"/threads/".concat(i)},"/threads/",i),o)}return le(e);var u},ue=function(e,t){if(!e.length)return[t];var a,n=(a=e)[a.length-1];return"string"===typeof n&&"string"===typeof t?[].concat(Object(q.a)(e.slice(0,-1)),[n+" "+t]):"string"===typeof n?[].concat(Object(q.a)(e.slice(0,-1)),[n+" ",t]):[].concat(Object(q.a)(e),[" ",t])},me=function(e,t){return n.createElement(n.Fragment,{key:t},e)},de=function(e){return e.split("\n").map(function(e,t){return n.createElement("p",{key:t},e.split(" ").map(oe).reduce(ue,[]).map(me))})};function pe(e){var t=e.content;return n.createElement(n.Fragment,null,de(t))}var ge=function(e){var t=e.alerts,a=e.readAlert;return r.a.createElement(r.a.Fragment,null,t.map(function(e){return r.a.createElement("div",{key:e.id,className:I.a.alert,onClick:function(){return a(e.id)}},r.a.createElement(B,{ring:!0}),e.link?r.a.createElement(O.a,{to:e.link},e.content):r.a.createElement(pe,{content:e.content}))}))},he=function(e){var t=e.alerts,a=e.onEmptyClick,n=e.readAlert;return r.a.createElement("div",{className:I.a.alertDropdown},t.length?r.a.createElement(ge,{alerts:t,readAlert:n}):r.a.createElement("div",{className:I.a.noAlerts,onClick:a},"No Alerts!"))},fe=function(e){var t,a=e.unread;return r.a.createElement("div",{className:w()(I.a.circle,(t={},Object(A.a)(t,I.a.unread,a),Object(A.a)(t,I.a.unread1,a>0&&a<5),Object(A.a)(t,I.a.unread2,a>=5&&a<10),Object(A.a)(t,I.a.unread3,a>=10&&a<15),Object(A.a)(t,I.a.unread4,a>=15),t))},a||0)},_e="__JWT__",Ee=function(){var e=localStorage.getItem(_e);return e?JSON.parse(e):{__currentUser__:""}},ve=function(){return localStorage.getItem("__TRACKING_TOKEN__")||""},be={get:function(){var e=Ee();return e[e.__currentUser__]},getMapping:Ee,getCurrentUser:function(){var e=Ee();return{username:e.__currentUser__,jwt:e[e.__currentUser__]}},getInnactiveUserList:function(){var e=Ee();return Object.keys(e).filter(function(t){return"__currentUser__"!==t&&t!==e.__currentUser__}).map(function(t){return{username:t,jwt:e[t]}})},getTrackingToken:ve,setTrackingToken:function(){try{var e=ve();if(e)return e;var t="".concat(Date.now(),"-").concat(Math.random());return localStorage.setItem("__TRACKING_TOKEN__",t),t}catch(a){console.log("could not set trakcing token: ",a)}},set:function(e,t){var a=Ee();a[e]=t,localStorage.setItem(_e,JSON.stringify(a))},setCurrentUser:function(e){var t=Ee();t.__currentUser__=e,localStorage.setItem(_e,JSON.stringify(t))},clearCurrentUser:function(){var e=Ee();e.__currentUser__="",localStorage.setItem(_e,JSON.stringify(e))}},ye=function(){be.clearCurrentUser(),window.location.reload()},ke=function(){var e=be.getInnactiveUserList(),t=function(){try{return JSON.parse(localStorage.__JWT__).__currentUser__}catch(e){return console.log(e),""}}();return r.a.createElement("ul",{className:I.a.userDropdown},r.a.createElement(O.a,{to:"/users/".concat(t)},r.a.createElement("li",null,r.a.createElement("div",null,"View Profile"))),r.a.createElement(O.a,{to:"/profile"},r.a.createElement("li",null,r.a.createElement("div",null,"Update Profile"))),r.a.createElement(O.a,{to:"/messages"},r.a.createElement("li",null,r.a.createElement("div",null,"Messages"))),r.a.createElement("a",{href:"#logout",onClick:ye},r.a.createElement("li",null,"Logout")),r.a.createElement(O.a,{to:"/login"},r.a.createElement("li",null,r.a.createElement("div",null,"Login"))),r.a.createElement(O.a,{to:"/signup"},r.a.createElement("li",null,r.a.createElement("div",null,"Create Account"))),!!e.length&&r.a.createElement("div",{className:I.a.switchAccounts},r.a.createElement("strong",null,"Switch Account"),r.a.createElement("ul",null,e.map(function(e){var t=e.username;return r.a.createElement("li",{key:t,onClick:function(){return function(e){be.setCurrentUser(e),window.location.reload()}(t)}},t)}))))},je="__dropdown_component__";function Oe(e){var t=e.children,a=e.hide,s=function(e){var t=document.getElementById(je);t&&e.target!==t&&!t.contains(e.target)&&a()};return Object(n.useEffect)(function(){return document.addEventListener("click",s),function(){return document.removeEventListener("click",s)}}),r.a.createElement("div",{id:je,className:w()(I.a.dropdown,"solid")},t)}var Ne="{\n  currentUser {\n    id\n    username\n    avatarUrl\n    alerts: alertsList (condition: { read: false }) {\n      id\n      content\n      link\n    }\n  }\n}",we="\nmutation readAlert($input: ReadAlertInput!) {\n  readAlert(input: $input) {\n    alert {\n      id\n      read\n    }\n  }\n}";var Ce=function(e){var t=e.toggleDropdownVisible,a=e.currentUser,n=e.loading;return r.a.createElement("div",{className:I.a.content},r.a.createElement(O.a,{to:"/"},r.a.createElement("div",{className:I.a.title},"FriendWorld")),r.a.createElement("div",{className:I.a.links},a?r.a.createElement(Se,{currentUser:a,toggleDropdownVisible:t}):!n&&r.a.createElement(Ue,null)))},Se=function(e){var t=e.currentUser,a=e.toggleDropdownVisible,n=U(540),s=n.isDesktop,c=n.isMobile;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:I.a.link,onClick:function(){return a("users")},style:{maxWidth:"180px",overflow:"auto"}},t.username,r.a.createElement("div",{className:w()(I.a.circle,I.a.user),style:{backgroundImage:"url(".concat(t.avatarUrl,")")}})),s&&r.a.createElement("div",{className:I.a.link,onClick:function(){return a("alerts")}},"Alerts",r.a.createElement(fe,{unread:t.alerts.length})),c&&r.a.createElement("div",{className:I.a.link,onClick:function(){return a("alerts")}},r.a.createElement(fe,{unread:t.alerts.length})))},Ue=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{to:"/login",className:I.a.link},"Login"),r.a.createElement(O.a,{to:"/signup",className:I.a.link},"Signup"))},Te=function(e){var t=Object(n.useState)(null),a=Object(j.a)(t,2),s=a[0],c=a[1],l=Object(i.useQuery)({query:Ne}),o=Object(j.a)(l,2),u=o[0],m=u.data,d=u.fetching,p=o[1],g=Object(i.useMutation)(we),h=Object(j.a)(g,2),f=(h[0],h[1]),_=m&&m.currentUser||null,E=function(){return c(null)};return Object(n.useEffect)(function(){return e.history.listen(E)}),T(function(){document.hidden||p({requestPolicy:"network-only"})},1e4),r.a.createElement("nav",{className:w()(I.a.container,"solid")},r.a.createElement(y,null,r.a.createElement(Ce,{loading:d,currentUser:_,toggleDropdownVisible:c}),r.a.createElement("div",{className:I.a.dropdownPosition},s&&r.a.createElement(Oe,{hide:E},"users"===s&&r.a.createElement(ke,null),"alerts"===s&&_&&r.a.createElement(he,{alerts:_.alerts,onEmptyClick:E,readAlert:function(e){return f({input:{alertId:e}})}})))))},xe=a(94),Ie=a.n(xe),Ae=function(e){var t=e.error,a=t;return a.response&&401===a.response.status&&(be.clearCurrentUser(),window.location.reload()),n.createElement("div",{className:Ie.a.error},"An Error Occurred: ",JSON.stringify(t,null,3))},Pe=a(95),Le=a.n(Pe),Me=function(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),a=t[0],s=t[1];return Object(n.useEffect)(function(){var e=setInterval(function(){return s(a+".")},350);return function(){return clearInterval(e)}}),r.a.createElement("div",{className:Le.a.loading},"loading",a)},Be=a(46),qe=a.n(Be),De="\nmutation($input: LoginInput!) {\n  login(input: $input) {\n    jwtToken\n    query {\n      currentUser {\n        id\n        username\n      }\n    }\n  }\n}";var Fe=function(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(""),l=Object(j.a)(c,2),o=l[0],u=l[1],m=Object(n.useState)(""),d=Object(j.a)(m,2),p=d[0],g=d[1],h=Object(i.useMutation)(De),f=Object(j.a)(h,2),_=f[0],E=_.error,v=_.fetching,b=_.data,y=f[1];return Object(n.useMemo)(function(){b&&b.login&&(b.login.jwtToken?(be.set(a,b.login.jwtToken),be.setCurrentUser(a),window.location.href="/"):g("Incorrect username/password combination"))},[a,b]),r.a.createElement("section",{className:qe.a.login},r.a.createElement("div",{className:qe.a.card},r.a.createElement("h1",null,"Login"),E&&r.a.createElement(Ae,{error:E}),v&&r.a.createElement(Me,null),!E&&!v&&r.a.createElement("form",null,r.a.createElement("input",{name:"fw_username",placeholder:"username",value:a,onChange:function(e){return s(e.target.value)}}),r.a.createElement("input",{type:"password",name:"password",placeholder:"password",value:o,onChange:function(e){return u(e.target.value)}}),r.a.createElement("button",{className:qe.a.submitButton,onClick:function(e){e.preventDefault(),a&&o&&(g(""),y({input:{username:a,password:o}}))}},"Submit"),p&&r.a.createElement(Ae,{error:p}))))},We=a(31),Je=a.n(We),$e="\nmutation($input: SignupInput!) {\n  signup(input: $input) {\n    jwtToken\n  }\n}";var Re=function(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(""),l=Object(j.a)(c,2),o=l[0],u=l[1],m=Object(n.useState)(""),d=Object(j.a)(m,2),p=d[0],g=d[1],h=Object(n.useState)(""),f=Object(j.a)(h,2),_=f[0],E=f[1],v=Object(i.useMutation)($e),b=Object(j.a)(v,2),y=b[0],k=y.error,O=y.fetching,N=y.data,w=b[1],C=k?k.message.includes("violates unique constraint")?"That username is already taken. Please try again":k.message:_||"";return N&&!k&&(be.set(a,N.signup.jwtToken),be.setCurrentUser(a),window.location.href="/onboarding"),r.a.createElement("section",{className:Je.a.signup},r.a.createElement("div",{className:Je.a.card},r.a.createElement("h1",null,"Create Account"),r.a.createElement("form",null,r.a.createElement("div",{className:Je.a.inputs},r.a.createElement("input",{name:"fw_username",placeholder:"Username",value:a,onChange:function(e){s(e.target.value),e.target.value.length>18&&E("Username must be 18 characters or less")}}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:o,onChange:function(e){return u(e.target.value)}}),r.a.createElement("input",{type:"password",name:"password_confirm",placeholder:"Password Confirmation",value:p,onChange:function(e){return g(e.target.value)}})),C&&r.a.createElement(Ae,{error:C}),O&&r.a.createElement(Me,null),!O&&r.a.createElement("button",{className:Je.a.submitButton,onClick:function(e){e.preventDefault(),a&&o?o===p?w({input:{username:a,password:o}}):E("Password must match Password Confirmation"):E("Must include username and password.")}},"Submit"))))},Qe=a(62),ze=a.n(Qe),Ke=a(16),Ge=a.n(Ke),Ve=function(e){var t=e.post;return n.createElement("article",{className:Ge.a.post},n.createElement("div",{className:Ge.a.main},!!t.author&&n.createElement(O.a,{to:"/users/".concat(t.author.username),className:Ge.a.panel},n.createElement("aside",{className:Ge.a.panelContainer},n.createElement("div",{className:Ge.a.avatar,style:{backgroundImage:"url(".concat(t.author.avatarUrl,")")}}),n.createElement("div",{className:Ge.a.userInfo},n.createElement("div",{className:Ge.a.username},t.author.username),t.author.postStats&&n.createElement("div",{className:Ge.a.totalPosts},n.createElement("strong",null,"Posts:")," ",t.author.postStats.totalCount)))),n.createElement("div",{className:Ge.a.content},n.createElement(pe,{content:t.content}))),n.createElement("div",{className:w()(Ge.a.footer,"offWhite")},n.createElement("div",{className:Ge.a.postedAt},n.createElement("time",null,"Posted at: ",new Date(t.createdAt).toISOString()),n.createElement("span",null,n.createElement(O.a,{to:"/posts/".concat(t.id)},"/posts/",t.id))),!!t.thread&&n.createElement("div",{className:Ge.a.threadLink},"In thread: ",n.createElement(O.a,{to:"/threads/".concat(t.thread.id)},le(t.thread.title)))))},He="\nquery ".concat("post"," ($id: Int!){\n  post: ").concat("post"," (id: $id) {\n    id\n    createdAt\n    content\n    author {\n      id\n      username\n      avatarUrl\n      postStats: authoredPosts {\n        totalCount\n      }\n    }\n    thread {\n      id\n      title\n    }\n  }\n}"),Xe=function(e){var t=e.id,a=Object(i.useQuery)({query:He,variables:{id:t}}),r=Object(j.a)(a,1)[0],s=r.error,c=r.fetching,l=r.data;return n.createElement("section",null,n.createElement("div",{className:ze.a.back},n.createElement(O.a,{to:"/"},"< Back to forum")),n.createElement("div",{className:ze.a.left},s&&n.createElement(Ae,{error:s}),c&&n.createElement(Me,null),l&&(l.post?n.createElement(Ve,{post:l.post}):"This post does not exist!")))},Ye=a(96),Ze=a.n(Ye),et=a(17),tt=a.n(et),at=a(22),nt=a(24),rt=a(97),st=a.n(rt),ct=a(63),lt=a.n(ct),it=function(e){var t=e.url,a=e.img,r=e.content,s=e.onClick;return n.createElement("div",{className:lt.a.ad},n.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer",onClick:s||st.a},a&&n.createElement(re,{url:a,alt:r}),r&&n.createElement("div",{className:lt.a.content},r)))},ot=a(47),ut=a.n(ot),mt=function(e){try{var t=JSON.parse(e);return Object(nt.isObject)(t)?t:{}}catch(a){return{}}},dt="{\n  currentUser {\n    id\n    trackingInfo\n  }\n  ads: adsList {\n    id\n    url\n    img\n    content\n    tags\n    isGeneric\n    weight\n    targetTags\n    primaryTags\n  }\n}";function pt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object(i.useQuery)({query:dt}),r=Object(j.a)(a,1)[0],s=r.data,c=r.fetching;return{ads:Object(n.useMemo)(function(){if(!s)return[];var a=s.ads.map(function(e){return Object(at.a)({},e,{tags:JSON.parse(e.tags),primaryTags:JSON.parse(e.primaryTags),targetTags:JSON.parse(e.targetTags)})}),n=s.currentUser?mt(s.currentUser.trackingInfo):{},r=[n.gender].concat(Object(q.a)(n.profileTags||[]));return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=new Set(t.tags||[]),r=new Set(t.targetTags||[]),s=e.filter(function(e){return e.isGeneric}),c=e.filter(function(e){return e.primaryTags.some(function(e){return n.has(e)})});if(c.length>=a)return Object(nt.sampleSize)(c,a);var l=e.filter(function(e){return e.tags.some(function(e){return n.has(e)})&&!c.includes(e)});if(c.length+l.length>=a)return[].concat(Object(q.a)(Object(nt.shuffle)(c)),Object(q.a)(Object(nt.sampleSize)(l,a-c.length)));var i=[].concat(Object(q.a)(Object(nt.shuffle)(c)),Object(q.a)(Object(nt.shuffle)(l))),o=e.filter(function(e){return e.targetTags.some(function(e){return r.has(e)})&&!i.includes(e)}),u=[].concat(Object(q.a)(o),Object(q.a)(s.filter(function(e){return!i.includes(e)})));return[].concat(Object(q.a)(i),Object(q.a)(Object(nt.sampleSize)(u,a-i.length)))}(a,Object(at.a)({},t,{targetTags:r}),e)},[e,t,s]),fetchingAds:c}}var gt=function(e){var t=e.ads,a=e.fetching,n=Object(i.useMutation)("\nmutation logAdClick($input: LogAdClickInput!) {\n  logAdClick(input: $input) {\n    adClick {\n      adId\n      userId\n      clickCount\n    }\n  }\n}"),s=Object(j.a)(n,2),c=(s[0],s[1]);if(a)return r.a.createElement(r.a.Fragment,null,"loading...");if(!t)return null;return r.a.createElement("section",{className:ut.a.adContainer},r.a.createElement("div",{className:ut.a.label},"SPONSORED CONTENT"),t.map(function(e,t){return r.a.createElement("div",{className:ut.a.adWrapper,key:t},r.a.createElement(it,Object.assign({},e,{onClick:function(){return t=e.id,setTimeout(function(){return c({input:{ad:t}})},200);var t}})))}))},ht=a(32),ft=a.n(ht),_t="Join the conversation...";var Et=function(e){var t=e.placeholder,a=e.buttonContent,s=e.inputStyle,c=e.onSubmit,l=e.onChange,i=Object(n.useState)(""),o=Object(j.a)(i,2),u=o[0],m=o[1],d=function(){c(u),m("")};return r.a.createElement("div",{className:ft.a.container},r.a.createElement("div",{className:ft.a.inner},r.a.createElement("textarea",{className:ft.a.contentInput,placeholder:t||_t,onChange:function(e){m(e.target.value),l&&l(e.target.value)},value:u,style:s,onKeyDown:function(e){13===e.keyCode&&e.metaKey&&d()}}),r.a.createElement("button",{className:ft.a.submitButton,onClick:d},a||"Submit")))},vt="\nquery ".concat("thread"," ($id: Int!) {\n  thread: ").concat("thread"," (id: $id) {\n    id\n    title\n    posts: postsList {\n      id\n      content\n      createdAt\n      tags\n      author {\n        id\n        username\n        avatarUrl\n        postStats: authoredPosts {\n          totalCount\n        }\n      }\n    }\n  }\n  currentUser {\n    id\n  }\n}"),bt=function(e){var t=e.threadId,a=e.disabled,n=Object(i.useMutation)("\nmutation createPost($input: CreatePostInput!) {\n  createPost(input: $input) {\n    post {\n      id\n      content\n      createdAt\n      author {\n        id\n        avatarUrl\n        username\n      }\n    }\n  }\n}"),s=Object(j.a)(n,2),c=(s[0],s[1]);return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(O.a,{to:"/signup"},r.a.createElement("h2",{className:tt.a.signup},"Create An Account To Join The Conversation!")),r.a.createElement("div",{className:w()(tt.a.addPost,a&&tt.a.disabled)},r.a.createElement(Et,{onSubmit:function(e){if(e){var a=ee(e),n=a.tags,r=a.usernames;c({input:{threadId:t,content:e,tags:n,usernames:r}})}}})))},yt=[1],kt=function(e){var t=e.id,a=U(820),s=a.isMobile,c=a.isDesktop,l=Object(i.useQuery)({query:vt,variables:{id:t}}),o=Object(j.a)(l,1)[0],u=o.data,m=o.error,d=o.fetching,p=pt(4,{tags:!yt.includes(t)&&u&&u.thread?Ze()(u.thread.posts,function(e){return JSON.parse(e.tags)}):[]}),g=p.ads,h=p.fetchingAds,f=m&&r.a.createElement(Ae,{error:m}),_=d&&r.a.createElement(Me,null),E=u&&(u.thread?r.a.createElement("div",{className:tt.a.container},r.a.createElement("header",{className:tt.a.threadTitle},r.a.createElement("h2",null,le(u.thread.title))),r.a.createElement("div",null,r.a.createElement(O.a,{to:"/threads/".concat(u.thread.id)},r.a.createElement("div",{className:tt.a.threadLink},"/threads/",u.thread.id)),r.a.createElement(r.a.Fragment,null,u.thread.posts.map(function(e,t){return r.a.createElement(n.Fragment,{key:e.id},function(e){if(!s)return!1;if((e+1)%4)return!1;var t=((e+1)/4-1)%g.length;return r.a.createElement("div",{className:tt.a.ad},r.a.createElement(gt,{ads:[g[t]],fetching:h}))}(t),r.a.createElement(Ve,{post:e}))})),r.a.createElement(bt,{threadId:u.thread.id,disabled:!u.currentUser}))):"This thread does not exist!");return r.a.createElement("section",null,r.a.createElement("div",{className:tt.a.back},r.a.createElement(O.a,{to:"/"},"< Back to forum")),r.a.createElement("div",{className:tt.a.threadContainer},r.a.createElement("div",{className:tt.a.left},f,_,E),c&&r.a.createElement("div",{className:tt.a.adContainer},r.a.createElement(gt,{ads:g,fetching:h}))))},jt=a(20),Ot=a.n(jt),Nt=function(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(""),l=Object(j.a)(c,2),o=l[0],u=l[1],m=Object(i.useQuery)({query:"{\n  currentUser {\n    id\n    username\n    avatarUrl\n    postStats: authoredPosts {\n      totalCount\n    }\n  }\n}"}),d=Object(j.a)(m,1)[0],p=Object(i.useMutation)("\nmutation createThread($input: CreateThreadInput!) {\n  createThread(input: $input) {\n    thread {\n      id\n      title\n    }\n  }\n}"),g=Object(j.a)(p,2),h=g[0],f=g[1];if(h.data)return window.location.href="/threads/".concat(h.data.createThread.thread.id),r.a.createElement("div",null);if(d.fetching||h.fetching)return r.a.createElement("span",null,"loading...");var _=d.data&&!d.data.currentUser,E=d.data&&d.data.currentUser&&Object(at.a)({},d.data.currentUser,{postStats:{totalCount:d.data.currentUser.postStats.totalCount+1}});return r.a.createElement("section",{className:Ot.a.newThread},r.a.createElement("div",{className:Ot.a.back},r.a.createElement(O.a,{to:"/"},"< Back to forum")),!_&&r.a.createElement("h1",{className:Ot.a.sectionTitle},"New Thread"),_&&r.a.createElement(O.a,{to:"/signup"},r.a.createElement("h2",{className:Ot.a.signup},"Create An Account To Join The Conversation!")),r.a.createElement("div",{className:w()(Object(A.a)({},Ot.a.disabled,_))},r.a.createElement("h2",{className:Ot.a.label},"Title"),r.a.createElement("input",{className:Ot.a.input,onChange:function(e){return s(e.target.value)},value:a}),r.a.createElement("h2",{className:Ot.a.label},"Content"),r.a.createElement(Et,{onSubmit:function(){if(a&&o){var e=ee(a+" "+o),t=e.tags,n=e.usernames;f({input:{title:a,content:o,tags:t,usernames:n}})}},onChange:u,buttonContent:"Start Thread",placeholder:"",inputStyle:{height:"200px"}}),(a||o)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:Ot.a.label},"[PREVIEW] ",le(a)),r.a.createElement(Ve,{post:{id:"XX",createdAt:(new Date).toString(),content:o,author:E}}))))},wt=a(64),Ct=a.n(wt),St=a(98),Ut=a(227),Tt=a(5),xt=a.n(Tt),It="\n  id\n  createdAt\n  username\n  avatarUrl\n  email\n  gender\n  birthday\n  bio\n  job\n  interests\n  websites\n  media\n  religion\n  politics\n  trackingInfo\n",At="{\n  currentUser {\n    ".concat(It,"\n    trackingInfo\n    postStats: authoredPosts {\n      totalCount\n    }\n  }\n}"),Pt="mutation UpdateUser($input: UpdateUserInput!) {\n  updateUser(input: $input) {\n    user {\n      ".concat(It,"\n    }\n  }\n}");function Lt(e){var t=e.history,a=Object(i.useQuery)({query:At}),n=Object(j.a)(a,1)[0],s=n.data,c=n.error,l=n.fetching;return c?r.a.createElement(Ae,{error:c}):l?r.a.createElement(Me,null):s?s.currentUser?r.a.createElement(Ft,{currentUser:s.currentUser,goto:function(e){return t.push(e)}}):r.a.createElement(Ut.a,{to:"/signup"}):null}function Mt(e){var t=e.trackingInfo?JSON.parse(e.trackingInfo):{},a=e.gender?function(e){var t=e.split(" ").map(function(e){return te(e).toLowerCase()});return J()(t,D.male).length?"male":J()(t,D.female).length?"female":"other"}(e.gender):void 0,n=Z([e.bio,e.job,e.interests,e.media,e.religion,e.politics].join(" "));return JSON.stringify(Object(at.a)({},t,{gender:a,profileTags:n}))}var Bt=function(e){return Date.parse(e)?new Date(e).toISOString():null},qt=function(e){return e.match(/^.+@.+\..+$/)?e:null},Dt=function(e){return new Promise(function(t){return setTimeout(t,e)})};function Ft(e){var t=e.currentUser,a=(e.goto,Object(n.useState)(t.avatarUrl)),s=Object(j.a)(a,2),c=s[0],l=s[1],o=Object(n.useState)(t.email||""),u=Object(j.a)(o,2),m=u[0],d=u[1],p=Object(n.useState)(t.gender),g=Object(j.a)(p,2),h=g[0],f=g[1],_=Object(n.useState)(t.birthday||""),E=Object(j.a)(_,2),v=E[0],b=E[1],y=Object(n.useState)(t.bio),k=Object(j.a)(y,2),N=k[0],w=k[1],C=Object(n.useState)(t.job),S=Object(j.a)(C,2),T=S[0],x=S[1],I=Object(n.useState)(t.interests),A=Object(j.a)(I,2),P=A[0],L=A[1],M=Object(n.useState)(t.websites),B=Object(j.a)(M,2),q=B[0],D=B[1],F=Object(n.useState)(t.media),W=Object(j.a)(F,2),J=W[0],$=W[1],R=Object(n.useState)(t.religion),Q=Object(j.a)(R,2),z=Q[0],K=Q[1],G=Object(n.useState)(t.politics),V=Object(j.a)(G,2),H=V[0],X=V[1],Y=Object(n.useState)(!1),Z=Object(j.a)(Y,2),ee=Z[0],te=Z[1],ae=U(540),ne=ae.isMobile,re=ae.isDesktop,se=Object(n.useState)(!1),ce=Object(j.a)(se,2),le=ce[0],ie=ce[1],oe=Object(i.useMutation)(Pt),ue=Object(j.a)(oe,2),me=ue[0],de=ue[1],pe=ee&&v&&!Bt(v)?"Birthday must be a valid date":"",ge=ee&&m&&!qt(m)?"Email must be in correct format":"",he=r.a.createElement("header",{className:xt.a.header},r.a.createElement("h1",null,"Update Profile: ",t.username),r.a.createElement("div",{className:xt.a.subheader},"uuid: ",t.id),r.a.createElement("div",{className:xt.a.subheader},r.a.createElement(O.a,{to:"/users/".concat(t.username)},"View Profile"))),fe=function(){var e=Object(St.a)(Ct.a.mark(function e(){var a,n;return Ct.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return te(!0),ie(!0),a={email:qt(m),birthday:Bt(v),avatarUrl:c,gender:h,bio:N,job:T,interests:P,websites:q,media:J,religion:z,politics:H},n=Mt(Object(at.a)({},a,{trackingInfo:t.trackingInfo})),e.next=6,Promise.all([de({input:Object(at.a)({},a,{trackingInfo:n})}),Dt(1e3)]);case 6:ie(!1);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:xt.a.profile},ne&&he,r.a.createElement("div",{className:xt.a.content},r.a.createElement("div",{className:xt.a.left},r.a.createElement("div",null,r.a.createElement("div",{className:xt.a.avatar,style:{backgroundImage:"url(".concat(c,")")}}),r.a.createElement("div",null,r.a.createElement("strong",null,"Posts:")," ",t.postStats.totalCount))),r.a.createElement("div",{className:xt.a.right},me.fetching||le?r.a.createElement(Me,null):r.a.createElement(r.a.Fragment,null,re&&he,r.a.createElement("div",{className:xt.a.buttonContainer},r.a.createElement("button",{className:xt.a.submitButton,onClick:fe},"Update Profile")),r.a.createElement("div",{className:xt.a.inputSection},r.a.createElement("h3",null,"Avatar Url"),r.a.createElement("input",{className:xt.a.contentInput,value:c,placeholder:"http://www.website.com/image.jpeg",onChange:function(e){return l(e.target.value)}})),r.a.createElement("div",{className:xt.a.inputSection},r.a.createElement("h3",null,"Email"),r.a.createElement("input",{className:xt.a.contentInput,value:m,placeholder:"email@website.com",onChange:function(e){return d(e.target.value)}}),!!ge&&r.a.createElement("div",null,ge)),r.a.createElement("div",{className:xt.a.inputSection},r.a.createElement("h3",null,"Gender"),r.a.createElement("input",{className:xt.a.contentInput,value:h,placeholder:"Gender",onChange:function(e){return f(e.target.value)}})),r.a.createElement("div",{className:xt.a.inputSection},r.a.createElement("h3",null,"Birthday"),r.a.createElement("input",{className:xt.a.contentInput,value:v,placeholder:"03/11/19",onChange:function(e){return b(e.target.value)}}),!!pe&&r.a.createElement("div",null,pe)),r.a.createElement("div",{className:xt.a.inputSection},r.a.createElement("h3",null,"About Me"),r.a.createElement("textarea",{className:xt.a.contentInput,value:N,placeholder:"Tell us about yourself!",onChange:function(e){return w(e.target.value)}})),r.a.createElement("div",{className:xt.a.inputSection},r.a.createElement("h3",null,"Occupation"),r.a.createElement("input",{className:xt.a.contentInput,value:T,placeholder:"Accountant",onChange:function(e){return x(e.target.value)}})),r.a.createElement("div",{className:xt.a.inputSection},r.a.createElement("h3",null,"Interestes"),r.a.createElement("input",{className:xt.a.contentInput,value:P,placeholder:"Bowling, Stamp Collecting, Family",onChange:function(e){return L(e.target.value)}})),r.a.createElement("div",{className:xt.a.inputSection},r.a.createElement("h3",null,"Favorite Websites"),r.a.createElement("input",{className:xt.a.contentInput,value:q,placeholder:"friendworld.social, fastcashmoneyplus.biz",onChange:function(e){return D(e.target.value)}})),r.a.createElement("div",{className:xt.a.inputSection},r.a.createElement("h3",null,"Favorite Movies, TV shows, and Music"),r.a.createElement("input",{className:xt.a.contentInput,value:J,placeholder:"The Godfather, Citizen Kane, Casablanca",onChange:function(e){return $(e.target.value)}})),r.a.createElement("div",{className:xt.a.inputSection},r.a.createElement("h3",null,"Religious Views"),r.a.createElement("input",{className:xt.a.contentInput,value:z,placeholder:"God",onChange:function(e){return K(e.target.value)}})),r.a.createElement("div",{className:xt.a.inputSection},r.a.createElement("h3",null,"Political Views"),r.a.createElement("input",{className:xt.a.contentInput,value:H,placeholder:"Liberal/Conservative",onChange:function(e){return X(e.target.value)}})),r.a.createElement("div",{className:xt.a.buttonContainer},r.a.createElement("button",{className:xt.a.submitButton,onClick:fe},"Update Profile"))))))}var Wt=a(11),Jt=a.n(Wt),$t=function(e){var t=e.title,a=e.info;return a&&r.a.createElement("div",{className:Jt.a.infoSection},r.a.createElement("h3",null,t),r.a.createElement(pe,{content:a}))},Rt=function(e){var t=e.username,a=Object(i.useQuery)({query:"\nquery userByUsername ($username: UsernameDomain!) {\n  ads {\n    totalCount\n  }\n  user: userByUsername (username: $username) {\n    id\n    createdAt\n    username\n    avatarUrl\n    email\n    gender\n    birthday\n    bio\n    job\n    interests\n    websites\n    media\n    religion\n    politics\n    trackingInfo\n    postStats: authoredPosts {\n      totalCount\n    }\n    adClicks {\n      totalCount\n    }\n    posts: authoredPostsList (orderBy: [CREATED_AT_DESC]) {\n      id\n      content\n      createdAt\n      thread {\n        id\n        title\n      }\n    }\n  }\n}",variables:{username:t}}),n=Object(j.a)(a,1)[0],s=n.error,c=n.fetching,l=n.data,o=U(540),u=o.isMobile,m=o.isDesktop;if(s)return r.a.createElement(Ae,{error:s});if(c)return r.a.createElement(Me,null);if(!l||!l.user)return r.a.createElement("div",{style:{margin:"20px 0",textAlign:"center"}},t," is not an active Friendworld user!");var d,p=l.user,g=l.ads,h=r.a.createElement("header",{className:Jt.a.header},r.a.createElement("h1",{className:Jt.a.intro},"Welcome to ",p.username,"'s Profile!"),r.a.createElement("h4",{className:Jt.a.memberSince},p.username," has been a member since ",(d=p.createdAt,new Date(d).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))),r.a.createElement("h4",{className:Jt.a.memberSince},p.username," has engaged with ",p.adClicks.totalCount,"/",g.totalCount," pieces of sponsored content!"));return r.a.createElement("div",{className:Jt.a.profile},u&&h,r.a.createElement("div",{className:Jt.a.content},r.a.createElement("div",{className:Jt.a.left},r.a.createElement("div",null,r.a.createElement("div",{className:Jt.a.avatar,style:{backgroundImage:"url(".concat(p.avatarUrl,")")}}),r.a.createElement("div",null,r.a.createElement("strong",null,"Posts:")," ",p.postStats.totalCount),r.a.createElement("div",{className:Jt.a.sendMessage},r.a.createElement(O.a,{to:"/messages/".concat(p.username)},"Message ",p.username)))),r.a.createElement("div",{className:Jt.a.right},m&&h,r.a.createElement("div",{className:Jt.a.userInfo},r.a.createElement($t,{title:"Gender",info:p.gender}),r.a.createElement($t,{title:"Birthday",info:p.birthday}),r.a.createElement($t,{title:"About Me",info:p.bio}),r.a.createElement($t,{title:"Occupation",info:p.job}),r.a.createElement($t,{title:"Interests",info:p.interests}),r.a.createElement($t,{title:"Favorite Websites",info:p.websites}),r.a.createElement($t,{title:"Favorite Movies, TV shows, and Music",info:p.media}),r.a.createElement($t,{title:"Religious Views",info:p.religion}),r.a.createElement($t,{title:"Political Views",info:p.politics})),r.a.createElement("div",{className:Jt.a.recentPosts},p.posts.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Recent posts by ",p.username,":"),p.posts.map(function(e){return r.a.createElement("div",{className:Jt.a.postContainer,key:e.id},r.a.createElement(Ve,{post:e}))})):r.a.createElement("h3",null,"This user has not made any posts yet!")),r.a.createElement("div",{className:Jt.a.uuid},"user uuid: ",p.id))))},Qt=a(8),zt=a.n(Qt),Kt=a(42),Gt=a.n(Kt),Vt="{\n  messageData: currentUser {\n    username\n    sent: messagesSentList {\n      createdAt\n      user: to {\n        username\n      }\n    }\n    received: messagesReceivedList {\n      createdAt\n      user: from {\n        username\n      }\n    }\n  }\n}",Ht=function(e,t){var a=t.createdAt,n=t.user.username,r=new Date(a);return(!e.has(n)||e.get(n)<r)&&e.set(n,r),e},Xt=function(e){if(!e)return[];var t=[].concat(Object(q.a)(e.sent),Object(q.a)(e.received)).reduce(Ht,new Map),a=Array.from(t.entries());return Gt()(a,[1]).reverse().map(function(e){return e[0]})};function Yt(){var e=Object(i.useQuery)({query:Vt}),t=Object(j.a)(e,1)[0],a=t.error,s=t.fetching,c=t.data;if(a)return r.a.createElement(Ae,{error:a});if(s)return r.a.createElement(Me,null);if(!c||!c.messageData)return null;var l=Xt(c.messageData);return r.a.createElement("aside",{className:zt.a.sidePanelContainer},r.a.createElement("div",{className:zt.a.sidePanel},l.length?l.map(function(e){return r.a.createElement(n.Fragment,{key:e},r.a.createElement(O.a,{to:"/messages/".concat(e)},r.a.createElement("div",{className:zt.a.user},e)))}):r.a.createElement("div",{className:zt.a.emptyUsers},"You have no conversations.")))}var Zt="query messagesByUsername ($username: UsernameDomain!) {\n  currentUser {\n    username\n  }\n  requestedUser: userByUsername(username: $username) {\n    sent: messagesSentList {\n      id\n      content\n      createdAt\n      to {\n        username\n      }\n      from {\n        username\n      }\n    }\n    received: messagesReceivedList {\n      id\n      content\n      createdAt\n      to {\n        id\n        username\n      }\n      from {\n        id\n        username\n      }\n    }\n  }\n}",ea="mutation createMessage ($input: CreateMessageInput!) {\n  createMessage (input: $input) {\n    message {\n      id\n      content\n      from {\n        id\n        username\n      }\n    }\n  }\n}";function ta(e){var t=e.username,a=Object(n.useRef)(null),s=Object(n.useState)(""),c=Object(j.a)(s,2),l=c[0],o=c[1],u=Object(i.useQuery)({query:Zt,variables:{username:t||""}}),m=Object(j.a)(u,2),d=m[0],p=d.error,g=d.data,h=m[1],f=Object(i.useMutation)(ea),_=Object(j.a)(f,2),E=(_[0],_[1]);T(function(){document.hidden||h({requestPolicy:"network-only"})},1e3);var v=[g&&g.requestedUser&&g.requestedUser.received&&g.requestedUser.sent&&g.requestedUser.received.length+g.requestedUser.sent.length];Object(n.useEffect)(function(){a.current&&(a.current.scrollTop=a.current.scrollHeight)},v);if(p)return r.a.createElement(Ae,{error:p});if(!g||!g.currentUser)return null;if(g.currentUser.username===t)return r.a.createElement(Ut.a,{to:"/messages"});var b=g.requestedUser?aa(g.requestedUser):[],y=b.map(function(e){return r.a.createElement("div",{className:zt.a.message,key:e.id},r.a.createElement("div",{className:zt.a.sender},r.a.createElement(O.a,{to:"/users/".concat(e.from.username)},r.a.createElement("strong",null,e.from.username)),r.a.createElement("time",null,"[",e.createdAt,"]")),r.a.createElement("div",{className:zt.a.content},r.a.createElement(pe,{content:e.content})))});return r.a.createElement("section",{className:zt.a.messagePanel},!g.requestedUser&&"".concat(t," is not an active FriendWorld user"),g.requestedUser&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:a,className:zt.a.sentMessages},g.requestedUser&&(b.length?y:"Send ".concat(t," a message!"))),r.a.createElement("input",{className:zt.a.sendBox,value:l,onChange:function(e){return o(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&l&&(E({input:{content:l,toUsername:t||""}}),o(""))},placeholder:"Press ENTER to send message"})))}var aa=function(e){return Gt()([].concat(Object(q.a)(e.received),Object(q.a)(e.sent)),"createdAt")},na="mutation createMessage ($input: CreateMessageInput!) {\n  createMessage (input: $input) {\n    message {\n      id\n      content\n      from {\n        id\n        username\n      }\n    }\n  }\n}";function ra(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(""),l=Object(j.a)(c,2),o=l[0],u=l[1],m=Object(i.useMutation)(na),d=Object(j.a)(m,2),p=(d[0],d[1]),g=function(){a&&o&&p({input:{content:a,toUsername:o}}).then(function(){window.location.href="messages/".concat(o)})};return r.a.createElement("section",{className:zt.a.messagePanel},r.a.createElement("div",null,"Send a new message to:",r.a.createElement("div",null,r.a.createElement("input",{className:zt.a.sendBox,placeholder:"Enter username here",value:o,onChange:function(e){return u(e.target.value)}}),r.a.createElement("textarea",{className:w()(zt.a.sendBox,zt.a.newMessageBox),value:a,onChange:function(e){return s(e.target.value)},placeholder:"Enter message here",onKeyDown:function(e){13===e.keyCode&&e.metaKey&&g()}})),r.a.createElement("button",{className:zt.a.submitButton,onClick:g},"Send")))}var sa=function(e){var t=e.username,a=U(450),s=a.isMobile,c=a.isDesktop,l=Object(n.useState)(!1),o=Object(j.a)(l,2),u=o[0],m=o[1],d=Object(i.useQuery)({query:"{\n  currentUser {\n    username\n  }\n}"}),p=Object(j.a)(d,1)[0],g=p.data,h=p.error,f=p.fetching;return h?r.a.createElement(Ae,{error:h}):f?r.a.createElement(Me,null):g&&!g.currentUser?r.a.createElement(Ut.a,{to:"/signup"}):g&&g.currentUser&&g.currentUser.username===t?r.a.createElement(Ut.a,{to:"/messages"}):r.a.createElement("div",{className:zt.a.messages},r.a.createElement("header",{className:zt.a.header},r.a.createElement("h1",null,"Message Console"),s&&(u||t)?r.a.createElement(O.a,{to:"/messages",onClick:function(){return m(!1)}},"< All Messages"):r.a.createElement(O.a,{to:"/messages",onClick:function(){return m(!0)}},"New Message")),r.a.createElement("section",{className:zt.a.messagesSection},s&&r.a.createElement("div",{className:zt.a.mobileContainer},t&&r.a.createElement(ta,{username:t}),!t&&u&&r.a.createElement(ra,null),!t&&!u&&r.a.createElement(Yt,null)),c&&r.a.createElement("div",{className:zt.a.desktopContainer},r.a.createElement(Yt,null),t&&r.a.createElement(ta,{username:t}),!t&&r.a.createElement(ra,null))))},ca=a(18),la=a.n(ca),ia=a(99),oa=a.n(ia),ua=function(e){var t=e.thread,a=t.posts[0]&&t.posts[0].author.username,r=le(t.title.length>297?t.title.substring(0,297)+"...":t.title);return n.createElement("article",{key:t.id,className:la.a.threadPost},n.createElement(O.a,{className:la.a.postLink,to:"/threads/".concat(t.id)},r),n.createElement("div",{className:la.a.info},n.createElement("strong",null,"LAST POST:")," ",n.createElement("time",null,"[",t.latestPostTime,"]")),n.createElement("div",{className:la.a.info},n.createElement("strong",null,"by: "),n.createElement(O.a,{to:"/users/".concat(a)},a)),n.createElement("div",{className:la.a.info},n.createElement("strong",null,"POSTS:")," ",t.postStats.totalCount))},ma=[1],da=function(){var e=U(540),t=e.isMobile,a=e.isDesktop,r=Object(i.useQuery)({query:"{\n  currentUser {\n    id\n  }\n  threads: threadsList (orderBy: [LATEST_POST_TIME_DESC]) {\n    id\n    title\n    hidden\n    latestPostTime\n    postStats: posts {\n      totalCount\n    }\n    posts: postsList (first: 1, orderBy: [CREATED_AT_DESC]) {\n      author {\n        username\n      }\n    }\n  }\n}"}),s=Object(j.a)(r,1)[0],c=s.fetching,l=s.error,o=s.data,u=pt(7),m=u.ads,d=u.fetchingAds,p=o&&o.threads?oa()(o.threads,function(e){return ma.includes(e.id)}):[[],[]];return n.createElement("section",{className:la.a.forum},n.createElement("section",{className:la.a.left},c&&n.createElement(Me,null),l&&n.createElement(Ae,{error:l}),o&&n.createElement(n.Fragment,null,o.currentUser&&n.createElement("div",{className:la.a.quickLinks},n.createElement("strong",null,"quick links:")," ",n.createElement(O.a,{to:"/messages"},"Messages"),", ",n.createElement(O.a,{to:"/profile"},"Update Profile"),", ",n.createElement(O.a,{to:"/stats"},"Stats")),n.createElement("header",{className:la.a.header},n.createElement("h1",null,"Forum"),n.createElement(O.a,{to:"/threads/new",className:la.a.startThread},"Start A Thread!")),n.createElement("div",{style:{border:"1px dashed",padding:"3px",paddingBottom:0,marginBottom:"10px"}},n.createElement(ua,{thread:p[0][0]})),p[1].length&&p[1].map(function(e,a){return n.createElement(n.Fragment,{key:e.id},function(e){if(!t)return!1;if((e+1)%4)return!1;var a=((e+1)/4-1)%m.length;return n.createElement("div",{className:la.a.adContainer},n.createElement(gt,{ads:[m[a]],fetching:d}))}(a),!e.hidden&&n.createElement(ua,{thread:e}))}))),a&&n.createElement(gt,{ads:m,fetching:d}))},pa=a(33),ga=a.n(pa),ha="{\n  userStatsList {\n    username\n    postCount\n  }\n  userAdClicksList {\n    username\n    adClicks\n  }\n}";var fa=function(){var e=Object(i.useQuery)({query:ha}),t=Object(j.a)(e,1)[0],a=t.error,n=t.fetching,s=t.data;return a?r.a.createElement(Ae,{error:a}):n?r.a.createElement(Me,null):s?r.a.createElement("section",{className:ga.a.stats},r.a.createElement("h1",null,"User Stats"),r.a.createElement("div",{className:ga.a.sectionContainer},r.a.createElement("div",{className:ga.a.statSection},r.a.createElement("h2",null,"Top Posters:"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Username"),r.a.createElement("th",null,"Posts"))),r.a.createElement("tbody",null,s.userStatsList.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1,"."),r.a.createElement("td",null,r.a.createElement(O.a,{to:"/users/".concat(e.username)},e.username)),r.a.createElement("td",null,e.postCount))})))),r.a.createElement("div",{className:ga.a.statSection},r.a.createElement("h2",null,"Sponsored Content Engagements:"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Username"),r.a.createElement("th",null,"Engagements"))),r.a.createElement("tbody",null,s.userAdClicksList.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1,"."),r.a.createElement("td",null,r.a.createElement(O.a,{to:"/users/".concat(e.username)},e.username)),r.a.createElement("td",null,e.adClicks))})))))):null},_a=a(65),Ea=a.n(_a);var va=function(){return r.a.createElement("section",{className:Ea.a.onboarding},r.a.createElement("div",{className:Ea.a.card},r.a.createElement("h1",null,"Welcome to Friendworld!"),r.a.createElement("p",null,"Thanks for signing up! Please fill out your profile so everyone knows what you're all about!"),r.a.createElement(O.a,{to:"/profile"},"Click here to update your profile"),r.a.createElement("p",null,"Or, hit the forums now and fill out your profile later :)"),r.a.createElement(O.a,{to:"/"},"Click here to go to the forum")))},ba="{\n  stats: ads {\n    totalCount\n  }\n  ads: adsList {\n    id\n    url\n    img\n    content\n    tags\n    isGeneric\n    weight\n    targetTags\n    primaryTags\n  }\n}";var ya=function(){var e=Object(i.useQuery)({query:ba}),t=Object(j.a)(e,1)[0],a=t.data,n=t.fetching,s=t.error;return s?r.a.createElement(Ae,{error:s}):n?r.a.createElement(Me,null):a?r.a.createElement("div",null,r.a.createElement("h1",null,"Total Ads: ",a.stats.totalCount),a.ads.map(function(e){return r.a.createElement("div",{key:e.id,style:{border:"1px solid",padding:"5px",margin:"10px"}},r.a.createElement("div",{style:{maxWidth:"400px"}},r.a.createElement(it,e)),r.a.createElement("pre",null,JSON.stringify(e,null,3)))})):"no data"},ka=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return n.createElement("main",{className:"App"},n.createElement(h.a,{path:"/",component:Te}),n.createElement(k,null,n.createElement(f.a,null,n.createElement(h.a,{exact:!0,path:"/",component:da}),n.createElement(h.a,{exact:!0,path:"/threads/new",component:Nt}),n.createElement(h.a,{exact:!0,path:"/threads/:id",render:function(e){var t=e.match;return n.createElement(kt,{id:Number(t.params.id)})}}),n.createElement(h.a,{exact:!0,path:"/messages",render:function(e){e.match;return n.createElement(sa,null)}}),n.createElement(h.a,{path:"/messages/:username",render:function(e){var t=e.match;return n.createElement(sa,{username:t.params.username})}}),n.createElement(h.a,{path:"/posts/:id",render:function(e){var t=e.match;return n.createElement(Xe,{id:Number(t.params.id)})}}),n.createElement(h.a,{path:"/users/:username",render:function(e){var t=e.match;return n.createElement(Rt,{username:t.params.username})}}),n.createElement(h.a,{exact:!0,path:"/login",component:Fe}),n.createElement(h.a,{exact:!0,path:"/signup",component:Re}),n.createElement(h.a,{exact:!0,path:"/profile",component:Lt}),n.createElement(h.a,{exact:!0,path:"/stats",component:fa}),n.createElement(h.a,{exact:!0,path:"/onboarding",component:va}),n.createElement(h.a,{exact:!0,path:"/dev/ads",component:ya}))),n.createElement("footer",{style:{fontSize:"11px",padding:"10px 0"}},n.createElement(y,null,"(c) 2019 FriendWorld.social")))}}]),t}(n.Component),ja=Object(_.a)(ka);be.setTrackingToken();var Oa=Object(i.createClient)({exchanges:[o.devtoolsExchange,i.fetchExchange,i.cacheExchange],url:"https://friendworld.appspot.com/graphql",fetchOptions:function(){var e=be.get();return e?{headers:{Authorization:"Bearer ".concat(e),trackingToken:be.getTrackingToken()||""}}:{headers:{trackingToken:be.getTrackingToken()||""}}}}),Na=(new Date).getHours();(Na<5||Na>=22)&&(document.body.className="nightmode"),c.a.render(r.a.createElement(i.Provider,{value:Oa},r.a.createElement(l.a,null,r.a.createElement(ja,null))),document.getElementById("root"))},31:function(e,t,a){e.exports={signup:"styles_signup__1TBgB",card:"styles_card__2i6Va",inputs:"styles_inputs__2-zI-",submitButton:"styles_submitButton__1RQ0F"}},32:function(e,t,a){e.exports={container:"styles_container__1c7gy",inner:"styles_inner__2Y1v5",contentInput:"styles_contentInput__1FYQK",submitButton:"styles_submitButton__F4S4o"}},33:function(e,t,a){e.exports={stats:"styles_stats__AKzjd",statSection:"styles_statSection__2sbUJ",sectionContainer:"styles_sectionContainer__2Iauo"}},46:function(e,t,a){e.exports={login:"styles_login__1bddG",card:"styles_card__342W-",submitButton:"styles_submitButton__3gLIc"}},47:function(e,t,a){e.exports={adContainer:"styles_adContainer__lMNuW",label:"styles_label__2MmNX",adWrapper:"styles_adWrapper__7ikg8"}},5:function(e,t,a){e.exports={header:"styles_header__kQFtS",memberSince:"styles_memberSince__6_eN_",content:"styles_content__2k8HI",left:"styles_left__3RLgw",right:"styles_right__1wvr3",avatar:"styles_avatar__up-xt",subheader:"styles_subheader__2yCNY",postContainer:"styles_postContainer__8sWw_",recentPosts:"styles_recentPosts__2pfm9",inputSection:"styles_inputSection__3flum",contentInput:"styles_contentInput__1yKr9",submitButton:"styles_submitButton__qntJH",profile:"styles_profile__CnGcI",buttonContainer:"styles_buttonContainer__21qge"}},6:function(e,t,a){e.exports={container:"styles_container__3ZrW4",content:"styles_content__mkpSL",title:"styles_title__g_H6k",links:"styles_links__1lT-N",link:"styles_link__2r07p",user:"styles_user__KXrwW",circle:"styles_circle__3a6lQ",label:"styles_label__3nbc0",unread:"styles_unread__39lvg",unread1:"styles_unread1__1t29L",Unread:"styles_Unread__20_Xf",unread2:"styles_unread2__1gjma",unread3:"styles_unread3__2odvK",Rotate:"styles_Rotate__Jr-hj",unread4:"styles_unread4__2qCGs",Breathe:"styles_Breathe__TeGmQ",dropdownPosition:"styles_dropdownPosition__RvAKI",dropdown:"styles_dropdown__3tTva",alert:"styles_alert__2nkwt",alertDropdown:"styles_alertDropdown__28W3J",noAlerts:"styles_noAlerts__aWfQ5",userDropdown:"styles_userDropdown__3RMMv",switchAccounts:"styles_switchAccounts__3Okr5"}},60:function(e,t,a){e.exports={width:"styles_width__2uPjX",body:"styles_body__3rj8V"}},62:function(e,t,a){e.exports={back:"styles_back__3PY0I"}},63:function(e,t,a){e.exports={ad:"styles_ad__tC5Qg"}},65:function(e,t,a){e.exports={onboarding:"styles_onboarding__3XU1K",card:"styles_card__PWU0O"}},8:function(e,t,a){e.exports={header:"styles_header__hU_hQ",messagesSection:"styles_messagesSection__2TjQW",mobileContainer:"styles_mobileContainer__2EvvN",desktopContainer:"styles_desktopContainer__hT0b1",messagePanel:"styles_messagePanel__3ea8x",sentMessages:"styles_sentMessages__-5hBn",newMessageBox:"styles_newMessageBox__151Oc",sendBox:"styles_sendBox__2qRGc",submitButton:"styles_submitButton__3lvS8",message:"styles_message__Ok6NK",sender:"styles_sender__2ZGF9",sidePanelContainer:"styles_sidePanelContainer__3Z_GC",emptyUsers:"styles_emptyUsers__2F5wl",sidePanel:"styles_sidePanel__2cb8A",user:"styles_user__3s6J6"}},91:function(e,t,a){e.exports={x:"styles_x__2XNkA"}},92:function(e,t,a){e.exports={img:"styles_img__2wl0K"}},94:function(e,t,a){e.exports={error:"styles_error__30xW5"}},95:function(e,t,a){}},[[104,1,2]]]);
//# sourceMappingURL=main.e6e6b79e.chunk.js.map