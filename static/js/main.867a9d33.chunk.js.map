{"version":3,"sources":["containers/User/styles.module.scss","components/Post/styles.module.scss","containers/Threads/styles.module.scss","containers/Forum/styles.module.scss","containers/NewThread/styles.module.scss","components/Body/index.tsx","utils/useResponsive.ts","utils/useInterval.ts","components/X/index.tsx","utils/keywords.ts","utils/parsers.ts","components/Img/index.tsx","utils/profanityFilter.ts","components/ParsedText.tsx","containers/Nav/Alerts.tsx","utils/jwt.ts","containers/Nav/User.tsx","containers/Nav/Dropdown.tsx","containers/Nav/index.tsx","components/DisplayError/index.tsx","components/Loading/index.tsx","containers/Login/index.tsx","containers/Signup/index.tsx","components/Post/index.tsx","containers/Posts/index.tsx","components/Ad/index.tsx","containers/AdContainer/index.tsx","components/TextInput/index.tsx","containers/Threads/index.tsx","containers/NewThread/index.tsx","containers/Profile/index.tsx","containers/User/index.tsx","containers/Messages/SidePanel.tsx","containers/Messages/MessagePanel.tsx","containers/Messages/NewMessagePanel.tsx","containers/Messages/index.tsx","containers/Forum/index.tsx","containers/Stats/index.tsx","containers/Onboarding/index.tsx","containers/DevAds/index.tsx","App.tsx","index.tsx","containers/Signup/styles.module.scss","components/TextInput/styles.module.scss","containers/Stats/styles.module.scss","containers/Profile/styles.module.scss","containers/Login/styles.module.scss","containers/AdContainer/styles.module.scss","containers/Nav/styles.module.scss","components/Body/styles.module.css","containers/Posts/styles.module.scss","components/Ad/styles.module.scss","containers/Onboarding/styles.module.scss","containers/Messages/styles.module.scss","components/X/styles.module.scss","components/Img/styles.module.scss","components/DisplayError/styles.module.scss"],"names":["module","exports","header","profile","intro","memberSince","sendMessage","content","left","right","avatar","postContainer","recentPosts","infoSection","uuid","post","threadLink","username","totalPosts","main","panel","panelContainer","userInfo","footer","postedAt","threadTitle","signup","disabled","back","addPost","adContainer","ad","threadContainer","startThread","quickLinks","info","threadPost","postLink","forum","input","sectionTitle","label","Width","_ref","children","props","Object","objectWithoutProperties","react","assign","className","styles","width","Body","_ref2","body","Body_Width","getSize","innerHeight","window","innerWidth","setEventListener","event","handler","addEventListener","removeEventListener","useResponsive","mobileWidth","_useState","useState","_useState2","slicedToArray","isMobile","setIsMobile","useEffect","wasMobile","isNowMobile","isDesktop","useInterval","callback","delay","savedCallback","useRef","current","id","setInterval","clearInterval","ringStyles","border","borderRadius","X","onClick","ring","x","style","gender","male","female","other","keywords","Set","concat","toConsumableArray","externalLinkTest","imageTest","userTest","hashtagTest","postTest","threadTest","isUsername","str","cleanFragment","match","isHashtag","isKeyword","has","toLowerCase","getUsernames","split","filter","map","f","getKeywords","getTags","tags","JSON","stringify","usernames","fragment","test","replace","RegExp","Img","url","alt","img","src","profanityFilter","each","motherfucker","fuck","shit"," dick ","bitch","cunt","cocksuck","cock","nigger","nigga"," fag ","faggot","tranny"," god ","goddamn","pussy","replaceTo","replaceFrom","imgStyle","maxHeight","parseFragment","isExternalLink","href","target","rel","userId","dirt","Link","to","hashtag","isPostRef","postId","isThreadRef","threadId","combineFragments","fragments","length","arr","lastFragment","slice","addIndex","i","key","parser","paragraph","reduce","ParsedText","Alerts","alerts","readAlert","react_default","a","createElement","Fragment","alert","components_X","link","AlertDropdown","onEmptyClick","alertDropdown","Alerts_Alerts","noAlerts","AlertCircle","_ref3","_cx","unread","cx","circle","defineProperty","unread1","unread2","unread3","unread4","JWT","getMapping","stored","localStorage","getItem","parse","__currentUser__","getTrackingToken","jwt","get","mapping","getCurrentUser","getInnactiveUserList","keys","setTrackingToken","existingToken","token","Date","now","Math","random","setItem","e","console","log","set","setCurrentUser","clearCurrentUser","logout","location","reload","UserDropdown","alternativeUsers","userDropdown","switchAccounts","switchUser","ELEMENT_ID","Dropdown","hide","hideDropdown","dropdown","document","getElementById","contains","currentUserQuery","readAlertMutation","NavBar","toggleDropdownVisible","currentUser","loading","title","links","Nav_SignedInMenu","Nav_SignedOutMenu","SignedInMenu","_useResponsive","maxWidth","overflow","user","backgroundImage","avatarUrl","Alerts_AlertCircle","SignedOutMenu","Nav","dropdownState","setDropdownState","_useQuery","useQuery","query","_useQuery2","_useQuery2$","data","fetching","executeQuery","_useMutation","useMutation","_useMutation2","executeReadAlert","history","listen","hidden","requestPolicy","container","Nav_NavBar","dropdownPosition","User_UserDropdown","Alerts_AlertDropdown","alertId","DisplayError","error","Loading","dots","setDots","interval","loginMutation","Login","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","errorText","setErrorText","_useMutation2$","executeLogin","useMemo","login","jwtToken","card","components_DisplayError","components_Loading","name","placeholder","value","onChange","type","submitButton","preventDefault","signupMutation","Signup","passwordConfirm","setPasswordConfirm","_useState7","_useState8","executeSignup","displayErrorText","message","includes","inputs","Post","author","postStats","totalCount","createdAt","toISOString","thread","postQuery","Posts","variables","components_Post","Ad","noop","safeParse","obj","isObject","adQuery","useAds","n","arguments","undefined","ads","parsedAds","objectSpread","primaryTags","targetTags","trackingInfo","profileTags","allAds","viableAds","isGeneric","primaryAds","some","sampleSize","secondaryAds","shuffle","taggedAds","targetAds","remainingAds","filterAds","fetchingAds","AdContainer","executeLogAdClick","adWrapper","components_Ad","setTimeout","defaultPlaceholder","TextInput","buttonContent","inputStyle","onSubmit","setContent","submit","inner","contentInput","onKeyDown","keyCode","metaKey","threadQuery","AddPost","executeCreatePost","components_TextInput","_getTags","stickiedThreads","Threads","_useAds","posts","flatMap","p","isError","isLoading","isData","adIx","containers_AdContainer","showMobileAd","Threads_AddPost","NewThread","setTitle","response","executeCreateThread","createThread","newThread","height","toString","userProps","updateUserMutation","Profile","ProfileContent","goto","push","Redirect","getTrackingInfo","fields","genderWords","intersection","getGender","bio","job","interests","media","religion","politics","join","validDate","dateStr","validEmail","emailStr","wait","ms","Promise","res","setAvatarUrl","email","setEmail","setGender","birthday","setBirthday","_useState9","_useState10","setBio","_useState11","_useState12","setJob","_useState13","_useState14","setInterests","_useState15","websites","_useState16","setWebsites","_useState17","_useState18","setMedia","_useState19","_useState20","setReligion","_useState21","_useState22","setPolitics","_useState23","_useState24","submitted","setSubmitted","_useState25","_useState26","isFakeLoading","setIsFakeLoading","executeUpdateUser","bdayError","emailError","subheader","updateUser","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","all","stop","apply","this","buttonContainer","inputSection","InfoSection","User","margin","textAlign","date","toLocaleString","weekday","year","month","day","hour","minute","second","adClicks","User_InfoSection","messagesDataQuery","collectMessages","messages","_createdAt","uniqueSortedUsers","messageData","sent","received","Map","values","Array","from","entries","orderBy","reverse","m","SidePanel","messageNames","sidePanelContainer","sidePanel","emptyUsers","requestedUserQuery","createMessageMutation","MessagePanel","$sentMessages","messageToSend","setMessageToSend","executeCreateMessage","memoized","requestedUser","scrollTop","scrollHeight","collectedMessages","sentMessages","sender","messagePanel","ref","sendBox","onKeyPress","toUsername","NewMessagePanel","newUser","setNewUser","then","newMessageBox","Messages","newMessage","setNewMessage","messagesSection","mobileContainer","desktopContainer","ThreadPost","userName","substring","latestPostTime","Forum","partitioned","threads","partition","padding","paddingBottom","marginBottom","Forum_ThreadPost","statsQuery","Stats","stats","sectionContainer","statSection","userStatsList","stat","postCount","userAdClicksList","Onboarding","onboarding","DevAds","App","prevProps","scrollTo","Route","path","component","components_Body","Switch","exact","render","containers_Threads","Number","params","containers_Messages","_ref4","containers_Posts","_ref5","containers_User","fontSize","React","withRouter","client","createClient","fetchOptions","headers","Authorization","trackingToken","hours","getHours","ReactDOM","urql_es","BrowserRouter","src_App","Unread","Rotate","Breathe"],"mappings":"4EACAA,EAAAC,QAAA,CAAkBC,OAAA,uBAAAC,QAAA,wBAAAC,MAAA,sBAAAC,YAAA,4BAAAC,YAAA,4BAAAC,QAAA,wBAAAC,KAAA,qBAAAC,MAAA,sBAAAC,OAAA,uBAAAC,cAAA,8BAAAC,YAAA,4BAAAC,YAAA,4BAAAC,KAAA,gECAlBd,EAAAC,QAAA,CAAkBc,KAAA,qBAAAL,OAAA,uBAAAR,OAAA,uBAAAc,WAAA,2BAAAC,SAAA,yBAAAC,WAAA,2BAAAC,KAAA,qBAAAC,MAAA,sBAAAC,eAAA,+BAAAC,SAAA,yBAAAf,QAAA,wBAAAgB,OAAA,uBAAAC,SAAA,8CCAlBxB,EAAAC,QAAA,CAAkBwB,YAAA,4BAAAC,OAAA,uBAAAC,SAAA,yBAAAnB,KAAA,qBAAAoB,KAAA,qBAAAZ,WAAA,2BAAAa,QAAA,wBAAAC,YAAA,4BAAAC,GAAA,mBAAAC,gBAAA,qDCAlBhC,EAAAC,QAAA,CAAkBC,OAAA,uBAAA+B,YAAA,4BAAAC,WAAA,2BAAAC,KAAA,qBAAAC,WAAA,2BAAAC,SAAA,yBAAAC,MAAA,sBAAAR,YAAA,4BAAAtB,KAAA,0CCAlBR,EAAAC,QAAA,CAAkB2B,KAAA,qBAAAW,MAAA,sBAAAC,aAAA,6BAAAC,MAAA,sBAAAf,OAAA,uBAAAC,SAAA,6NCOLe,EAA0B,SAAAC,GAAA,IAAGC,EAAHD,EAAGC,SAAaC,EAAhBC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,qBACrCK,EAAA,oBAAAF,OAAAG,OAAA,CAAKC,UAAWC,IAAOC,OAAWP,GAC/BD,IAUUS,EANgB,SAAAC,GAAA,IAAGV,EAAHU,EAAGV,SAAH,OAC7BI,EAAA,qBAAKE,UAAWC,IAAOI,MACrBP,EAAA,cAACQ,EAAD,KAAQZ,sCCTNa,EAAU,iBAAmB,CACjCC,YAAaC,OAAOD,YACpBE,WAAYD,OAAOC,aAIfC,EAAmB,SAACC,EAAeC,GAAhB,OAAmC,WAE1D,OADAJ,OAAOK,iBAAiBF,EAAOC,GACxB,kBAAMJ,OAAOM,oBAAoBH,EAAOC,MAIlC,SAASG,EAAcC,GAAqB,IAAAC,EACzBC,mBAAkBZ,IAAUG,YAAcO,GADjBG,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAAsB,EAAA,GAClDI,EADkDF,EAAA,GACxCG,EADwCH,EAAA,GAWzD,OARAI,oBAAUb,EAAiB,SAAU,WACnC,IAAMc,EAAYH,EACZI,EAAcnB,IAAUG,YAAcO,EACxCQ,IAAcC,GAChBH,EAAYG,MAIT,CACLJ,WACAK,WAAYL,GC9BD,SAASM,EAAYC,EAAoBC,GACtD,IAAMC,EAAgBC,iBAAY,MAGlCR,oBAAU,WACRO,EAAcE,QAAUJ,GACvB,CAACA,IAGJL,oBAAU,WAIR,GAAc,OAAVM,EAAgB,CAClB,IAAII,EAAKC,YAJX,WACEJ,EAAcE,WAGaH,GAC3B,OAAO,kBAAMM,cAAcF,MAE5B,CAACJ,iDCXAO,EAAa,CAAEC,OAAQ,YAAaC,aAAc,QAWzCC,EAVc,SAAA/C,GAAA,IAAGgD,EAAHhD,EAAGgD,QAASC,EAAZjD,EAAYiD,KAAZ,OAC3B5C,EAAA,sBACEE,UAAWC,IAAO0C,EAClBC,MAAOF,EAAOL,EAAa,GAC3BI,QAASA,GAHX,aC0JWI,EAAS,CACpBC,KAAM,CACJ,MACA,OACA,IACA,MACA,MACA,IACA,OACA,MACA,QACA,OACA,QAEFC,OAAQ,CACN,QACA,SACA,IACA,OACA,IACA,MACA,QACA,QACA,UAEFC,MAAO,CACL,cACA,aACA,QACA,IACA,iBACA,gBACA,cACA,UACA,gBAMWC,EAAA,IAAIC,IAAJ,GAAAC,OA5MS,CACtB,WACA,oBACA,uBACA,mBACA,aACA,QACA,OACA,OACA,QACA,OACA,SACA,SACA,UACA,SACA,iBACA,UACA,MACA,WACA,MACA,SACA,YACA,UACA,MACA,UACA,cACA,cACA,aACA,UACA,UACA,QACA,UAGiB,CACjB,MACA,SACA,eACA,MACA,SACA,UACA,QACA,aACA,UACA,QACA,SACA,WACA,SACA,UACA,YACA,SACA,QACA,UACA,QACA,SACA,YACA,UAG0B,CAC1B,MACA,YACA,aACA,UACA,UACA,aACA,YACA,aACA,QACA,SACA,QACA,UACA,WACA,MACA,WACA,SACA,OACA,YACA,MACA,kBAGsB,CACtB,WACA,YACA,aACA,QACA,YACA,cACA,MACA,UACA,WACA,eACA,gBACA,WACA,QACA,OACA,QACA,UACA,OACA,eACA,MACA,UACA,UACA,YACA,YACA,WACA,OACA,WACA,MACA,OACA,SACA,UACA,WACA,SACA,QACA,SACA,eACA,oBAyBqB,CACrB,UACA,OACA,MACA,QACA,QACA,QACA,UACA,OACA,UACA,OACA,cACA,oBACA,SACA,SACA,OACA,QACA,UAvCwB,CACxB,KACA,WACA,SACA,WACA,aACA,UACA,QACA,KACA,YACA,QACA,SACA,MACA,OACA,UACA,QACA,eACA,aACA,YAiEavD,OAAAwD,EAAA,EAAAxD,CAOViD,EAAOC,MAPGlD,OAAAwD,EAAA,EAAAxD,CAQViD,EAAOE,QARGnD,OAAAwD,EAAA,EAAAxD,CASViD,EAAOG,OAXU,CAAC,WAAW,oBAAoB,uBAAuB,mBAAmB,aAAa,QAAQ,OAAO,OAAO,QAAQ,OAAO,SAAS,SAAS,UAAU,SAAS,iBAAiB,UAAU,MAAM,WAAW,MAAM,SAAS,YAAY,UAAU,MAAM,UAAU,cAAc,cAAc,aAAa,UAAU,UAAU,QAAQ,SAAS,WAAW,WAAW,YAAY,SAAS,UAAU,OAAO,QAAQ,YAAY,UAAU,OAAO,QAAQ,OAAO,QAAQ,SAAS,QAAQ,SAAS,QAAQ,SAAS,SAAS,UAAU,UAAU,WAAW,YAAY,aAAa,YAAY,cAAc,MAAM,UAAU,WAAW,eAAe,gBAAgB,WAAW,QAAQ,OAAO,YAAY,YAAY,WAAW,MAAM,OAAO,SAAS,UAAU,WAAW,UAAU,YAAY,aAAa,SAAS,WAAW,YAAY,MAAM,UAAU,SAAS,SAAS,eAAe,MAAM,SAAS,UAAU,QAAQ,aAAa,UAAU,WAAW,SAAS,UAAU,YAAY,SAAS,QAAQ,QAAQ,SAAS,YAAY,SAAS,gBAAgB,KAAK,aAAa,WAAW,aAAa,UAAU,QAAQ,KAAK,YAAY,QAAQ,SAAS,MAAM,OAAO,UAAU,QAAQ,eAAe,MAAM,YAAY,aAAa,UAAU,UAAU,aAAa,YAAY,aAAa,QAAQ,UAAU,WAAW,MAAM,WAAW,SAAS,OAAO,YAAY,MAAM,iBAAiB,WAAW,YAAY,YAAY,WAAW,WAAW,SAAS,QAAQ,aAAa,WAAW,SAAS,aAAa,OAAO,QAAQ,UAAU,OAAO,SAAS,OAAO,UAAU,OAAO,OAAO,QAAQ,SAAS,eAAe,YAAY,QAAQ,QAAQ,OAAO,MAAM,eAAe,OAAO,OAAO,OAAO,UAAU,QAAQ,SAAS,MAAM,SAAS,SAAS,MAAM,UAAU,OAAO,SAAS,OAAO,OAAO,QAAQ,QAAQ,MAAM,SAAS,QAAQ,WAAW,UAAU,aAAa,aAAa,YAAY,qBAAqB,MAAM,KAAK,UAAU,gBAAgB,MAAM,OAAO,SAAS,UAAU,aAAa,SAAS,aAAa,QAAQ,UAAU,OAAO,SAAS,YAAY,OAAO,WAAW,QAAQ,QAAQ,QAAQ,SAAS,MAAM,UAAU,WAAW,aAAa,WAAW,UAAU,UAAU,MAAM,cAAc,QAAQ,QAAQ,WAAW,MAAM,OAAO,QAAQ,SAAS,MAAM,OAAO,QAAQ,WAAW,aAAa,QAAQ,UAAU,SAAS,QAAQ,OAAO,MAAM,WAAW,aAAa,OAAO,WAAW,UAAU,OAAO,SAAS,SAAS,OAAO,OAAO,cAAc,UAAU,SAAS,cAAc,YAAY,MAAM,OAAO,UAAU,WAAW,UAAU,UAAU,SAAS,OAAO,UAAU,UAAU,eAAe,aAAa,MAAM,QAAQ,OAAO,UAAU,MAAM,OAAO,QAAQ,YAAY,YAAY,SAAS,UAAU,UAAU,QAAQ,MAAM,OAAO,cAAc,YAAY,UAAU,KAAK,UAAU,OAAO,UAAU,QAAQ,QAAQ,eAAe,WAAW,QAAQ,OAAO,SAAS,UAAU,UAAU,WAAW,SAAS,aAAa,aAAa,WAAW,YAAY,YAAY,aAAa,QAAQ,eAAe,MAAM,YAAY,YAAY,MAAM,MAAM,QAAQ,QAAQ,QAAQ,aAAa,QAAQ,QAAQ,WAAW,UAAU,SAAS,OAAO,OAAO,MAAM,kBAAkB,eAAe,WAAW,gBAAgB,SAAS,WAAW,YAAY,OAAO,WAAW,QAAQ,YAAY,UAAU,WAAW,SAAS,OAAO,SAAS,WAAW,WAAW,UAAU,YAAY,YAAY,UAAU,QAAQ,OAAO,QAAQ,WAAW,MAAM,SAAS,WAAW,WAAW,SAAS,MAAM,WAAW,QAAQ,KAAK,QAAQ,QAAQ,SAAS,UAAU,WAAW,UAAU,SAAS,QAAQ,OAAO,WAAW,SAAS,UAAU,eAAe,6BCvMziHK,EAAmB,2BACnBC,EAAY,gDACZC,EAAW,OACXC,EAAc,OACdC,EAAW,eACXC,EAAa,iBAYZ,SAASC,EAAWC,GAEzB,OADAA,EAAMC,GAAcD,IACTE,MAAMP,GAGZ,SAASQ,EAAUH,GAExB,OADAA,EAAMC,GAAcD,IACTE,MAAMN,GAaZ,SAASQ,EAAUJ,GACxB,OAAOX,EAASgB,IAAIJ,GAAcD,EAAIM,gBAOjC,SAASC,EAAaP,GAC3B,OAAOA,EACJQ,MAAM,KACNC,OAAOV,GACPW,IAAI,SAAAC,GAAC,OAAIV,GAAcU,EAAG,QAUxB,SAASC,EAAYZ,GAC1B,OAAOA,EACJQ,MAAM,KACNE,IAAI,SAAAC,GAAC,OAAIV,GAAcU,GAAGL,gBAC1BG,OAAOL,GAcL,SAASS,EAAQpH,GACtB,MAAO,CACLqH,KAAMC,KAAKC,WA3BYhB,EA2BSvG,EA1B3BuG,EACJQ,MAAM,KACNC,OAAON,GACPO,IAAI,SAAAC,GAAC,OAAIV,GAAcU,EAAG,MAAML,iBAuBQf,OAAOqB,EAAYnH,KAC5DwH,UAAWF,KAAKC,UAAUT,EAAa9G,KA5BpC,IAAoBuG,EAgCpB,SAASC,GAAciB,EAAkBC,GAC9C,OAAOD,EACJE,QAAQD,EAAO,IAAIE,OAAOF,EAAM,KAAO,GAAI,IAC3CC,QAAQ,wBAAyB,4BClFvB,SAASE,GAATzF,GAA4C,IAA7B0F,EAA6B1F,EAA7B0F,IAAKC,EAAwB3F,EAAxB2F,IAAQzF,EAAgBC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,eACzD,OAAOK,EAAA,oBAAAF,OAAAG,OAAA,CAAKC,UAAWC,KAAOoF,IAAKC,IAAKH,EAAKC,IAAKA,GAASzF,4BCN9C,SAAS4F,GAAiBlG,GA+BvC,OALAmG,KAzBkB,CAChBC,aAAc,eACdC,KAAM,OAENC,KAAM,MACNC,SAAU,QACVC,MAAO,QAEPC,KAAM,OACNC,SAAU,WACVC,KAAM,OAENC,OAAQ,mBACRC,MAAO,MAEPC,QAAS,aACTC,OAAQ,aAERC,OAAQ,aACRC,QAAS,MACTC,QAAS,WAETC,MAAO,SAGE,SAACC,EAAWC,GACrBrH,EAAQA,EAAM2F,QAAQ0B,EAAaD,KAI9BpH,EChBT,IAEMsH,GAAW,CACfC,UAAW,KAEPC,GAAgB,SAAC/B,GACrB,IHbAlB,EAAMC,GADgBD,EGcVkB,IHZDhB,MAAMR,IAAcM,EAAIE,MAAMT,GGavC,OAAOvD,EAAA,cAACoF,GAAD,CAAKC,IAAKL,EAAUlC,MAAO+D,GAAUvB,IAAI,wBAE3C,GHZF,SAAwBxB,GAE7B,OADAA,EAAMC,GAAcD,IACTE,MAAMT,GGUNyD,CAAehC,GACxB,OAAOhF,EAAA,mBAAGiH,KAAMlD,GAAciB,GAAWkC,OAAO,SAASC,IAAI,uBAAuBnC,GAE/E,GAAInB,EAAWmB,GAAW,CAC/B,IAAMoC,EAASrD,GAAciB,EAAU,MACjCqC,EAAOrC,EAASE,QAAQkC,EAAQ,IAAIlC,QAAQ,KAAM,IACxD,OAAOlF,EAAA,cAAAA,EAAA,cAAEA,EAAA,cAACsH,EAAA,EAAD,CAAMC,GAAE,UAAAlE,OAAY+D,IAApB,IAAgC3B,GAAgB2B,IAAgBC,GAEpE,GAAIpD,EAAUe,GAAW,CAC9B,IAAMwC,EAAUzD,GAAciB,EAAU,MAClCqC,EAAOrC,EAASE,QAAQsC,EAAS,IAAItC,QAAQ,KAAM,IACzD,OAAOlF,EAAA,cAAAA,EAAA,cAAEA,EAAA,cAACsH,EAAA,EAAD,CAAMC,GAAE,YAAAlE,OAAcmE,EAAQpD,gBAA9B,IAAiDqB,GAAgB+B,IAAiBH,GAEtF,GHVF,SAAmBvD,GAExB,OADAA,EAAMC,GAAcD,IACTE,MAAML,GGQN8D,CAAUzC,GAAW,CAC9B,IAAM0C,EAAS3D,GAAciB,EAAU,cACjCqC,EAAOrC,EAASE,QAAQwC,EAAQ,IAAIxC,QAAQ,aAAc,IAChE,OAAOlF,EAAA,cAAAA,EAAA,cAAEA,EAAA,cAACsH,EAAA,EAAD,CAAMC,GAAE,UAAAlE,OAAYqE,IAApB,UAAsCA,GAAeL,GAEzD,GHVF,SAAqBvD,GAE1B,OADAA,EAAMC,GAAcD,IACTE,MAAMJ,GGQN+D,CAAY3C,GAAW,CAChC,IAAM4C,EAAW7D,GAAciB,EAAU,gBACnCqC,EAAOrC,EAASE,QAAQ0C,EAAU,IAAI1C,QAAQ,eAAgB,IACpE,OAAOlF,EAAA,cAAAA,EAAA,cAAEA,EAAA,cAACsH,EAAA,EAAD,CAAMC,GAAE,YAAAlE,OAAcuE,IAAtB,YAA4CA,GAAiBP,GAGtE,OAAO5B,GAAgBT,GHzCpB,IAAiBlB,GG8ClB+D,GAAmB,SAACC,EAA4B9C,GACpD,IAAK8C,EAAUC,OACb,MAAO,CAAC/C,GAGV,IA3CYgD,EA2CNC,GA3CMD,EA2CcF,GA3CyBE,EAAID,OAAS,GA6ChE,MAA4B,kBAAjBE,GAAiD,kBAAbjD,EAC7C,GAAA3B,OAAAvD,OAAAwD,EAAA,EAAAxD,CAAWgI,EAAUI,MAAM,GAAI,IAA/B,CAAmCD,EAAe,IAAMjD,IAEvB,kBAAjBiD,EAChB,GAAA5E,OAAAvD,OAAAwD,EAAA,EAAAxD,CAAWgI,EAAUI,MAAM,GAAI,IAA/B,CAAmCD,EAAe,IAAKjD,IAGvD,GAAA3B,OAAAvD,OAAAwD,EAAA,EAAAxD,CAAWgI,GAAX,CAAsB,IAAK9C,KAIzBmD,GAAW,SAAC1D,EAAoB2D,GAArB,OACfpI,EAAA,cAACA,EAAA,SAAD,CAAgBqI,IAAKD,GAClB3D,IAIC6D,GAAS,SAAC/K,GAAD,OAAqBA,EACjC+G,MAAM,MACNE,IAAI,SAAC+D,EAAWH,GAAZ,OACHpI,EAAA,mBAAGqI,IAAKD,GACLG,EACEjE,MAAM,KACNE,IAAIuC,IACJyB,OAAOX,GAAkB,IACzBrD,IAAI2D,QAOE,SAASM,GAAT9I,GAAwC,IAAlBpC,EAAkBoC,EAAlBpC,QACnC,OACEyC,EAAA,cAAAA,EAAA,cACGsI,GAAO/K,ICnFd,IAAMmL,GAAS,SAAA/I,GAA+C,IAA5CgJ,EAA4ChJ,EAA5CgJ,OAAQC,EAAoCjJ,EAApCiJ,UACxB,OAAQC,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACLL,EAAOnE,IAAI,SAAAyE,GAAK,OACfJ,EAAAC,EAAAC,cAAA,OAAKV,IAAKY,EAAM7G,GAAIlC,UAAWC,IAAO8I,MAAOtG,QAAS,kBAAMiG,EAAUK,EAAM7G,MAC1EyG,EAAAC,EAAAC,cAACG,EAAD,CAAGtG,MAAI,IACNqG,EAAME,KACHN,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAI0B,EAAME,MAAOF,EAAM1L,SAC7BsL,EAAAC,EAAAC,cAACN,GAAD,CAAYlL,QAAS0L,EAAM1L,eAS1B6L,GAA+C,SAAA9I,GAAA,IAAGqI,EAAHrI,EAAGqI,OAAQU,EAAX/I,EAAW+I,aAAcT,EAAzBtI,EAAyBsI,UAAzB,OAC1DC,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,IAAOmJ,eACpBX,EAAOZ,OACJc,EAAAC,EAAAC,cAACQ,GAAD,CAAQZ,OAAQA,EAAQC,UAAWA,IACnCC,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,IAAOqJ,SAAU7G,QAAS0G,GAA1C,gBAKKI,GAA6C,SAAAC,GAAA,IAAAC,EAAGC,EAAHF,EAAGE,OAAH,OACxDf,EAAAC,EAAAC,cAAA,OAAK7I,UAAW2J,IAAG1J,IAAO2J,QAARH,EAAA,GAAA7J,OAAAiK,EAAA,EAAAjK,CAAA6J,EACfxJ,IAAOyJ,OAASA,GADD9J,OAAAiK,EAAA,EAAAjK,CAAA6J,EAEfxJ,IAAO6J,QAAUJ,EAAS,GAAKA,EAAS,GAFzB9J,OAAAiK,EAAA,EAAAjK,CAAA6J,EAGfxJ,IAAO8J,QAAUL,GAAU,GAAKA,EAAS,IAH1B9J,OAAAiK,EAAA,EAAAjK,CAAA6J,EAIfxJ,IAAO+J,QAAUN,GAAU,IAAMA,EAAS,IAJ3B9J,OAAAiK,EAAA,EAAAjK,CAAA6J,EAKfxJ,IAAOgK,QAAUP,GAAU,IALZD,KAOfC,GAAU,IChDTQ,GAAM,UAYNC,GAAa,WACjB,IAAMC,EAASC,aAAaC,QAAQJ,IACpC,OAAOE,EAASzF,KAAK4F,MAAMH,GAAU,CAAEI,gBAAiB,KA4DpDC,GAAmB,kBAAcJ,aAAaC,QAjB7B,uBAiBwD,IAEhEI,GAAA,CACbC,IA5DU,WACV,IAAMC,EAAUT,KAChB,OAAOS,EAAQA,EAAQJ,kBA2DvBK,eA/CqB,WACrB,IAAMD,EAAUT,KAChB,MAAO,CACLpM,SAAU6M,EAAQJ,gBAClBE,IAAKE,EAAQA,EAAQJ,mBA4CvBM,qBAzD2B,WAC3B,IAAMF,EAAUT,KAChB,OAAOvK,OAAOmL,KAAKH,GAChBvG,OAAO,SAAAtG,GAAQ,MAAkB,oBAAbA,GAAkCA,IAAa6M,EAAQJ,kBAC3ElG,IAAI,SAAAvG,GAAQ,MAAK,CAChBA,WAAU2M,IAAKE,EAAQ7M,OAqD3B0M,oBACAO,iBAvBuB,WACvB,IACE,IAAMC,EAAgBR,KACtB,GAAKQ,EAKH,OAAOA,EAJP,IAAMC,EAAK,GAAA/H,OAAMgI,KAAKC,MAAX,KAAAjI,OAAoBkI,KAAKC,UAEpC,OADAjB,aAAakB,QANI,qBAMoBL,GAC9BA,EAKT,MAAMM,GACNC,QAAQC,IAAI,iCAAkCF,KAYhDG,IA3CU,SAAC5N,EAAkB2M,GAC7B,IAAME,EAAUT,KAChBS,EAAQ7M,GAAY2M,EACpBL,aAAakB,QAAQrB,GAAKvF,KAAKC,UAAUgG,KAyCzCgB,eAtCqB,SAAC7N,GACtB,IAAM6M,EAAUT,KAChBS,EAAQJ,gBAAkBzM,EAC1BsM,aAAakB,QAAQrB,GAAKvF,KAAKC,UAAUgG,KAoCzCiB,iBAjCuB,WACvB,IAAMjB,EAAUT,KAChBS,EAAQJ,gBAAkB,GAC1BH,aAAakB,QAAQrB,GAAKvF,KAAKC,UAAUgG,MC5CrCkB,GAAS,WACbpB,GAAImB,mBACJpL,OAAOsL,SAASC,UAGLC,GAA8B,WACzC,IAAMC,EAAmBxB,GAAII,uBAE7B,OACEnC,EAAAC,EAAAC,cAAA,MAAI7I,UAAWC,IAAOkM,cACpBxD,EAAAC,EAAAC,cAAA,KAAG9B,KAAK,UAAUtE,QAASqJ,IACzBnD,EAAAC,EAAAC,cAAA,qBAGFF,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAG,aACPsB,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,yBAIJF,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAG,YACPsB,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,+BAIJF,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAG,WACPsB,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,iCAIDqD,EAAiBrE,QAClBc,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,IAAOmM,gBACrBzD,EAAAC,EAAAC,cAAA,gCACAF,EAAAC,EAAAC,cAAA,UACGqD,EAAiB5H,IAAI,SAAA7E,GAAA,IAAG1B,EAAH0B,EAAG1B,SAAH,OACpB4K,EAAAC,EAAAC,cAAA,MACEV,IAAKpK,EACL0E,QAAS,kBA5CN,SAAC1E,GAClB2M,GAAIkB,eAAe7N,GACnB0C,OAAOsL,SAASC,SA0CaK,CAAWtO,KAEzBA,SCzCXuO,GAAa,yBAEJ,SAASC,GAAT9M,GAA6C,IAAzBC,EAAyBD,EAAzBC,SAAU8M,EAAe/M,EAAf+M,KACrCC,EAAe,SAACjB,GACpB,IAAMkB,EAAWC,SAASC,eAAeN,IACrCI,GAAYlB,EAAExE,SAAW0F,IAAaA,EAASG,SAASrB,EAAExE,SAC5DwF,KASJ,OALAhL,oBAAU,WAER,OADAmL,SAAS7L,iBAAiB,QAAS2L,GAC5B,kBAAME,SAAS5L,oBAAoB,QAAS0L,MAInD9D,EAAAC,EAAAC,cAAA,OAAK3G,GAAIoK,GAAYtM,UAAW2J,IAAG1J,IAAOyM,SAAU,UACjDhN,GCIP,IAAMoN,GAAgB,qKA4BhBC,GAAiB,kIAiEvB,IAAMC,GAAiC,SAAAvN,GAAqD,IAAlDwN,EAAkDxN,EAAlDwN,sBAAuBC,EAA2BzN,EAA3ByN,YAAaC,EAAc1N,EAAd0N,QAC5E,OACExE,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,IAAO5C,SACrBsL,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAG,KACPsB,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,IAAOmN,OAAvB,gBAGFzE,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,IAAOoN,OACpBH,EACGvE,EAAAC,EAAAC,cAACyE,GAAD,CAAcJ,YAAaA,EAAaD,sBAAuBA,KAC/DE,GAAkBxE,EAAAC,EAAAC,cAAC0E,GAAD,SAYxBC,GAAe,SAAApN,GAA+D,IAA5D8M,EAA4D9M,EAA5D8M,YAAaD,EAA+C7M,EAA/C6M,sBAA+CQ,EAClDzM,EAAc,KAAtCW,EAD0E8L,EAC1E9L,UAAWL,EAD+DmM,EAC/DnM,SAEnB,OACEqH,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,OACE7I,UAAWC,IAAOgJ,KAClBxG,QAAS,kBAAMwK,EAAsB,UACrCrK,MAAO,CAAE8K,SAAU,QAASC,SAAU,SAErCT,EAAYnP,SACb4K,EAAAC,EAAAC,cAAA,OACE7I,UAAW2J,IAAG1J,IAAO2J,OAAQ3J,IAAO2N,MACpChL,MAAO,CAAEiL,gBAAe,OAAA1K,OAAS+J,EAAYY,UAArB,SAI3BnM,GACCgH,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,IAAOgJ,KAAMxG,QAAS,kBAAMwK,EAAsB,YAAlE,SAEEtE,EAAAC,EAAAC,cAACkF,GAAD,CAAarE,OAAQwD,EAAYzE,OAAOZ,UAI3CvG,GACCqH,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,IAAOgJ,KAAMxG,QAAS,kBAAMwK,EAAsB,YAChEtE,EAAAC,EAAAC,cAACkF,GAAD,CAAarE,OAAQwD,EAAYzE,OAAOZ,YAW5CmG,GAAgB,kBACpBrF,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAG,SAASrH,UAAWC,IAAOgJ,MAApC,SACAN,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAG,UAAUrH,UAAWC,IAAOgJ,MAArC,YAIWgF,GAnHf,SAAatO,GAAc,IAAAuB,EACiBC,mBAAiC,MADlDC,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAAsB,EAAA,GAClBgN,EADkB9M,EAAA,GACH+M,EADG/M,EAAA,GAAAgN,EAEkBC,YAA2B,CAAEC,MAAOxB,KAFtDyB,EAAA3O,OAAAyB,EAAA,EAAAzB,CAAAwO,EAAA,GAAAI,EAAAD,EAAA,GAEhBE,EAFgBD,EAEhBC,KAAMC,EAFUF,EAEVE,SAAYC,EAFFJ,EAAA,GAAAK,EAGYC,YAA+C9B,IAH3D+B,EAAAlP,OAAAyB,EAAA,EAAAzB,CAAAgP,EAAA,GAGRG,GAHQD,EAAA,GAAAA,EAAA,IAInB5B,EAAeuB,GAAQA,EAAKvB,aAAgB,KAI5CT,EAAe,kBAAM0B,EAAiB,OAQ5C,OAPA3M,oBAAU,kBAAM7B,EAAMqP,QAAQC,OAAOxC,KACrC7K,EAAY,WACL+K,SAASuC,QACZP,EAAa,CAAEQ,cAAe,kBAE/B,KAGDxG,EAAAC,EAAAC,cAAA,OAAK7I,UAAW2J,IAAG1J,IAAOmP,UAAW,UACnCzG,EAAAC,EAAAC,cAACvI,EAAD,KACEqI,EAAAC,EAAAC,cAACwG,GAAD,CACElC,QAASuB,EACTxB,YAAaA,EACbD,sBAAuBkB,IAEzBxF,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,IAAOqP,kBACpBpB,GACCvF,EAAAC,EAAAC,cAAC0D,GAAD,CAAUC,KAAMC,GACK,UAAlByB,GAA6BvF,EAAAC,EAAAC,cAAC0G,GAAD,MACX,WAAlBrB,GAA8BhB,GAAevE,EAAAC,EAAAC,cAAC2G,GAAD,CAC5C/G,OAAQyE,EAAYzE,OACpBU,aAAcsD,EACd/D,UAzBI,SAAC+G,GAAD,OAAqBV,EAAiB,CAAE1P,MAAO,CAAEoQ,yCCpEtDC,GANwB,SAAAjQ,GAAA,IAAGkQ,EAAHlQ,EAAGkQ,MAAH,OACrC7P,EAAA,qBAAKE,UAAWC,KAAO0P,OAAvB,sBACsBhL,KAAKC,UAAU+K,EAAO,KAAM,yBCUrCC,GAfgB,WAAM,IAAA1O,EACXC,mBAAiB,IADNC,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAAsB,EAAA,GAC5B2O,EAD4BzO,EAAA,GACtB0O,EADsB1O,EAAA,GAQnC,OALAI,oBAAU,WACR,IAAMuO,EAAW5N,YAAY,kBAAM2N,EAAQD,EAAO,MAAM,KACxD,OAAO,kBAAMzN,cAAc2N,MAI3BpH,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOkN,SAAvB,UACU0C,wBCNRG,GAAa,oKA0FJC,OA9Df,WAAiB,IAAA/O,EACiBC,mBAAiB,IADlCC,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAAsB,EAAA,GACRnD,EADQqD,EAAA,GACE8O,EADF9O,EAAA,GAAA+O,EAEiBhP,mBAAiB,IAFlCiP,EAAAxQ,OAAAyB,EAAA,EAAAzB,CAAAuQ,EAAA,GAERE,EAFQD,EAAA,GAEEE,EAFFF,EAAA,GAAAG,EAGmBpP,mBAAiB,IAHpCqP,EAAA5Q,OAAAyB,EAAA,EAAAzB,CAAA2Q,EAAA,GAGRE,EAHQD,EAAA,GAGGE,EAHHF,EAAA,GAAA5B,EAMmCC,YAAuCmB,IAN1ElB,EAAAlP,OAAAyB,EAAA,EAAAzB,CAAAgP,EAAA,GAAA+B,EAAA7B,EAAA,GAMNa,EANMgB,EAMNhB,MAAOjB,EANDiC,EAMCjC,SAAUD,EANXkC,EAMWlC,KAAQmC,EANnB9B,EAAA,GAoBf,OAZA+B,kBAAQ,WACFpC,GAAQA,EAAKqC,QACXrC,EAAKqC,MAAMC,UACbrG,GAAIiB,IAAI5N,EAAU0Q,EAAKqC,MAAMC,UAC7BrG,GAAIkB,eAAe7N,GACnB0C,OAAOsL,SAAShF,KAAO,KAEvB2J,EAAa,6CAGhB,CAAC3S,EAAU0Q,IAGZ9F,EAAAC,EAAAC,cAAA,WAAS7I,UAAWC,KAAO6Q,OACzBnI,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO+Q,MACrBrI,EAAAC,EAAAC,cAAA,mBACC8G,GAAShH,EAAAC,EAAAC,cAACoI,GAAD,CAActB,MAAOA,IAC9BjB,GAAY/F,EAAAC,EAAAC,cAACqI,GAAD,OACXvB,IAAUjB,GACV/F,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,SACEsI,KAAK,cACLC,YAAY,WACZC,MAAOtT,EACPuT,SAAU,SAAC9F,GAAD,OAAO0E,EAAY1E,EAAExE,OAAOqK,UAExC1I,EAAAC,EAAAC,cAAA,SACE0I,KAAK,WACLJ,KAAK,WACLC,YAAY,WACZC,MAAOhB,EACPiB,SAAU,SAAC9F,GAAD,OAAO8E,EAAY9E,EAAExE,OAAOqK,UAExC1I,EAAAC,EAAAC,cAAA,UACE7I,UAAWC,KAAOuR,aAClB/O,QAAS,SAAC+I,GACRA,EAAEiG,iBACE1T,GAAYsS,IACdK,EAAa,IACbE,EAAa,CAAEvR,MAAO,CAAEtB,WAAUsS,iBANxC,UAYCI,GAAa9H,EAAAC,EAAAC,cAACoI,GAAD,CAActB,MAAOc,4BClFzCiB,GAAc,sFA6GLC,OArFf,WAAkB,IAAAzQ,EACgBC,mBAAiB,IADjCC,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAAsB,EAAA,GACTnD,EADSqD,EAAA,GACC8O,EADD9O,EAAA,GAAA+O,EAEgBhP,mBAAiB,IAFjCiP,EAAAxQ,OAAAyB,EAAA,EAAAzB,CAAAuQ,EAAA,GAETE,EAFSD,EAAA,GAECE,EAFDF,EAAA,GAAAG,EAG8BpP,mBAAiB,IAH/CqP,EAAA5Q,OAAAyB,EAAA,EAAAzB,CAAA2Q,EAAA,GAGTqB,EAHSpB,EAAA,GAGQqB,EAHRrB,EAAA,GAAAsB,EAIkB3Q,mBAAiB,IAJnC4Q,EAAAnS,OAAAyB,EAAA,EAAAzB,CAAAkS,EAAA,GAITrB,EAJSsB,EAAA,GAIErB,EAJFqB,EAAA,GAAAnD,EAKmCC,YAAyC6C,IAL5E5C,EAAAlP,OAAAyB,EAAA,EAAAzB,CAAAgP,EAAA,GAAA+B,EAAA7B,EAAA,GAKPa,EALOgB,EAKPhB,MAAOjB,EALAiC,EAKAjC,SAAUD,EALVkC,EAKUlC,KAAQuD,EALlBlD,EAAA,GAmBVmD,EAAmBtC,EACrBA,EAAMuC,QAAQC,SAAS,8BACrB,mDACAxC,EAAMuC,QACRzB,GAEE,GAQN,OANIhC,IAASkB,IACXjF,GAAIiB,IAAI5N,EAAU0Q,EAAKjQ,OAAOuS,UAC9BrG,GAAIkB,eAAe7N,GACnB0C,OAAOsL,SAAShF,KAAO,eAIvB4B,EAAAC,EAAAC,cAAA,WAAS7I,UAAWC,KAAOzB,QACzBmK,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO+Q,MACrBrI,EAAAC,EAAAC,cAAA,4BACAF,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOmS,QACrBzJ,EAAAC,EAAAC,cAAA,SACEsI,KAAK,cACLC,YAAY,WACZC,MAAOtT,EACPuT,SAAU,SAAC9F,GACT0E,EAAY1E,EAAExE,OAAOqK,OACjB7F,EAAExE,OAAOqK,MAAMxJ,OAAS,IAAI6I,EAAa,6CAGjD/H,EAAAC,EAAAC,cAAA,SACE0I,KAAK,WACLJ,KAAK,WACLC,YAAY,WACZC,MAAOhB,EACPiB,SAAU,SAAC9F,GAAD,OAAO8E,EAAY9E,EAAExE,OAAOqK,UAExC1I,EAAAC,EAAAC,cAAA,SACE0I,KAAK,WACLJ,KAAK,mBACLC,YAAY,wBACZC,MAAOO,EACPN,SAAU,SAAC9F,GAAD,OAAOqG,EAAmBrG,EAAExE,OAAOqK,WAIhDY,GAAoBtJ,EAAAC,EAAAC,cAACoI,GAAD,CAActB,MAAOsC,IACzCvD,GAAY/F,EAAAC,EAAAC,cAACqI,GAAD,OACXxC,GACA/F,EAAAC,EAAAC,cAAA,UACE7I,UAAWC,KAAOuR,aAClB/O,QAAS,SAAC+I,GACRA,EAAEiG,iBA9DT1T,GAAasS,EAIdA,IAAauB,EAIjBI,EAAc,CAAE3S,MAAO,CAAEtB,WAAUsS,cAHjCK,EAAa,6CAJbA,EAAa,yCA0DP,sDC/BG2B,GArCgB,SAAA5S,GAAA,IAAG5B,EAAH4B,EAAG5B,KAAH,OAC7BiC,EAAA,yBAASE,UAAWC,KAAOpC,MACzBiC,EAAA,qBAAKE,UAAWC,KAAOhC,QAClBJ,EAAKyU,QACNxS,EAAA,cAACsH,EAAA,EAAD,CAAMC,GAAE,UAAAlE,OAAYtF,EAAKyU,OAAOvU,UAAYiC,UAAWC,KAAO/B,OAC5D4B,EAAA,uBAAOE,UAAWC,KAAO9B,gBACvB2B,EAAA,qBAAKE,UAAWC,KAAOzC,OAAQoF,MAAO,CAAEiL,gBAAe,OAAA1K,OAAStF,EAAKyU,OAAOxE,UAArB,QACvDhO,EAAA,qBAAKE,UAAWC,KAAO7B,UACrB0B,EAAA,qBAAKE,UAAWC,KAAOlC,UAAWF,EAAKyU,OAAOvU,UAC7CF,EAAKyU,OAAOC,WACXzS,EAAA,qBAAKE,UAAWC,KAAOjC,YAAY8B,EAAA,sCAAnC,IAA4DjC,EAAKyU,OAAOC,UAAUC,eAQ5F1S,EAAA,qBAAKE,UAAWC,KAAO5C,SACrByC,EAAA,cAACyI,GAAD,CAAYlL,QAASQ,EAAKR,YAI9ByC,EAAA,qBAAKE,UAAW2J,IAAG1J,KAAO5B,OAAQ,aAChCyB,EAAA,qBAAKE,UAAWC,KAAO3B,UACrBwB,EAAA,wCAAkB,IAAIqL,KAAKtN,EAAK4U,WAAWC,eAC3C5S,EAAA,0BAAMA,EAAA,cAACsH,EAAA,EAAD,CAAMC,GAAE,UAAAlE,OAAYtF,EAAKqE,KAAzB,UAAuCrE,EAAKqE,QAEjDrE,EAAK8U,QACN7S,EAAA,qBAAKE,UAAWC,KAAOnC,YAAvB,cACagC,EAAA,cAACsH,EAAA,EAAD,CAAMC,GAAE,YAAAlE,OAActF,EAAK8U,OAAOzQ,KAAOqD,GAAgB1H,EAAK8U,OAAOvF,YC7CpFwF,GAAS,WAAAzP,OAF2C,OAE3C,2BAAAA,OAF2C,OAE3C,uOA6CA0P,GAvB0B,SAAApT,GAAY,IAATyC,EAASzC,EAATyC,GAASkM,EACfC,YAAoB,CAAEC,MAAOsE,GAAWE,UAAW,CAAE5Q,QADtCsM,EAAA5O,OAAAyB,EAAA,EAAAzB,CAAAwO,EAAA,MAC1CuB,EAD0CnB,EAC1CmB,MAAOjB,EADmCF,EACnCE,SAAUD,EADyBD,EACzBC,KAE1B,OACE3O,EAAA,6BACEA,EAAA,qBAAKE,UAAWC,KAAOvB,MACrBoB,EAAA,cAACsH,EAAA,EAAD,CAAMC,GAAG,KAAK,oBAGhBvH,EAAA,qBAAKE,UAAWC,KAAO3C,MACpBqS,GAAS7P,EAAA,cAACmR,GAAD,CAActB,MAAOA,IAC9BjB,GAAY5O,EAAA,cAACoR,GAAD,MACZzC,IACCA,EAAK5Q,KACDiC,EAAA,cAACiT,GAAD,CAAMlV,KAAM4Q,EAAK5Q,OACjB,8GCtBCmV,GAlBc,SAAAvT,GAAA,IAAG0F,EAAH1F,EAAG0F,IAAKE,EAAR5F,EAAQ4F,IAAKhI,EAAboC,EAAapC,QAASoF,EAAtBhD,EAAsBgD,QAAtB,OAC3B3C,EAAA,qBAAKE,UAAWC,KAAOpB,IACrBiB,EAAA,mBACEiH,KAAM5B,EACN6B,OAAO,SACPC,IAAI,sBACJxE,QAASA,GAAWwQ,MAEnB5N,GACCvF,EAAA,cAACoF,GAAD,CAAKC,IAAKE,EAAKD,IAAK/H,IAErBA,GACCyC,EAAA,qBAAKE,UAAWC,KAAO5C,SAAUA,0BClBnC6V,GAAY,SAACtP,GACjB,IACE,IAAMuP,EAAMxO,KAAK4F,MAAM3G,GACvB,OAAOwP,oBAASD,GAAOA,EAAM,GAC7B,MAAM3H,GACN,MAAO,KAGL6H,GAAO,2LA6HN,SAASC,KAA2C,IAApCC,EAAoCC,UAAA3L,OAAA,QAAA4L,IAAAD,UAAA,GAAAA,UAAA,GAAxB,EAAGnP,EAAqBmP,UAAA3L,OAAA,QAAA4L,IAAAD,UAAA,GAAAA,UAAA,GAAJ,GAAIpF,EAC5BC,YAAkB,CAAEC,MAAO+E,KADC7E,EAAA5O,OAAAyB,EAAA,EAAAzB,CAAAwO,EAAA,MAChDK,EADgDD,EAChDC,KAAMC,EAD0CF,EAC1CE,SAmBf,MAAO,CAAEgF,IAjBG7C,kBAAQ,WAClB,IAAKpC,EAAM,MAAO,GAClB,IAAMkF,EAAYlF,EAAKiF,IAAIpP,IAAI,SAAAzF,GAAE,OAAAe,OAAAgU,GAAA,EAAAhU,CAAA,GAC5Bf,EAD4B,CAE/B6F,KAAMC,KAAK4F,MAAM1L,EAAG6F,MACpBmP,YAAalP,KAAK4F,MAAM1L,EAAGgV,aAC3BC,WAAYnP,KAAK4F,MAAM1L,EAAGiV,gBAEtBC,EAAetF,EAAKvB,YAAcgG,GAAUzE,EAAKvB,YAAY6G,cAAgB,GAC7ED,EAAU,CACdC,EAAalR,QADCM,OAAAvD,OAAAwD,EAAA,EAAAxD,CAEVmU,EAAaC,aAAe,KAGlC,OAvDJ,SACEC,GAGW,IAFX5P,EAEWmP,UAAA3L,OAAA,QAAA4L,IAAAD,UAAA,GAAAA,UAAA,GAFM,GACjBD,EACWC,UAAA3L,OAAA,QAAA4L,IAAAD,UAAA,GAAAA,UAAA,GADC,EAEN9O,EAAO,IAAIxB,IAAImB,EAAOK,MAAQ,IAC9BoP,EAAa,IAAI5Q,IAAImB,EAAOyP,YAAc,IAC1CI,EAAYD,EAAO5P,OAAO,SAAAxF,GAAE,OAAIA,EAAGsV,YAEnCC,EAAaH,EAAO5P,OAAO,SAAAxF,GAAE,OAAIA,EAAGgV,YAAYQ,KAAK,SAAAzL,GAAC,OAAIlE,EAAKT,IAAI2E,OAEzE,GAAIwL,EAAWvM,QAAU0L,EACvB,OAAOe,sBAAWF,EAAYb,GAEhC,IAAMgB,EAAeN,EAAO5P,OAAO,SAAAxF,GAAE,OACnCA,EAAG6F,KAAK2P,KAAK,SAAAzL,GAAC,OAAIlE,EAAKT,IAAI2E,OACvBwL,EAAWjC,SAAStT,KAG1B,GAAIuV,EAAWvM,OAAS0M,EAAa1M,QAAU0L,EAC7C,SAAApQ,OAAAvD,OAAAwD,EAAA,EAAAxD,CAAW4U,mBAAQJ,IAAnBxU,OAAAwD,EAAA,EAAAxD,CAAmC0U,sBAAWC,EAAchB,EAAIa,EAAWvM,UAG7E,IAAM4M,EAAS,GAAAtR,OAAAvD,OAAAwD,EAAA,EAAAxD,CAAO4U,mBAAQJ,IAAfxU,OAAAwD,EAAA,EAAAxD,CAA+B4U,mBAAQD,KAEhDG,EAAYT,EAAO5P,OAAO,SAAAxF,GAAE,OAChCA,EAAGiV,WAAWO,KAAK,SAAAzL,GAAC,OAAIkL,EAAW7P,IAAI2E,OACnC6L,EAAUtC,SAAStT,KAGnB8V,EAAY,GAAAxR,OAAAvD,OAAAwD,EAAA,EAAAxD,CACb8U,GADa9U,OAAAwD,EAAA,EAAAxD,CAEbsU,EAAU7P,OAAO,SAAAxF,GAAE,OAAK4V,EAAUtC,SAAStT,OAGhD,SAAAsE,OAAAvD,OAAAwD,EAAA,EAAAxD,CAAW6U,GAAX7U,OAAAwD,EAAA,EAAAxD,CAAyB0U,sBAAWK,EAAcpB,EAAIkB,EAAU5M,UAoBvD+M,CAAUjB,EAAD/T,OAAAgU,GAAA,EAAAhU,CAAA,GAAgByE,EAAhB,CAAwByP,eAAaP,IACpD,CAACA,EAAGlP,EAAQoK,IAEDoG,YAAanG,GAO7B,IAwBeoG,GAxBK,SAAArV,GAA8B,IAA3BiU,EAA2BjU,EAA3BiU,IAAKhF,EAAsBjP,EAAtBiP,SAAsBE,EACVC,YAlGhB,8JAiG0BC,EAAAlP,OAAAyB,EAAA,EAAAzB,CAAAgP,EAAA,GAC/BmG,GAD+BjG,EAAA,GAAAA,EAAA,IAGhD,GAAIJ,EAAU,OAAO/F,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,mBACrB,IAAK4K,EAAK,OAAO,KAOjB,OACE/K,EAAAC,EAAAC,cAAA,WAAS7I,UAAWC,KAAOrB,aACzB+J,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOV,OAAvB,qBACCmU,EAAIpP,IAAI,SAACzF,EAAIqJ,GAAL,OACPS,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO+U,UAAW7M,IAAKD,GACrCS,EAAAC,EAAAC,cAACoM,GAADrV,OAAAG,OAAA,GAAQlB,EAAR,CAAY4D,QAAS,kBAVTP,EAU0BrD,EAAGqD,GAT/CgT,WAAW,kBACTH,EAAkB,CAAE1V,MAAO,CAAER,GAAIqD,MAC/B,KAHa,IAACA,+BCzKhBiT,GAAqB,2BAsDZC,OA5Cf,SAAA3V,GAMU,IALR2R,EAKQ3R,EALR2R,YACAiE,EAIQ5V,EAJR4V,cACAC,EAGQ7V,EAHR6V,WACAC,EAEQ9V,EAFR8V,SACAjE,EACQ7R,EADR6R,SACQpQ,EACsBC,mBAAS,IAD/BC,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAAsB,EAAA,GACD7D,EADC+D,EAAA,GACQoU,EADRpU,EAAA,GAGFqU,EAAS,WACbF,EAASlY,GACTmY,EAAW,KAQb,OACE7M,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOmP,WACrBzG,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOyV,OACvB/M,EAAAC,EAAAC,cAAA,YACE7I,UAAWC,KAAO0V,aAClBvE,YAAaA,GAAe+D,GAC5B7D,SAAU,SAAA9F,GACRgK,EAAWhK,EAAExE,OAAOqK,OACpBC,GAAYA,EAAS9F,EAAExE,OAAOqK,QAEhCA,MAAOhU,EACPuF,MAAO0S,EACPM,UAlBuB,SAACpK,GACV,KAAdA,EAAEqK,SAAkBrK,EAAEsK,SACxBL,OAkBA9M,EAAAC,EAAAC,cAAA,UACE7I,UAAWC,KAAOuR,aAClB/O,QAASgT,GAERJ,GAAiB,aCtBpBU,GAAW,WAAA5S,OADyC,SACzC,8BAAAA,OADyC,SACzC,6SAyDX6S,GAAmC,SAAAvW,GAA4B,IAAzBiI,EAAyBjI,EAAzBiI,SAAUjJ,EAAegB,EAAfhB,SAAemQ,EAC7BC,YAhChB,mOA+B6CC,EAAAlP,OAAAyB,EAAA,EAAAzB,CAAAgP,EAAA,GAClDqH,GADkDnH,EAAA,GAAAA,EAAA,IAgBnE,OACEnG,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACGrK,GACCkK,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAG,WACPsB,EAAAC,EAAAC,cAAA,MAAI7I,UAAWC,KAAOzB,QAAtB,gDAGJmK,EAAAC,EAAAC,cAAA,OAAK7I,UAAW2J,IAAG1J,KAAOtB,QAASF,GAAYwB,KAAOxB,WACpDkK,EAAAC,EAAAC,cAACqN,GAAD,CAAWX,SArBF,SAAClY,GACd,GAAKA,EAAL,CADkC,IAAA8Y,EAEN1R,EAAQpH,GAA5BqH,EAF0ByR,EAE1BzR,KAAMG,EAFoBsR,EAEpBtR,UACdoR,EAAkB,CAChB5W,MAAO,CACLqI,WACArK,UACAqH,OACAG,sBAmBFuR,GAAkB,CAAC,GA+EVC,GA9E4B,SAAAjW,GAAY,IAAT8B,EAAS9B,EAAT8B,GAASuL,EACrBzM,EAAc,KAAtCM,EAD6CmM,EAC7CnM,SAAUK,EADmC8L,EACnC9L,UADmCyM,EAEjBC,YAAsB,CAAEC,MAAOyH,GAAajD,UAAW,CAAE5Q,QAFxCsM,EAAA5O,OAAAyB,EAAA,EAAAzB,CAAAwO,EAAA,MAE5CK,EAF4CD,EAE5CC,KAAMkB,EAFsCnB,EAEtCmB,MAAOjB,EAF+BF,EAE/BE,SAF+B4H,EASxBhD,GAAO,EAAG,CAAE5O,MAJtC0R,GAAgBjE,SAASjQ,IAAOuM,GAAQA,EAAKkE,OAC1ClE,EAAKkE,OAAO4D,MAAMC,QAAQ,SAAAC,GAAC,OAAI9R,KAAK4F,MAAMkM,EAAE/R,QAC5C,KAEEgP,EAT6C4C,EAS7C5C,IAAKmB,EATwCyB,EASxCzB,YAeP6B,EAAU/G,GAAShH,EAAAC,EAAAC,cAACoI,GAAD,CAActB,MAAOA,IACxCgH,EAAYjI,GAAY/F,EAAAC,EAAAC,cAACqI,GAAD,MAGxB0F,EAASnI,IAASA,EAAKkE,OAC3BhK,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOmP,WACrBzG,EAAAC,EAAAC,cAAA,UAAQ7I,UAAWC,KAAO1B,aACxBoK,EAAAC,EAAAC,cAAA,UAAMtD,GAAgBkJ,EAAKkE,OAAOvF,SAEpCzE,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAE,YAAAlE,OAAcsL,EAAKkE,OAAOzQ,KAChCyG,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOnC,YAAvB,YACY2Q,EAAKkE,OAAOzQ,KAG1ByG,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACG2F,EAAKkE,OAAO4D,MAAMjS,IAAI,SAACzG,EAAMqK,GAAP,OACrBS,EAAAC,EAAAC,cAAC/I,EAAA,SAAD,CAAUqI,IAAKtK,EAAKqE,IA9BT,SAACgG,GACpB,IAAK5G,EAAU,OAAO,EACtB,IAAK4G,EAAI,GAAK,EAAG,OAAO,EAExB,IAAM2O,IAAU3O,EAAI,GAAK,EAAK,GAAKwL,EAAI7L,OAEvC,OACEc,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOpB,IACrB8J,EAAAC,EAAAC,cAACiO,GAAD,CAAapD,IAAK,CAACA,EAAImD,IAAQnI,SAAUmG,KAuBlCkC,CAAa7O,GACdS,EAAAC,EAAAC,cAACkK,GAAD,CAAMlV,KAAMA,QAIlB8K,EAAAC,EAAAC,cAACmO,GAAD,CACEtP,SAAU+G,EAAKkE,OAAOzQ,GACtBzD,UAAWgQ,EAAKvB,gBAIpB,+BAEJ,OACEvE,EAAAC,EAAAC,cAAA,eACEF,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOvB,MACrBiK,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAG,KAAK,oBAGhBsB,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOnB,iBACrB6J,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO3C,MACpBoZ,EACAC,EACAC,GAGFjV,GACCgH,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOrB,aACrB+J,EAAAC,EAAAC,cAACiO,GAAD,CAAapD,IAAKA,EAAKhF,SAAUmG,4BCnD9BoC,GA9EkB,WAAM,IAAA/V,EACXC,mBAAiB,IADNC,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAAsB,EAAA,GAC9BkM,EAD8BhM,EAAA,GACvB8V,EADuB9V,EAAA,GAAA+O,EAEPhP,mBAAiB,IAFViP,EAAAxQ,OAAAyB,EAAA,EAAAzB,CAAAuQ,EAAA,GAE9B9S,EAF8B+S,EAAA,GAErBoF,EAFqBpF,EAAA,GAAAhC,EAGrBC,YAAoB,CAAEC,MAnCzB,6HAmCNA,EAH8B1O,OAAAyB,EAAA,EAAAzB,CAAAwO,EAAA,MAAAQ,EAIGC,YAfhB,8IAWaC,EAAAlP,OAAAyB,EAAA,EAAAzB,CAAAgP,EAAA,GAI9BuI,EAJ8BrI,EAAA,GAIpBsI,EAJoBtI,EAAA,GAmBrC,GAAIqI,EAAS1I,KAEX,OADAhO,OAAOsL,SAAShF,KAAhB,YAAA5D,OAAmCgU,EAAS1I,KAAK4I,aAAa1E,OAAOzQ,IAC9DyG,EAAAC,EAAAC,cAAA,YAET,GAAIyF,EAAMI,UAAYyI,EAASzI,SAAU,OAAO/F,EAAAC,EAAAC,cAAA,0BAEhD,IAAMpK,EAAW6P,EAAMG,OAASH,EAAMG,KAAKvB,YACrCoF,EAAShE,EAAMG,MAAQH,EAAMG,KAAKvB,aAAzBtN,OAAAgU,GAAA,EAAAhU,CAAA,GACV0O,EAAMG,KAAKvB,YADD,CAEbqF,UAAW,CACTC,WAAYlE,EAAMG,KAAKvB,YAAYqF,UAAUC,WAAa,KAI9D,OACE7J,EAAAC,EAAAC,cAAA,WAAS7I,UAAWC,KAAOqX,WACzB3O,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOvB,MACrBiK,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAG,KAAK,qBAEd5I,GAAYkK,EAAAC,EAAAC,cAAA,MAAI7I,UAAWC,KAAOX,cAAtB,cACbb,GACCkK,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAG,WACPsB,EAAAC,EAAAC,cAAA,MAAI7I,UAAWC,KAAOzB,QAAtB,gDAIJmK,EAAAC,EAAAC,cAAA,OAAK7I,UAAW2J,IAAG/J,OAAAiK,EAAA,EAAAjK,CAAA,GAAGK,KAAOxB,SAAWA,KACtCkK,EAAAC,EAAAC,cAAA,MAAI7I,UAAWC,KAAOV,OAAtB,SACAoJ,EAAAC,EAAAC,cAAA,SACE7I,UAAWC,KAAOZ,MAClBiS,SAAU,SAAA9F,GAAC,OAAI0L,EAAS1L,EAAExE,OAAOqK,QACjCA,MAAOjE,IAETzE,EAAAC,EAAAC,cAAA,MAAI7I,UAAWC,KAAOV,OAAtB,WACAoJ,EAAAC,EAAAC,cAACqN,GAAD,CACEX,SAhDa,WACnB,GAAKnI,GAAU/P,EAAf,CADyB,IAAA8Y,EAEG1R,EAAQ2I,EAAQ,IAAM/P,GAA1CqH,EAFiByR,EAEjBzR,KAAMG,EAFWsR,EAEXtR,UACduS,EAAoB,CAClB/X,MAAO,CACL+N,QACA/P,UACAqH,OACAG,iBAyCEyM,SAAUkE,EACVH,cAAc,eACdjE,YAAY,GACZkE,WAAY,CAAEiC,OAAQ,YAEtBnK,GAAS/P,IACTsL,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,MAAI7I,UAAWC,KAAOV,OAAtB,aAAwCgG,GAAgB6H,IACxDzE,EAAAC,EAAAC,cAACkK,GAAD,CACElV,KAAM,CACJqE,GAAI,KACJuQ,WAAW,IAAItH,MAAOqM,WACtBna,UACAiV,0EC1FVmF,GAAS,wKAkBT3K,GAAgB,2BAAA3J,OAEhBsU,GAFgB,uFAWhBC,GAAkB,qGAAAvU,OAGhBsU,GAHgB,mBAyCT,SAASE,GAATlY,GAAqC,IAAlBuP,EAAkBvP,EAAlBuP,QAAkBZ,EACdC,YAA2B,CAAEC,MAAOxB,KADtB0B,EAAA5O,OAAAyB,EAAA,EAAAzB,CAAAwO,EAAA,MACzCK,EADyCD,EACzCC,KAAMkB,EADmCnB,EACnCmB,MAAOjB,EAD4BF,EAC5BE,SAGtB,OAAIiB,EAAchH,EAAAC,EAAAC,cAACoI,GAAD,CAActB,MAAOA,IACnCjB,EAAiB/F,EAAAC,EAAAC,cAACqI,GAAD,MAChBzC,EACAA,EAAKvB,YAGHvE,EAAAC,EAAAC,cAAC+O,GAAD,CAAgB1K,YAAauB,EAAKvB,YAAa2K,KARzC,SAAC1S,GAAD,OAAiB6J,EAAQ8I,KAAK3S,MAKbwD,EAAAC,EAAAC,cAACkP,GAAA,EAAD,CAAU1Q,GAAG,YADzB,KAOpB,SAAS2Q,GAAgBC,GACvB,IAAMlE,EAAekE,EAAOlE,aAAepP,KAAK4F,MAAM0N,EAAOlE,cAAgB,GACvElR,EAASoV,EAAOpV,OpBnDjB,SAAmBe,GACxB,IAAMsU,EAActU,EACjBQ,MAAM,KACNE,IAAI,SAAAC,GAAC,OAAIV,GAAcU,GAAGL,gBAE7B,OAAIiU,IAAaD,EAAarV,EAAOC,MAAM+E,OAAe,OACjDsQ,IAAaD,EAAarV,EAAOE,QAAQ8E,OAAe,SACrD,QoB4CmBuQ,CAAUH,EAAOpV,aAAU4Q,EACpDO,EAAcxP,EAAY,CAC9ByT,EAAOI,IACPJ,EAAOK,IACPL,EAAOM,UACPN,EAAOO,MACPP,EAAOQ,SACPR,EAAOS,UACPC,KAAK,MAEP,OAAOhU,KAAKC,UAALhF,OAAAgU,GAAA,EAAAhU,CAAA,GAAoBmU,EAApB,CAAkClR,SAAQmR,iBAGnD,IAAM4E,GAAY,SAACC,GAAD,OAAqB1N,KAAKZ,MAAMsO,GAAW,IAAI1N,KAAK0N,GAASnG,cAAgB,MACzFoG,GAAa,SAACC,GAAD,OAAsBA,EAASjV,MAAM,eAAiBiV,EAAW,MAC9EC,GAAO,SAACC,GAAD,OAAgB,IAAIC,QAAQ,SAAAC,GAAG,OAAIjE,WAAWiE,EAAKF,MAMhE,SAASrB,GAATxX,GAA8D,IAAnC8M,EAAmC9M,EAAnC8M,YAAmChM,GAAAd,EAAtByX,KACJ1W,mBAAiB+L,EAAYY,YADH1M,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAAsB,EAAA,GACrD4M,EADqD1M,EAAA,GAC1CgY,EAD0ChY,EAAA,GAAA+O,EAElChP,mBAAiB+L,EAAYmM,OAAS,IAFJjJ,EAAAxQ,OAAAyB,EAAA,EAAAzB,CAAAuQ,EAAA,GAErDkJ,EAFqDjJ,EAAA,GAE9CkJ,EAF8ClJ,EAAA,GAAAG,EAGhCpP,mBAAiB+L,EAAYrK,QAHG2N,EAAA5Q,OAAAyB,EAAA,EAAAzB,CAAA2Q,EAAA,GAGrD1N,EAHqD2N,EAAA,GAG7C+I,EAH6C/I,EAAA,GAAAsB,EAI5B3Q,mBAAiB+L,EAAYsM,UAAY,IAJbzH,EAAAnS,OAAAyB,EAAA,EAAAzB,CAAAkS,EAAA,GAIrD0H,EAJqDzH,EAAA,GAI3C0H,EAJ2C1H,EAAA,GAAA2H,EAKtCvY,mBAAiB+L,EAAYmL,KALSsB,EAAA/Z,OAAAyB,EAAA,EAAAzB,CAAA8Z,EAAA,GAKrDrB,EALqDsB,EAAA,GAKhDC,EALgDD,EAAA,GAAAE,EAMtC1Y,mBAAiB+L,EAAYoL,KANSwB,EAAAla,OAAAyB,EAAA,EAAAzB,CAAAia,EAAA,GAMrDvB,EANqDwB,EAAA,GAMhDC,EANgDD,EAAA,GAAAE,EAO1B7Y,mBAAiB+L,EAAYqL,WAPH0B,EAAAra,OAAAyB,EAAA,EAAAzB,CAAAoa,EAAA,GAOrDzB,EAPqD0B,EAAA,GAO1CC,EAP0CD,EAAA,GAAAE,EAQ5BhZ,mBAAiB+L,EAAYkN,UARDC,EAAAza,OAAAyB,EAAA,EAAAzB,CAAAua,EAAA,GAQrDC,EARqDC,EAAA,GAQ3CC,EAR2CD,EAAA,GAAAE,EASlCpZ,mBAAiB+L,EAAYsL,OATKgC,EAAA5a,OAAAyB,EAAA,EAAAzB,CAAA2a,EAAA,GASrD/B,EATqDgC,EAAA,GAS9CC,EAT8CD,EAAA,GAAAE,EAU5BvZ,mBAAiB+L,EAAYuL,UAVDkC,EAAA/a,OAAAyB,EAAA,EAAAzB,CAAA8a,EAAA,GAUrDjC,EAVqDkC,EAAA,GAU3CC,EAV2CD,EAAA,GAAAE,EAW5B1Z,mBAAiB+L,EAAYwL,UAXDoC,EAAAlb,OAAAyB,EAAA,EAAAzB,CAAAib,EAAA,GAWrDnC,EAXqDoC,EAAA,GAW3CC,EAX2CD,EAAA,GAAAE,EAa1B7Z,oBAAkB,GAbQ8Z,EAAArb,OAAAyB,EAAA,EAAAzB,CAAAob,EAAA,GAarDE,GAbqDD,EAAA,GAa1CE,GAb0CF,EAAA,GAAAxN,GAc5BzM,EAAc,KAAtCM,GAdoDmM,GAcpDnM,SAAUK,GAd0C8L,GAc1C9L,UAd0CyZ,GAiBlBja,oBAAkB,GAjBAka,GAAAzb,OAAAyB,EAAA,EAAAzB,CAAAwb,GAAA,GAiBrDE,GAjBqDD,GAAA,GAiBtCE,GAjBsCF,GAAA,GAAAzM,GAkBtBC,YAAgD6I,IAlB1B5I,GAAAlP,OAAAyB,EAAA,EAAAzB,CAAAgP,GAAA,GAkBrDuI,GAlBqDrI,GAAA,GAkB3C0M,GAlB2C1M,GAAA,GAoBtD2M,GAAYP,IAAa1B,IAAaZ,GAAUY,GAAY,gCAAkC,GAC9FkC,GAAaR,IAAa7B,IAAUP,GAAWO,GAAS,kCAAoC,GAE5Frc,GACJ2L,EAAAC,EAAAC,cAAA,UAAQ7I,UAAWC,KAAOjD,QACxB2L,EAAAC,EAAAC,cAAA,6BAAqBqE,EAAYnP,UACjC4K,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO0b,WAAvB,SAAyCzO,EAAYhL,IACrDyG,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO0b,WAAWhT,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAE,UAAAlE,OAAY+J,EAAYnP,WAAhC,kBAIhC6d,GAAU,eAAApS,EAAA5J,OAAAic,GAAA,EAAAjc,CAAAkc,GAAAlT,EAAAmT,KAAG,SAAAC,IAAA,IAAA/D,EAAAlE,EAAA,OAAA+H,GAAAlT,EAAAqT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACjBjB,IAAa,GACbI,IAAiB,GACXtD,EAAS,CACXoB,MAAOP,GAAWO,GAClBG,SAAUZ,GAAUY,GACpB1L,YACAjL,SACAwV,MACAC,MACAC,YACA6B,WACA5B,QACAC,WACAC,YAEE3E,EAAeiE,GAAgBpY,OAAAgU,GAAA,EAAAhU,CAAA,GAAKqY,EAAN,CAAclE,aAAc7G,EAAY6G,gBAhB3DmI,EAAAE,KAAA,EAiBXlD,QAAQmD,IAAI,CAChBb,GAAkB,CAChBnc,MAAMO,OAAAgU,GAAA,EAAAhU,CAAA,GAAMqY,EAAP,CAAelE,mBAEtBiF,GAAK,OArBU,OAuBjBuC,IAAiB,GAvBA,wBAAAW,EAAAI,SAAAN,MAAH,yBAAAxS,EAAA+S,MAAAC,KAAAhJ,YAAA,GA2BhB,OACE7K,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOhD,SACpBqE,IAAYtE,GACb2L,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO5C,SACrBsL,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO3C,MACrBqL,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOzC,OAAQoF,MAAO,CAAEiL,gBAAe,OAAA1K,OAAS2K,EAAT,QACvDnF,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,wBAAL,IAA8BqE,EAAYqF,UAAUC,cAIxD7J,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO1C,OACpB4Z,GAASzI,UAAY4M,GAClB3S,EAAAC,EAAAC,cAACqI,GAAD,MAEFvI,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACGnH,IAAa3E,GACd2L,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOwc,iBACrB9T,EAAAC,EAAAC,cAAA,UAAQ7I,UAAWC,KAAOuR,aAAc/O,QAASmZ,IAAjD,mBAGFjT,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOyc,cACrB/T,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,SACE7I,UAAWC,KAAO0V,aAClBtE,MAAOvD,EACPsD,YAAY,oCACZE,SAAU,SAAA9F,GAAC,OAAI4N,EAAa5N,EAAExE,OAAOqK,WAIzC1I,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOyc,cACrB/T,EAAAC,EAAAC,cAAA,mBACAF,EAAAC,EAAAC,cAAA,SACE7I,UAAWC,KAAO0V,aAClBtE,MAAOgI,EACPjI,YAAY,oBACZE,SAAU,SAAA9F,GAAC,OAAI8N,EAAS9N,EAAExE,OAAOqK,YAEhCqK,IAAc/S,EAAAC,EAAAC,cAAA,WAAM6S,KAGzB/S,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOyc,cACrB/T,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,SACE7I,UAAWC,KAAO0V,aAClBtE,MAAOxO,EACPuO,YAAY,SACZE,SAAU,SAAA9F,GAAC,OAAI+N,EAAU/N,EAAExE,OAAOqK,WAItC1I,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOyc,cACrB/T,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAAA,SACE7I,UAAWC,KAAO0V,aAClBtE,MAAOmI,EACPpI,YAAY,WACZE,SAAU,SAAA9F,GAAC,OAAIiO,EAAYjO,EAAExE,OAAOqK,YAEnCoK,IAAa9S,EAAAC,EAAAC,cAAA,WAAM4S,KAGxB9S,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOyc,cACrB/T,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAAA,YACE7I,UAAWC,KAAO0V,aAClBtE,MAAOgH,EACPjH,YAAY,0BACZE,SAAU,SAAA9F,GAAC,OAAIoO,EAAOpO,EAAExE,OAAOqK,WAInC1I,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOyc,cACrB/T,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,SACE7I,UAAWC,KAAO0V,aAClBtE,MAAOiH,EACPlH,YAAY,aACZE,SAAU,SAAA9F,GAAC,OAAIuO,EAAOvO,EAAExE,OAAOqK,WAInC1I,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOyc,cACrB/T,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,SACE7I,UAAWC,KAAO0V,aAClBtE,MAAOkH,EACPnH,YAAY,oCACZE,SAAU,SAAA9F,GAAC,OAAI0O,EAAa1O,EAAExE,OAAOqK,WAIzC1I,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOyc,cACrB/T,EAAAC,EAAAC,cAAA,+BACAF,EAAAC,EAAAC,cAAA,SACE7I,UAAWC,KAAO0V,aAClBtE,MAAO+I,EACPhJ,YAAY,4CACZE,SAAU,SAAA9F,GAAC,OAAI8O,EAAY9O,EAAExE,OAAOqK,WAIxC1I,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOyc,cACrB/T,EAAAC,EAAAC,cAAA,kDACAF,EAAAC,EAAAC,cAAA,SACE7I,UAAWC,KAAO0V,aAClBtE,MAAOmH,EACPpH,YAAY,0CACZE,SAAU,SAAA9F,GAAC,OAAIiP,EAASjP,EAAExE,OAAOqK,WAIrC1I,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOyc,cACrB/T,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAAA,SACE7I,UAAWC,KAAO0V,aAClBtE,MAAOoH,EACPrH,YAAY,MACZE,SAAU,SAAA9F,GAAC,OAAIoP,EAAYpP,EAAExE,OAAOqK,WAIxC1I,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOyc,cACrB/T,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAAA,SACE7I,UAAWC,KAAO0V,aAClBtE,MAAOqH,EACPtH,YAAY,uBACZE,SAAU,SAAA9F,GAAC,OAAIuP,EAAYvP,EAAExE,OAAOqK,WAIxC1I,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOwc,iBACrB9T,EAAAC,EAAAC,cAAA,UAAQ7I,UAAWC,KAAOuR,aAAc/O,QAASmZ,IAAjD,+CCrPVe,GAAc,SAAAld,GAAA,IAAG2N,EAAH3N,EAAG2N,MAAOnO,EAAVQ,EAAUR,KAAV,OAClBA,GACE0J,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOtC,aACrBgL,EAAAC,EAAAC,cAAA,UAAKuE,GACLzE,EAAAC,EAAAC,cAACN,GAAD,CAAYlL,QAAS4B,MA2FZ2d,GAxEgB,SAAAxc,GAAkB,IAAfrC,EAAeqC,EAAfrC,SAAeqQ,EACXC,YAAoB,CAAEC,MArG7C,8lBAqG+DwE,UAAW,CAAE/U,cAD1CyQ,EAAA5O,OAAAyB,EAAA,EAAAzB,CAAAwO,EAAA,MACtCuB,EADsCnB,EACtCmB,MAAOjB,EAD+BF,EAC/BE,SAAUD,EADqBD,EACrBC,KADqBhB,EAEfzM,EAAc,KAAtCM,EAFuCmM,EAEvCnM,SAAUK,EAF6B8L,EAE7B9L,UAElB,GAAIgO,EAAO,OAAOhH,EAAAC,EAAAC,cAACoI,GAAD,CAActB,MAAOA,IACvC,GAAIjB,EAAU,OAAO/F,EAAAC,EAAAC,cAACqI,GAAD,MACrB,IAAKzC,IAASA,EAAKb,KAAM,OACvBjF,EAAAC,EAAAC,cAAA,OAAKjG,MAAO,CAAEia,OAAQ,SAAUC,UAAW,WACxC/e,EADH,uCAP6C,IAV7Bgf,EAsBVnP,EAAca,EAAdb,KAAM8F,EAAQjF,EAARiF,IAER1W,EACJ2L,EAAAC,EAAAC,cAAA,UAAQ7I,UAAWC,KAAOjD,QACxB2L,EAAAC,EAAAC,cAAA,MAAI7I,UAAWC,KAAO/C,OAAtB,cAAyC0Q,EAAK7P,SAA9C,eACA4K,EAAAC,EAAAC,cAAA,MAAI7I,UAAWC,KAAO9C,aAAcyQ,EAAK7P,SAAzC,6BA3Bcgf,EA2ByEnP,EAAK6E,UA3B7D,IAAItH,KAAK4R,GAAMC,eAAe,QAAS,CAC1EC,QAAS,OACTC,KAAM,UACNC,MAAO,OACPC,IAAK,UACLC,KAAM,UACNC,OAAQ,UACRC,OAAQ,cAqBJ5U,EAAAC,EAAAC,cAAA,MAAI7I,UAAWC,KAAO9C,aAAcyQ,EAAK7P,SAAzC,qBAAqE6P,EAAK4P,SAAShL,WAAnF,IAAgGkB,EAAIlB,WAApG,kCAIJ,OACE7J,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOhD,SACpBqE,GAAYtE,EACb2L,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO5C,SACrBsL,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO3C,MACrBqL,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOzC,OAAQoF,MAAO,CAAEiL,gBAAe,OAAA1K,OAASyK,EAAKE,UAAd,QACvDnF,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,wBAAL,IAA8B+E,EAAK2E,UAAUC,YAC7C7J,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO7C,aACrBuL,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAE,aAAAlE,OAAeyK,EAAK7P,WAA5B,WAAiD6P,EAAK7P,aAK5D4K,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO1C,OACpBoE,GAAa3E,EACd2L,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO7B,UAEvBuK,EAAAC,EAAAC,cAAC4U,GAAD,CAAarQ,MAAM,SAASnO,KAAM2O,EAAK/K,SACvC8F,EAAAC,EAAAC,cAAC4U,GAAD,CAAarQ,MAAM,WAAWnO,KAAM2O,EAAK4L,WACzC7Q,EAAAC,EAAAC,cAAC4U,GAAD,CAAarQ,MAAM,WAAWnO,KAAM2O,EAAKyK,MACzC1P,EAAAC,EAAAC,cAAC4U,GAAD,CAAarQ,MAAM,aAAanO,KAAM2O,EAAK0K,MAC3C3P,EAAAC,EAAAC,cAAC4U,GAAD,CAAarQ,MAAM,YAAYnO,KAAM2O,EAAK2K,YAC1C5P,EAAAC,EAAAC,cAAC4U,GAAD,CAAarQ,MAAM,oBAAoBnO,KAAM2O,EAAKwM,WAClDzR,EAAAC,EAAAC,cAAC4U,GAAD,CAAarQ,MAAM,uCAAuCnO,KAAM2O,EAAK4K,QACrE7P,EAAAC,EAAAC,cAAC4U,GAAD,CAAarQ,MAAM,kBAAkBnO,KAAM2O,EAAK6K,WAChD9P,EAAAC,EAAAC,cAAC4U,GAAD,CAAarQ,MAAM,kBAAkBnO,KAAM2O,EAAK8K,YAGhD/P,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOvC,aACpBkQ,EAAK2I,MAAM1O,OAAUc,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACpBH,EAAAC,EAAAC,cAAA,6BAAqB+E,EAAK7P,SAA1B,KACC6P,EAAK2I,MAAMjS,IAAI,SAAAzG,GAAI,OAClB8K,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOxC,cAAe0K,IAAKtK,EAAKqE,IAC9CyG,EAAAC,EAAAC,cAACkK,GAAD,CAAMlV,KAAMA,QAIhB8K,EAAAC,EAAAC,cAAA,oDAIJF,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOrC,MAAvB,cAAyCgQ,EAAK1L,+CCvKlDwb,GAAiB,wQAgCjBC,GAAkB,SACtBC,EADsBne,GAGnB,IADDgT,EACChT,EADDgT,UAAmB1U,EAClB0B,EADUmO,KAAQ7P,SAEf8f,EAAa,IAAI1S,KAAKsH,GAK5B,QAHKmL,EAAS3Z,IAAIlG,IAAc6f,EAASjT,IAAI5M,GAAY8f,IACvDD,EAASjS,IAAI5N,EAAU8f,GAElBD,GAGHE,GAAoB,SAACC,GACzB,IAAKA,EAAa,MAAO,GAEzB,IACMH,EADW,GAAAza,OAAAvD,OAAAwD,EAAA,EAAAxD,CAAOme,EAAYC,MAAnBpe,OAAAwD,EAAA,EAAAxD,CAA4Bme,EAAYE,WAC5B3V,OAAOqV,GAAiB,IAAIO,KAEnDC,EAASC,MAAMC,KAAKT,EAASU,WACnC,OAAOC,KAAQJ,EAAQ,CAAC,IAAIK,UAAUla,IAAI,SAAAma,GAAC,OAAIA,EAAE,MAGpC,SAASC,KAAY,IAAAtQ,EACEC,YAA4B,CAC9DC,MAAOoP,KAFyBlP,EAAA5O,OAAAyB,EAAA,EAAAzB,CAAAwO,EAAA,MACzBuB,EADyBnB,EACzBmB,MAAOjB,EADkBF,EAClBE,SAAUD,EADQD,EACRC,KAI1B,GAAIkB,EAAO,OAAOhH,EAAAC,EAAAC,cAACoI,GAAD,CAActB,MAAOA,IACvC,GAAIjB,EAAU,OAAO/F,EAAAC,EAAAC,cAACqI,GAAD,MACrB,IAAKzC,IAASA,EAAKsP,YAAa,OAAO,KAEvC,IAAMY,EAAeb,GAAkBrP,EAAKsP,aAG5C,OACEpV,EAAAC,EAAAC,cAAA,SAAO7I,UAAWC,KAAO2e,oBACvBjW,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO4e,WACpBF,EAAa9W,OACZ8W,EAAara,IAAI,SAAAvG,GAAQ,OACvB4K,EAAAC,EAAAC,cAAC/I,EAAA,SAAD,CAAUqI,IAAKpK,GACb4K,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAE,aAAAlE,OAAepF,IACrB4K,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO2N,MAAO7P,OAIlC4K,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO6e,YAAvB,gCC3EZ,IAAMC,GAAkB,4fAgClBC,GAAqB,wMAwDZ,SAASC,GAATxf,GAA4C,IAAnB1B,EAAmB0B,EAAnB1B,SAChCmhB,EAAgBld,iBAAY,MADuBd,EAEfC,mBAAiB,IAFFC,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAAsB,EAAA,GAElDie,EAFkD/d,EAAA,GAEnCge,EAFmChe,EAAA,GAAAgN,EAGjBC,YAA6B,CACnEC,MAAOyQ,GACPjM,UAAW,CAAE/U,SAAUA,GAAY,MALoBwQ,EAAA3O,OAAAyB,EAAA,EAAAzB,CAAAwO,EAAA,GAAAI,EAAAD,EAAA,GAGhDoB,EAHgDnB,EAGhDmB,MAAOlB,EAHyCD,EAGzCC,KAAQE,EAHiCJ,EAAA,GAAAK,EAUrDC,YAAsDmQ,IAVDlQ,EAAAlP,OAAAyB,EAAA,EAAAzB,CAAAgP,EAAA,GASvDyQ,GATuDvQ,EAAA,GAAAA,EAAA,IAYzDlN,EAAY,WACL+K,SAASuC,QACZP,EAAa,CAAEQ,cAAe,kBAE/B,KAEH,IAAMmQ,EAAW,CACf7Q,GACGA,EAAK8Q,eACL9Q,EAAK8Q,cAActB,UAAYxP,EAAK8Q,cAAcvB,MAClDvP,EAAK8Q,cAActB,SAASpW,OAAS4G,EAAK8Q,cAAcvB,KAAKnW,QAGlErG,oBAAU,WACJ0d,EAAcjd,UAChBid,EAAcjd,QAAQud,UAAYN,EAAcjd,QAAQwd,eAEzDH,GAeH,GAAI3P,EAAO,OAAOhH,EAAAC,EAAAC,cAACoI,GAAD,CAActB,MAAOA,IAEvC,IAAKlB,IAASA,EAAKvB,YAAa,OAAO,KAGvC,GAAIuB,EAAKvB,YAAYnP,WAAaA,EAAU,OAAO4K,EAAAC,EAAAC,cAACkP,GAAA,EAAD,CAAU1Q,GAAG,cAEhE,IAAMqY,EAAoBjR,EAAK8Q,cAAgB5B,GAAgBlP,EAAK8Q,eAAiB,GAC/EI,EAAeD,EAAkBpb,IAAI,SAAA4N,GAAO,OAChDvJ,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAOiS,QAAS/J,IAAK+J,EAAQhQ,IAC3CyG,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO2f,QACrBjX,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAE,UAAAlE,OAAY+O,EAAQmM,KAAKtgB,WAC/B4K,EAAAC,EAAAC,cAAA,cACGqJ,EAAQmM,KAAKtgB,WAGlB4K,EAAAC,EAAAC,cAAA,gBAAQqJ,EAAQO,UAAhB,MAEF9J,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO5C,SACrBsL,EAAAC,EAAAC,cAACN,GAAD,CAAYlL,QAAS6U,EAAQ7U,cAKnC,OACEsL,EAAAC,EAAAC,cAAA,WAAS7I,UAAWC,KAAO4f,eACvBpR,EAAK8Q,eAAN,GAAApc,OAA0BpF,EAA1B,sCACA0Q,EAAK8Q,eAAiB5W,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACrBH,EAAAC,EAAAC,cAAA,OAAKiX,IAAKZ,EAAelf,UAAWC,KAAO0f,cACxClR,EAAK8Q,gBAAkBG,EAAkB7X,OACtC8X,EADoB,QAAAxc,OAEZpF,EAFY,iBAM1B4K,EAAAC,EAAAC,cAAA,SACE7I,UAAWC,KAAO8f,QAClB1O,MAAO8N,EACP7N,SAAU,SAAA9F,GAAC,OAAI4T,EAAiB5T,EAAExE,OAAOqK,QACzC2O,WAAY,SAAAxU,GAlDC,UAkDgBA,EAAErD,KAlDLgX,IAC9BE,EAAqB,CACnBhgB,MAAO,CACLhC,QAAS8hB,EACTc,WAAYliB,GAAY,MAG5BqhB,EAAiB,MA4CbhO,YAAY,kCAQtB,IAAMuM,GAAkB,SAAC4B,GAAD,OAAwDhB,KAAO,GAAApb,OAAAvD,OAAAwD,EAAA,EAAAxD,CAClF2f,EAActB,UADoEre,OAAAwD,EAAA,EAAAxD,CAElF2f,EAAcvB,OAChB,cC3LGgB,GAAqB,wMAwCZ,SAASkB,KAAkB,IAAAhf,EACEC,mBAAiB,IADnBC,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAAsB,EAAA,GACjCie,EADiC/d,EAAA,GAClBge,EADkBhe,EAAA,GAAA+O,EAEVhP,mBAAiB,IAFPiP,EAAAxQ,OAAAyB,EAAA,EAAAzB,CAAAuQ,EAAA,GAEjCgQ,EAFiC/P,EAAA,GAExBgQ,EAFwBhQ,EAAA,GAAAxB,EAMpCC,YAAsDmQ,IANlBlQ,EAAAlP,OAAAyB,EAAA,EAAAzB,CAAAgP,EAAA,GAKtCyQ,GALsCvQ,EAAA,GAAAA,EAAA,IAQlC1R,EAAc,WACZ+hB,GAAmBgB,GACvBd,EAAqB,CACnBhgB,MAAO,CACLhC,QAAS8hB,EACTc,WAAYE,KAEbE,KAAK,WACN5f,OAAOsL,SAAShF,KAAhB,YAAA5D,OAAmCgd,MAWzC,OACExX,EAAAC,EAAAC,cAAA,WAAS7I,UAAWC,KAAO4f,cACzBlX,EAAAC,EAAAC,cAAA,oCAEEF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,SACE7I,UAAWC,KAAO8f,QAClB3O,YAAY,sBACZC,MAAO8O,EACP7O,SAAU,SAAA9F,GAAC,OAAI4U,EAAW5U,EAAExE,OAAOqK,UAErC1I,EAAAC,EAAAC,cAAA,YACE7I,UAAW2J,IAAG1J,KAAO8f,QAAS9f,KAAOqgB,eACrCjP,MAAO8N,EACP7N,SAAU,SAAA9F,GAAC,OAAI4T,EAAiB5T,EAAExE,OAAOqK,QACzCD,YAAY,qBACZwE,UAtBmB,SAACpK,GACV,KAAdA,EAAEqK,SAAkBrK,EAAEsK,SACxB1Y,QAuBEuL,EAAAC,EAAAC,cAAA,UAAQ7I,UAAWC,KAAOuR,aAAc/O,QAASrF,GAAjD,UC/ER,IAmEemjB,GA/CoB,SAAA9gB,GAAkB,IAAf1B,EAAe0B,EAAf1B,SAAe0P,EACnBzM,EAAc,KAAtCM,EAD2CmM,EAC3CnM,SAAUK,EADiC8L,EACjC9L,UADiCT,EAEfC,oBAA8B,GAFfC,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAAsB,EAAA,GAE5Csf,EAF4Cpf,EAAA,GAEhCqf,EAFgCrf,EAAA,GAAAgN,EAGfC,YAA2B,CAAEC,MAvB7C,6CAoB+BE,EAAA5O,OAAAyB,EAAA,EAAAzB,CAAAwO,EAAA,MAG1CK,EAH0CD,EAG1CC,KAAMkB,EAHoCnB,EAGpCmB,MAAOjB,EAH6BF,EAG7BE,SAEtB,OAAIiB,EAAchH,EAAAC,EAAAC,cAACoI,GAAD,CAActB,MAAOA,IACnCjB,EAAiB/F,EAAAC,EAAAC,cAACqI,GAAD,MAEjBzC,IAASA,EAAKvB,YACTvE,EAAAC,EAAAC,cAACkP,GAAA,EAAD,CAAU1Q,GAAG,YACXoH,GAAQA,EAAKvB,aAAeuB,EAAKvB,YAAYnP,WAAaA,EAC5D4K,EAAAC,EAAAC,cAACkP,GAAA,EAAD,CAAU1Q,GAAG,cAIpBsB,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO2d,UACrBjV,EAAAC,EAAAC,cAAA,UAAQ7I,UAAWC,KAAOjD,QACxB2L,EAAAC,EAAAC,cAAA,6BACCvH,IAAakf,GAAcziB,GACxB4K,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAG,YAAY5E,QAAS,kBAAMge,GAAc,KAAS,kBAC3D9X,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAG,YAAY5E,QAAS,kBAAMge,GAAc,KAAlD,gBAIN9X,EAAAC,EAAAC,cAAA,WAAS7I,UAAWC,KAAOygB,iBACxBpf,GACCqH,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO0gB,iBACpB5iB,GAAY4K,EAAAC,EAAAC,cAACoW,GAAD,CAAclhB,SAAUA,KACnCA,GAAYyiB,GAAc7X,EAAAC,EAAAC,cAACqX,GAAD,OAC1BniB,IAAayiB,GAAc7X,EAAAC,EAAAC,cAAC6V,GAAD,OAIhC/c,GACCgH,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO2gB,kBACrBjY,EAAAC,EAAAC,cAAC6V,GAAD,MAEC3gB,GAAY4K,EAAAC,EAAAC,cAACoW,GAAD,CAAclhB,SAAUA,KACnCA,GAAY4K,EAAAC,EAAAC,cAACqX,GAAD,kDCvBpBW,GAAa,SAAAphB,GAAoC,IAAjCkT,EAAiClT,EAAjCkT,OACdmO,EAAWnO,EAAO4D,MAAM,IAAM5D,EAAO4D,MAAM,GAAGjE,OAAOvU,SACrDqP,EAAQ7H,GACZoN,EAAOvF,MAAMvF,OAAS,IAClB8K,EAAOvF,MAAM2T,UAAU,EAAG,KAAO,MACjCpO,EAAOvF,OAGb,OACEtN,EAAA,yBAASqI,IAAKwK,EAAOzQ,GAAIlC,UAAWC,KAAOf,YACzCY,EAAA,cAACsH,EAAA,EAAD,CAAMpH,UAAWC,KAAOd,SAAUkI,GAAE,YAAAlE,OAAcwP,EAAOzQ,KAAOkL,GAChEtN,EAAA,qBAAKE,UAAWC,KAAOhB,MAAMa,EAAA,0CAA7B,IAAyDA,EAAA,8BAAQ6S,EAAOqO,eAAf,MACzDlhB,EAAA,qBAAKE,UAAWC,KAAOhB,MAAMa,EAAA,oCAC3BA,EAAA,cAACsH,EAAA,EAAD,CAAMC,GAAE,UAAAlE,OAAY2d,IAAaA,IAEnChhB,EAAA,qBAAKE,UAAWC,KAAOhB,MAAMa,EAAA,sCAA7B,IAAsD6S,EAAOJ,UAAUC,cAKvE4D,GAAkB,CAAC,GAgEV6K,GA9Dc,WAAM,IAAAxT,EACDzM,EAAc,KAAtCM,EADyBmM,EACzBnM,SAAUK,EADe8L,EACf9L,UADeyM,EAEGC,YAAsB,CAAEC,MA3D7C,kTAyDkBE,EAAA5O,OAAAyB,EAAA,EAAAzB,CAAAwO,EAAA,MAExBM,EAFwBF,EAExBE,SAAUiB,EAFcnB,EAEdmB,MAAOlB,EAFOD,EAEPC,KAFO6H,EAGJhD,GAAO,GAA5BI,EAHyB4C,EAGzB5C,IAAKmB,EAHoByB,EAGpBzB,YAePqM,EAA6CzS,GAAQA,EAAK0S,QAC5DC,KAAU3S,EAAK0S,QAAS,SAAAxO,GAAM,OAAIyD,GAAgBjE,SAASQ,EAAOzQ,MAClE,CAAC,GAAI,IAGT,OACEpC,EAAA,yBAASE,UAAWC,KAAOb,OACzBU,EAAA,yBAASE,UAAWC,KAAO3C,MACxBoR,GAAY5O,EAAA,cAACoR,GAAD,MACZvB,GAAS7P,EAAA,cAACmR,GAAD,CAActB,MAAOA,IAC9BlB,GACC3O,EAAA,cAAAA,EAAA,cACG2O,EAAKvB,aACJpN,EAAA,qBAAKE,UAAWC,KAAOjB,YACrBc,EAAA,4CAA8B,IAC9BA,EAAA,cAACsH,EAAA,EAAD,CAAMC,GAAG,aAAT,YAAqC,KACrCvH,EAAA,cAACsH,EAAA,EAAD,CAAMC,GAAG,YAAT,kBAA0C,KAC1CvH,EAAA,cAACsH,EAAA,EAAD,CAAMC,GAAG,UAAT,UAGJvH,EAAA,wBAAQE,UAAWC,KAAOjD,QACxB8C,EAAA,iCACAA,EAAA,cAACsH,EAAA,EAAD,CAAMC,GAAG,eAAerH,UAAWC,KAAOlB,aAA1C,oBAIFe,EAAA,qBAAK8C,MAAO,CAAEN,OAAQ,aAAc+e,QAAS,MAAOC,cAAe,EAAGC,aAAc,SAClFzhB,EAAA,cAAC0hB,GAAD,CAAY7O,OAAQuO,EAAY,GAAG,MAEpCA,EAAY,GAAGrZ,QAAUqZ,EAAY,GAAG5c,IAAI,SAACqO,EAAQzK,GAAT,OAC3CpI,EAAA,cAACA,EAAA,SAAD,CAAgBqI,IAAKwK,EAAOzQ,IA5CnB,SAACgG,GAEpB,IAAK5G,EAAU,OAAO,EACtB,IAAK4G,EAAI,GAFM,EAEO,OAAO,EAE7B,IAAM2O,IAAU3O,EAAI,GAJL,EAIoB,GAAKwL,EAAI7L,OAE5C,OACE/H,EAAA,qBAAKE,UAAWC,KAAOrB,aACrBkB,EAAA,cAACgX,GAAD,CAAapD,IAAK,CAACA,EAAImD,IAAQnI,SAAUmG,KAoChCkC,CAAa7O,GACdpI,EAAA,cAAC0hB,GAAD,CAAY7O,OAAQA,SAM7BhR,GAAa7B,EAAA,cAACgX,GAAD,CAAapD,IAAKA,EAAKhF,SAAUmG,0BCrH/C4M,GAAU,mHAyFDC,OAjEf,WAAiB,IAAAtT,EACqBC,YAAqB,CAAEC,MAAOmT,KADnDjT,EAAA5O,OAAAyB,EAAA,EAAAzB,CAAAwO,EAAA,MACNuB,EADMnB,EACNmB,MAAOjB,EADDF,EACCE,SAAUD,EADXD,EACWC,KAE1B,OAAIkB,EAEKhH,EAAAC,EAAAC,cAACoI,GAAD,CAActB,MAAOA,IAE1BjB,EAAiB/F,EAAAC,EAAAC,cAACqI,GAAD,MAChBzC,EAGH9F,EAAAC,EAAAC,cAAA,WAAS7I,UAAWC,KAAO0hB,OACzBhZ,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO2hB,kBACrBjZ,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO4hB,aACrBlZ,EAAAC,EAAAC,cAAA,0BACAF,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAAA,qBAGJF,EAAAC,EAAAC,cAAA,aACG4F,EAAKqT,cAAcxd,IAAI,SAACyd,EAAM7Z,GAAP,OACtBS,EAAAC,EAAAC,cAAA,MAAIV,IAAKD,GACPS,EAAAC,EAAAC,cAAA,UAAKX,EAAI,EAAT,KACAS,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAE,UAAAlE,OAAY4e,EAAKhkB,WAAagkB,EAAKhkB,WAE7C4K,EAAAC,EAAAC,cAAA,UAAKkZ,EAAKC,iBAMpBrZ,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO4hB,aACrBlZ,EAAAC,EAAAC,cAAA,4CACAF,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAAA,2BAGJF,EAAAC,EAAAC,cAAA,aACG4F,EAAKwT,iBAAiB3d,IAAI,SAACyd,EAAM7Z,GAAP,OACzBS,EAAAC,EAAAC,cAAA,MAAIV,IAAKD,GACPS,EAAAC,EAAAC,cAAA,UAAKX,EAAI,EAAT,KACAS,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAE,UAAAlE,OAAY4e,EAAKhkB,WAAagkB,EAAKhkB,WAE7C4K,EAAAC,EAAAC,cAAA,UAAKkZ,EAAKvE,kBA9CR,0BCtBL0E,OAdf,WACE,OACEvZ,EAAAC,EAAAC,cAAA,WAAS7I,UAAWC,KAAOkiB,YACzBxZ,EAAAC,EAAAC,cAAA,OAAK7I,UAAWC,KAAO+Q,MACrBrI,EAAAC,EAAAC,cAAA,qCACAF,EAAAC,EAAAC,cAAA,yGACAF,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAG,YAAT,qCACAsB,EAAAC,EAAAC,cAAA,sEACAF,EAAAC,EAAAC,cAACzB,EAAA,EAAD,CAAMC,GAAG,KAAT,oCCNFgM,GAAO,gLAuCE+O,OAtBf,WAAkB,IAAAhU,EACoBC,YAAS,CAAEC,MAAO+E,KADtC7E,EAAA5O,OAAAyB,EAAA,EAAAzB,CAAAwO,EAAA,MAE4B,OAF5BI,EACPC,KADOD,EACDE,SADCF,EACSmB,MAC0B,OCL/C0S,8LACeC,GACb9F,KAAK7c,MAAMoM,WAAauW,EAAUvW,UACpCtL,OAAO8hB,SAAS,EAAG,oCAKrB,OACEziB,EAAA,sBAAME,UAAU,OACdF,EAAA,cAAC0iB,EAAA,EAAD,CAAOC,KAAK,IAAIC,UAAWzU,KAE3BnO,EAAA,cAAC6iB,EAAD,KACE7iB,EAAA,cAAC8iB,EAAA,EAAD,KACE9iB,EAAA,cAAC0iB,EAAA,EAAD,CAAOK,OAAK,EAACJ,KAAK,IAAIC,UAAWzB,KACjCnhB,EAAA,cAAC0iB,EAAA,EAAD,CAAOK,OAAK,EAACJ,KAAK,eAAeC,UAAWzL,KAE5CnX,EAAA,cAAC0iB,EAAA,EAAD,CAAOK,OAAK,EAACJ,KAAK,eAAeK,OAAQ,SAAArjB,GAAA,IAAGqE,EAAHrE,EAAGqE,MAAH,OACvChE,EAAA,cAACijB,GAAD,CAAS7gB,GAAI8gB,OAAOlf,EAAMmf,OAAO/gB,SAGnCpC,EAAA,cAAC0iB,EAAA,EAAD,CAAOK,OAAK,EAACJ,KAAK,YAAYK,OAAQ,SAAA1iB,KAAG0D,MAAH,OACpChE,EAAA,cAACojB,GAAD,SAGFpjB,EAAA,cAAC0iB,EAAA,EAAD,CAAOC,KAAK,sBAAsBK,OAAQ,SAAAtZ,GAAA,IAAG1F,EAAH0F,EAAG1F,MAAH,OACxChE,EAAA,cAACojB,GAAD,CAAUnlB,SAAU+F,EAAMmf,OAAOllB,cAInC+B,EAAA,cAAC0iB,EAAA,EAAD,CAAOC,KAAK,aAAaK,OAAQ,SAAAK,GAAA,IAAGrf,EAAHqf,EAAGrf,MAAH,OAC/BhE,EAAA,cAACsjB,GAAD,CAAOlhB,GAAI8gB,OAAOlf,EAAMmf,OAAO/gB,SAGjCpC,EAAA,cAAC0iB,EAAA,EAAD,CAAOC,KAAK,mBAAmBK,OAAQ,SAAAO,GAAA,IAAGvf,EAAHuf,EAAGvf,MAAH,OACrChE,EAAA,cAACwjB,GAAD,CAAMvlB,SAAU+F,EAAMmf,OAAOllB,cAG/B+B,EAAA,cAAC0iB,EAAA,EAAD,CAAOK,OAAK,EAACJ,KAAK,SAASC,UAAWzS,KACtCnQ,EAAA,cAAC0iB,EAAA,EAAD,CAAOK,OAAK,EAACJ,KAAK,UAAUC,UAAW/Q,KACvC7R,EAAA,cAAC0iB,EAAA,EAAD,CAAOK,OAAK,EAACJ,KAAK,WAAWC,UAAW/K,KACxC7X,EAAA,cAAC0iB,EAAA,EAAD,CAAOK,OAAK,EAACJ,KAAK,SAASC,UAAWhB,KACtC5hB,EAAA,cAAC0iB,EAAA,EAAD,CAAOK,OAAK,EAACJ,KAAK,cAAcC,UAAWR,KAC3CpiB,EAAA,cAAC0iB,EAAA,EAAD,CAAOK,OAAK,EAACJ,KAAK,WAAWC,UAAYN,OAK7CtiB,EAAA,wBAAQ8C,MAAO,CAAE2gB,SAAU,OAAQlC,QAAS,WAC1CvhB,EAAA,cAACQ,EAAD,6CAjDQkjB,aA2DHC,eAAWpB,ICxE1B3X,GAAIM,mBAEJ,IACM0Y,GAASC,YAAa,CAC1Bxe,IACI,0CAEJye,aAAc,WACZ,IAAM7S,EAAWrG,GAAIC,MACrB,OAAIoG,EACK,CACL8S,QAAS,CACPC,cAAa,UAAA3gB,OAAY4N,GACzBgT,cAAerZ,GAAID,oBAAsB,KAItC,CACLoZ,QAAS,CACPE,cAAerZ,GAAID,oBAAsB,QAO7CuZ,IAAQ,IAAI7Y,MAAO8Y,YACrBD,GAAQ,GAAKA,IAAS,MAAIrX,SAAStM,KAAKL,UAAY,aAExDkkB,IAASpB,OAELna,EAAAC,EAAAC,cAACsb,EAAA,EAAD,CAAU9S,MAAOqS,IACf/a,EAAAC,EAAAC,cAACub,EAAA,EAAD,KACEzb,EAAAC,EAAAC,cAACwb,GAAD,QAIN1X,SAASC,eAAe,6BC5C1B9P,EAAAC,QAAA,CAAkByB,OAAA,uBAAAwS,KAAA,qBAAAoB,OAAA,uBAAAZ,aAAA,kDCAlB1U,EAAAC,QAAA,CAAkBqS,UAAA,0BAAAsG,MAAA,sBAAAC,aAAA,6BAAAnE,aAAA,kDCAlB1U,EAAAC,QAAA,CAAkB4kB,MAAA,sBAAAE,YAAA,4BAAAD,iBAAA,qDCAlB9kB,EAAAC,QAAA,CAAkBC,OAAA,uBAAAG,YAAA,4BAAAE,QAAA,wBAAAC,KAAA,qBAAAC,MAAA,sBAAAC,OAAA,uBAAAme,UAAA,0BAAAle,cAAA,8BAAAC,YAAA,4BAAAgf,aAAA,6BAAA/G,aAAA,6BAAAnE,aAAA,6BAAAvU,QAAA,wBAAAwf,gBAAA,qDCAlB3f,EAAAC,QAAA,CAAkB+T,MAAA,sBAAAE,KAAA,qBAAAQ,aAAA,kDCAlB1U,EAAAC,QAAA,CAAkB6B,YAAA,4BAAAW,MAAA,sBAAAyV,UAAA,8CCAlBlY,EAAAC,QAAA,CAAkBqS,UAAA,0BAAA/R,QAAA,wBAAA+P,MAAA,sBAAAC,MAAA,sBAAApE,KAAA,qBAAA2E,KAAA,qBAAAhE,OAAA,uBAAArK,MAAA,sBAAAmK,OAAA,uBAAAI,QAAA,wBAAAwa,OAAA,uBAAAva,QAAA,wBAAAC,QAAA,wBAAAua,OAAA,uBAAAta,QAAA,wBAAAua,QAAA,wBAAAlV,iBAAA,iCAAA5C,SAAA,yBAAA3D,MAAA,sBAAAK,cAAA,8BAAAE,SAAA,yBAAA6C,aAAA,6BAAAC,eAAA,oDCAlBtP,EAAAC,QAAA,CAAkBmD,MAAA,sBAAAG,KAAA,0CCAlBvD,EAAAC,QAAA,CAAkB2B,KAAA,0CCAlB5B,EAAAC,QAAA,CAAkB8B,GAAA,wCCAlB/B,EAAAC,QAAA,CAAkBolB,WAAA,2BAAAnR,KAAA,yCCAlBlU,EAAAC,QAAA,CAAkBC,OAAA,uBAAA0jB,gBAAA,gCAAAC,gBAAA,gCAAAC,iBAAA,iCAAAf,aAAA,6BAAAF,aAAA,6BAAAW,cAAA,8BAAAP,QAAA,wBAAAvO,aAAA,6BAAAU,QAAA,wBAAA0N,OAAA,uBAAAhB,mBAAA,mCAAAE,WAAA,2BAAAD,UAAA,0BAAAjR,KAAA,0CCAlB9Q,EAAAC,QAAA,CAAkB4F,EAAA,uCCAlB7F,EAAAC,QAAA,CAAkBsI,IAAA,yCCAlBvI,EAAAC,QAAA,CAAkB4S,MAAA","file":"static/js/main.867a9d33.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"styles_header__2wLxh\",\"profile\":\"styles_profile__31rzl\",\"intro\":\"styles_intro__1X3Y3\",\"memberSince\":\"styles_memberSince__1jhAK\",\"sendMessage\":\"styles_sendMessage__3284j\",\"content\":\"styles_content__1_9jW\",\"left\":\"styles_left__vhBr7\",\"right\":\"styles_right__1-xIl\",\"avatar\":\"styles_avatar__1sUtC\",\"postContainer\":\"styles_postContainer__35feo\",\"recentPosts\":\"styles_recentPosts__1aAFm\",\"infoSection\":\"styles_infoSection__2k3k7\",\"uuid\":\"styles_uuid__36WGZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"post\":\"styles_post__2wjTj\",\"avatar\":\"styles_avatar__2GJc8\",\"header\":\"styles_header__19BhD\",\"threadLink\":\"styles_threadLink__3x7tb\",\"username\":\"styles_username__2fJ1r\",\"totalPosts\":\"styles_totalPosts__1YOIB\",\"main\":\"styles_main__TKFmC\",\"panel\":\"styles_panel__3ULdb\",\"panelContainer\":\"styles_panelContainer__2nRTc\",\"userInfo\":\"styles_userInfo__3SK-L\",\"content\":\"styles_content__2Ru5-\",\"footer\":\"styles_footer__dMb2p\",\"postedAt\":\"styles_postedAt__9cLJi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"threadTitle\":\"styles_threadTitle__nzF4M\",\"signup\":\"styles_signup__2AxnY\",\"disabled\":\"styles_disabled__1TmJj\",\"left\":\"styles_left__1P-Yx\",\"back\":\"styles_back__2jFxT\",\"threadLink\":\"styles_threadLink__1hkCr\",\"addPost\":\"styles_addPost__1-izz\",\"adContainer\":\"styles_adContainer__2ZcDv\",\"ad\":\"styles_ad__36g-4\",\"threadContainer\":\"styles_threadContainer__22gH-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"styles_header__VUeZN\",\"startThread\":\"styles_startThread__2DdKA\",\"quickLinks\":\"styles_quickLinks__cJQge\",\"info\":\"styles_info__2f1QB\",\"threadPost\":\"styles_threadPost__3SWHg\",\"postLink\":\"styles_postLink__2yHjb\",\"forum\":\"styles_forum__AVThT\",\"adContainer\":\"styles_adContainer__3zUCc\",\"left\":\"styles_left__2_RIC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"back\":\"styles_back__3iTuS\",\"input\":\"styles_input__rHUWj\",\"sectionTitle\":\"styles_sectionTitle__2wqKD\",\"label\":\"styles_label___0hEN\",\"signup\":\"styles_signup__34diQ\",\"disabled\":\"styles_disabled__3WJTC\"};","import * as React from 'react';\nimport styles from './styles.module.css';\n\ninterface Props {\n  children: any,\n  [prop: string]: any\n}\n\nexport const Width: React.SFC<Props> = ({ children, ...props }) => (\n  <div className={styles.width} {...props}>\n    {children}\n  </div>\n)\n\nconst Body: React.SFC<Props> = ({ children }) => (\n  <div className={styles.body}>\n    <Width>{children}</Width>\n  </div>\n)\n\nexport default Body\n\n","import { useState, useEffect } from 'react'\n\ntype WindowSize = {\n  innerHeight: number\n  innerWidth: number\n}\n\nconst getSize = (): WindowSize => ({\n  innerHeight: window.innerHeight,\n  innerWidth: window.innerWidth,\n})\n\ntype AnyFn = (a: any) => any\nconst setEventListener = (event: string, handler: AnyFn) => () => {\n  window.addEventListener(event, handler)\n  return () => window.removeEventListener(event, handler)\n}\n\n\nexport default function useResponsive(mobileWidth: number) {\n  const [isMobile, setIsMobile] = useState<boolean>(getSize().innerWidth <= mobileWidth)\n\n  useEffect(setEventListener('resize', () => {\n    const wasMobile = isMobile\n    const isNowMobile = getSize().innerWidth <= mobileWidth\n    if (wasMobile !== isNowMobile) {\n      setIsMobile(isNowMobile)\n    }\n  }))\n\n  return {\n    isMobile,\n    isDesktop: !isMobile\n  }\n}\n","import { useRef, useEffect } from 'react';\n\nexport default function useInterval(callback: Function, delay: number) {\n  const savedCallback = useRef<any>(null)\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n","import * as React from 'react';\nimport styles from './styles.module.scss';\n\ntype XProps = {\n  onClick?: any,\n  ring?: boolean\n}\n\nconst ringStyles = { border: '1px solid', borderRadius: '100%' }\nconst X: React.SFC<XProps> = ({ onClick, ring }) => (\n  <span\n    className={styles.x}\n    style={ring ? ringStyles : {}}\n    onClick={onClick}\n  >\n    x\n  </span>\n)\n\nexport default X\n","export const fastcash = [\n  \"fastcash\",\n  \"fastcashmoneyplus\",\n  \"fastcashmoneyplusbiz\",\n  \"fastcashmoneybiz\",\n  \"moneybucks\",\n  \"bucks\",\n  \"fast\",\n  \"cash\",\n  \"money\",\n  \"rich\",\n  \"wealth\",\n  \"saving\",\n  \"savings\",\n  \"crypto\",\n  \"cryptocurrency\",\n  \"bitcoin\",\n  \"btc\",\n  \"ethereum\",\n  \"eth\",\n  \"invest\",\n  \"investing\",\n  \"finance\",\n  \"ico\",\n  \"fortune\",\n  \"millionaire\",\n  \"billionaire\",\n  \"blockchain\",\n  \"economy\",\n  \"payment\",\n  \"trick\",\n  \"profit\",\n]\n\nexport const woo = [\n  \"woo\",\n  \"spirit\",\n  \"spirituality\",\n  \"god\",\n  \"chakra\",\n  \"chakras\",\n  \"sound\",\n  \"meditation\",\n  \"reality\",\n  \"dream\",\n  \"dreams\",\n  \"hypnosis\",\n  \"mantra\",\n  \"mantras\",\n  \"technique\",\n  \"energy\",\n  \"karma\",\n  \"cleanse\",\n  \"vegan\",\n  \"ascend\",\n  \"ascension\",\n  \"newage\",\n]\n\nexport const mentalHealth = [\n  \"sad\",\n  \"depressed\",\n  \"melencholy\",\n  \"anxious\",\n  \"anxiety\",\n  \"depression\",\n  \"anhedonia\",\n  \"motivation\",\n  \"happy\",\n  \"mental\",\n  \"brain\",\n  \"suicide\",\n  \"suicidal\",\n  \"ocd\",\n  \"obsessed\",\n  \"scared\",\n  \"fear\",\n  \"emptiness\",\n  \"cbd\",\n  \"antidepressant\"\n]\n\nexport const politics = [\n  \"politics\",\n  \"political\",\n  \"government\",\n  \"taxes\",\n  \"democrats\",\n  \"republicans\",\n  \"gop\",\n  \"liberal\",\n  \"liberals\",\n  \"conservative\",\n  \"conservatives\",\n  \"libtards\",\n  \"cucks\",\n  \"cuck\",\n  \"trump\",\n  \"clinton\",\n  \"jews\",\n  \"rockefellers\",\n  \"jfk\",\n  \"fascism\",\n  \"fascist\",\n  \"socialist\",\n  \"socialism\",\n  \"abortion\",\n  \"guns\",\n  \"shillary\",\n  \"sjw\",\n  \"sjws\",\n  \"social\",\n  \"justice\",\n  \"warriors\",\n  \"global\",\n  \"china\",\n  \"russia\",\n  \"fakebullshit\",\n  \"fakebullshitnews\",\n]\n\nexport const conspiracy = [\n  \"ti\",\n  \"targeted\",\n  \"target\",\n  \"tracking\",\n  \"conspiracy\",\n  \"nuclear\",\n  \"drone\",\n  \"5g\",\n  \"radiation\",\n  \"alien\",\n  \"aliens\",\n  \"ufo\",\n  \"ufos\",\n  \"roswell\",\n  \"brain\",\n  \"mind-control\",\n  \"chemtrails\",\n  \"tracking\",\n\n]\n\nexport const general = [\n  \"achieve\",\n  \"love\",\n  \"sex\",\n  \"greed\",\n  \"power\",\n  \"pizza\",\n  \"hammers\",\n  \"soap\",\n  \"puppies\",\n  \"cats\",\n  \"friendworld\",\n  \"friendworldsocial\",\n  \"trains\",\n  \"subway\",\n  \"food\",\n  \"candy\",\n  \"family\"\n\n]\n\nexport const gender = {\n  male: [\n    'man',\n    'male',\n    'm',\n    'boy',\n    'guy',\n    'b',\n    'dude',\n    'bro',\n    'penis',\n    'dick',\n    'cock',\n  ],\n  female: [\n    'woman',\n    'female',\n    'f',\n    'girl',\n    'g',\n    'gal',\n    'broad',\n    'bitch',\n    'vagina'\n  ],\n  other: [\n    'transgender',\n    'transexual',\n    'trans',\n    't',\n    'transmasculine',\n    'transfeminine',\n    'intergender',\n    'agender',\n    'androgynous'\n  ]\n}\n\nconst imFuckingLazy = [\"fastcash\",\"fastcashmoneyplus\",\"fastcashmoneyplusbiz\",\"fastcashmoneybiz\",\"moneybucks\",\"bucks\",\"fast\",\"cash\",\"money\",\"rich\",\"wealth\",\"saving\",\"savings\",\"crypto\",\"cryptocurrency\",\"bitcoin\",\"btc\",\"ethereum\",\"eth\",\"invest\",\"investing\",\"finance\",\"ico\",\"fortune\",\"millionaire\",\"billionaire\",\"blockchain\",\"economy\",\"payment\",\"trick\",\"profit\",\"throwing\",\"economic\",\"explosion\",\"market\",\"comfort\",\"home\",\"house\",\"apartment\",\"success\",\"food\",\"taste\",\"suit\",\"dream\",\"dreams\",\"sleep\",\"pillow\",\"weird\",\"family\",\"vortex\",\"hillary\",\"clinton\",\"politics\",\"political\",\"government\",\"democrats\",\"republicans\",\"gop\",\"liberal\",\"liberals\",\"conservative\",\"conservatives\",\"libtards\",\"cucks\",\"cuck\",\"socialist\",\"socialism\",\"shillary\",\"sjw\",\"sjws\",\"social\",\"justice\",\"warriors\",\"science\",\"chemicals\",\"chemtrails\",\"target\",\"targeted\",\"targeting\",\"woo\",\"cleanse\",\"spirit\",\"mental\",\"spirituality\",\"god\",\"chakra\",\"chakras\",\"sound\",\"meditation\",\"reality\",\"hypnosis\",\"mantra\",\"mantras\",\"technique\",\"energy\",\"karma\",\"vegan\",\"ascend\",\"ascension\",\"newage\",\"consciousness\",\"ti\",\"individual\",\"tracking\",\"conspiracy\",\"nuclear\",\"drone\",\"5g\",\"radiation\",\"alien\",\"aliens\",\"ufo\",\"ufos\",\"roswell\",\"brain\",\"mind-control\",\"sad\",\"depressed\",\"melencholy\",\"anxious\",\"anxiety\",\"depression\",\"anhedonia\",\"motivation\",\"happy\",\"suicide\",\"suicidal\",\"ocd\",\"obsessed\",\"scared\",\"fear\",\"emptiness\",\"cbd\",\"antidepressant\",\"addicted\",\"addicting\",\"addiction\",\"internet\",\"evacuate\",\"planet\",\"wrong\",\"psychology\",\"remember\",\"forget\",\"forgetting\",\"foot\",\"death\",\"toenail\",\"nail\",\"fungus\",\"feet\",\"elderly\",\"back\",\"pain\",\"organ\",\"organs\",\"accupuncture\",\"intestine\",\"liver\",\"heart\",\"male\",\"man\",\"testosterone\",\"hair\",\"loss\",\"bald\",\"balding\",\"woman\",\"female\",\"fat\",\"skinny\",\"pepper\",\"hot\",\"furnace\",\"drip\",\"cancer\",\"stop\",\"dead\",\"blood\",\"cells\",\"add\",\"indigo\",\"child\",\"children\",\"special\",\"collective\",\"illuminati\",\"holocaust\",\"internet-of-things\",\"iot\",\"vr\",\"virtual\",\"individuality\",\"jew\",\"jews\",\"jewish\",\"semetic\",\"subliminal\",\"astral\",\"projection\",\"light\",\"healing\",\"luck\",\"clover\",\"horseshoe\",\"sexy\",\"binaural\",\"beats\",\"music\",\"sperm\",\"seamen\",\"sex\",\"digital\",\"hologram\",\"simulation\",\"illusion\",\"numbers\",\"numeric\",\"dna\",\"information\",\"funny\",\"laugh\",\"laughing\",\"lol\",\"haha\",\"kitty\",\"kitten\",\"cat\",\"meow\",\"virus\",\"infected\",\"pleiadians\",\"space\",\"physics\",\"bunker\",\"atlas\",\"nuke\",\"war\",\"disaster\",\"apocalypse\",\"bomb\",\"survival\",\"shelter\",\"girl\",\"doctor\",\"bowels\",\"shit\",\"poop\",\"constipated\",\"octopus\",\"puzzle\",\"stimulation\",\"electrode\",\"dbs\",\"deep\",\"therapy\",\"scanners\",\"scanner\",\"tracker\",\"beauty\",\"ugly\",\"surgery\",\"plastic\",\"constipation\",\"constipate\",\"poo\",\"darpa\",\"mind\",\"control\",\"pot\",\"weed\",\"drugs\",\"marijuana\",\"seduction\",\"dating\",\"romance\",\"singles\",\"chess\",\"666\",\"2016\",\"freemasonry\",\"universal\",\"emperor\",\"42\",\"miracle\",\"hell\",\"genesis\",\"bread\",\"jesus\",\"christianity\",\"sandwich\",\"bible\",\"safe\",\"safety\",\"spyware\",\"malware\",\"security\",\"towers\",\"smartphone\",\"weaponized\",\"thoughts\",\"cognitive\",\"knowledge\",\"processing\",\"radio\",\"transmission\",\"nsa\",\"microwave\",\"frequency\",\"nwo\",\"new\",\"world\",\"order\",\"state\",\"corruption\",\"x-ray\",\"skull\",\"dopamine\",\"driving\",\"muscle\",\"work\",\"hate\",\"emf\",\"electromagnetic\",\"relationship\",\"cocreate\",\"relationships\",\"electo\",\"magnetic\",\"intuition\",\"soul\",\"dreaming\",\"lucid\",\"suffering\",\"jewelry\",\"electric\",\"buddha\",\"moon\",\"christ\",\"blessing\",\"buddhism\",\"harmony\",\"harmonics\",\"spiritual\",\"unarius\",\"venus\",\"mars\",\"water\",\"hydrogen\",\"ion\",\"acidic\",\"alkaline\",\"radicals\",\"health\",\"h20\",\"infinity\",\"oasis\",\"ph\",\"teeth\",\"tooth\",\"dental\",\"dentist\",\"implants\",\"implant\",\"cavity\",\"mouth\",\"gums\",\"dentures\",\"weight\",\"quantum\",\"motivaitonal\",\"phobia\"]\n\nexport default new Set([\n  ...fastcash,\n  ...woo,\n  ...mentalHealth,\n  ...politics,\n  ...general,\n  ...conspiracy,\n  ...gender.male,\n  ...gender.female,\n  ...gender.other,\n  ...imFuckingLazy,\n])\n","import keywords, { gender } from './keywords'\nimport intersection from 'lodash/intersection'\n\nconst externalLinkTest = /^(http|https):\\/\\/.+\\..+/\nconst imageTest = /(\\.jpg$)|(\\.jpeg$)|(\\.png$)|(\\.gif$)|(\\.svg$)/\nconst userTest = /^@.+/\nconst hashtagTest = /^#.+/\nconst postTest = /^\\/posts\\/.+/\nconst threadTest = /^\\/threads\\/.+/\n\nexport function isImage(str: string) {\n  str = cleanFragment(str)\n  return str.match(imageTest) && str.match(externalLinkTest)\n}\n\nexport function isExternalLink(str: string) {\n  str = cleanFragment(str)\n  return str.match(externalLinkTest)\n}\n\nexport function isUsername(str: string) {\n  str = cleanFragment(str)\n  return str.match(userTest);\n}\n\nexport function isHashtag(str: string) {\n  str = cleanFragment(str)\n  return str.match(hashtagTest)\n}\n\nexport function isPostRef(str: string) {\n  str = cleanFragment(str)\n  return str.match(postTest)\n}\n\nexport function isThreadRef(str: string) {\n  str = cleanFragment(str)\n  return str.match(threadTest)\n}\n\nexport function isKeyword(str: string) {\n  return keywords.has(cleanFragment(str.toLowerCase()))\n}\n\nexport function hasNewline(str: string) {\n  return str.match('\\n')\n}\n\nexport function getUsernames(str: string) {\n  return str\n    .split(' ')\n    .filter(isUsername)\n    .map(f => cleanFragment(f, /^@/))\n}\n\nexport function getHastags(str: string) {\n  return str\n    .split(' ')\n    .filter(isHashtag)\n    .map(f => cleanFragment(f, /^#/).toLowerCase())\n}\n\nexport function getKeywords(str: string) {\n  return str\n    .split(' ')\n    .map(f => cleanFragment(f).toLowerCase())\n    .filter(isKeyword)\n}\n\nexport function getGender(str: string) {\n  const genderWords = str\n    .split(' ')\n    .map(f => cleanFragment(f).toLowerCase())\n\n  if (intersection(genderWords, gender.male).length) return 'male'\n  else if (intersection(genderWords, gender.female).length) return 'female'\n  else return 'other'\n}\n\n\nexport function getTags(content: string) {\n  return {\n    tags: JSON.stringify(getHastags(content).concat(getKeywords(content))),\n    usernames: JSON.stringify(getUsernames(content))\n  }\n}\n\nexport function cleanFragment(fragment: string, test?: RegExp) {\n  return fragment\n    .replace(test ? new RegExp(test, 'g') : '', '')\n    .replace(/(\\.|\\?|!|:|;|,|'|\")+$/, '')\n}\n\n","import * as React from 'react'\nimport styles from './styles.module.scss'\n\ntype Props = {\n  url: string,\n  alt: string,\n  [props: string]: unknown\n}\nexport default function Img({ url, alt, ...props }: Props) {\n  return <img className={styles.img} src={url} alt={alt} {...props} />\n}\n","\nimport each from 'lodash/each'\n\nexport default function profanityFilter (input: string): string {\n  const swap: any = {\n    motherfucker: 'm0therf_cker',\n    fuck: 'f_ck',\n\n    shit: 'poo',\n    ' dick ': 'penis',\n    bitch: 'b!tch',\n\n    cunt: 'c%nt',\n    cocksuck: 'c*cks^ck',\n    cock: 'c*ck',\n\n    nigger: 'african-american',\n    nigga: 'pal',\n\n    ' fag ': 'homosexual',\n    faggot: 'homosexual',\n\n    tranny: 'transexual',\n    ' god ': 'g-d',\n    goddamn: 'goshdarn',\n\n    pussy: 'p#ssy'\n  }\n\n  each(swap, (replaceTo, replaceFrom) => {\n    input = input.replace(replaceFrom, replaceTo)\n  })\n\n\n  return input\n}\n","import * as React from 'react'\nimport { Link } from 'react-router-dom'\nimport {\n  isExternalLink,\n  isImage,\n  isHashtag,\n  isUsername,\n  isPostRef,\n  isThreadRef,\n  // hasNewline,\n  cleanFragment,\n} from 'utils/parsers'\nimport Img from './Img'\nimport profanityFilter from 'utils/profanityFilter'\n\n\ntype Fragment = string | React.ReactNode;\n\nconst last = (arr: Array<Fragment>): Fragment => arr[arr.length - 1]\n\nconst imgStyle = {\n  maxHeight: 300,\n}\nconst parseFragment = (fragment: string): Fragment => {\n  if (isImage(fragment)) {\n    return <Img url={fragment} style={imgStyle} alt=\"user posted content\"/>\n\n  } else if (isExternalLink(fragment)) {\n    return <a href={cleanFragment(fragment)} target=\"_blank\" rel=\"noopener noreferrer\">{fragment}</a>\n\n  } else if (isUsername(fragment)) {\n    const userId = cleanFragment(fragment, /^@/)\n    const dirt = fragment.replace(userId, '').replace(/^@/, '')\n    return <><Link to={`/users/${userId}`}>@{profanityFilter(userId)}</Link>{dirt}</>\n\n  } else if (isHashtag(fragment)) {\n    const hashtag = cleanFragment(fragment, /^#/)\n    const dirt = fragment.replace(hashtag, '').replace(/^#/, '')\n    return <><Link to={`/hashtag/${hashtag.toLowerCase()}`}>#{profanityFilter(hashtag)}</Link>{dirt}</>\n\n  } else if (isPostRef(fragment)) {\n    const postId = cleanFragment(fragment, /^\\/posts\\//)\n    const dirt = fragment.replace(postId, '').replace(/^\\/posts\\//, '')\n    return <><Link to={`/posts/${postId}`}>/posts/{postId}</Link>{dirt}</>\n\n  } else if (isThreadRef(fragment)) {\n    const threadId = cleanFragment(fragment, /^\\/threads\\//)\n    const dirt = fragment.replace(threadId, '').replace(/^\\/threads\\//, '')\n    return <><Link to={`/threads/${threadId}`}>/threads/{threadId}</Link>{dirt}</>\n\n  } else {\n    return profanityFilter(fragment)\n  }\n}\n\n\nconst combineFragments = (fragments: Array<Fragment>, fragment: Fragment): Array<Fragment> => {\n  if (!fragments.length) {\n    return [fragment]\n  }\n\n  const lastFragment = last(fragments)\n\n  if (typeof lastFragment === 'string' && typeof fragment === 'string') {\n    return [...fragments.slice(0, -1), lastFragment + ' ' + fragment]\n\n  } else if (typeof lastFragment === 'string') {\n    return [...fragments.slice(0, -1), lastFragment + ' ', fragment]\n\n  } else {\n    return [...fragments, ' ', fragment]\n  }\n}\n\nconst addIndex = (f: React.ReactNode, i: number) => (\n  <React.Fragment key={i}>\n    {f}\n  </React.Fragment>\n)\n\nconst parser = (content: string) => content\n  .split('\\n')\n  .map((paragraph, i) => (\n    <p key={i}>\n      {paragraph\n        .split(' ')\n        .map(parseFragment)\n        .reduce(combineFragments, [])\n        .map(addIndex)\n      }\n    </p>\n  ))\n\ntype Props = { content: string };\n\nexport default function ParsedText({ content }: Props) {\n  return (\n    <>\n      {parser(content)}\n    </>\n  )\n}\n","import React  from 'react'\nimport { Link } from 'react-router-dom'\nimport cx from 'classnames'\n\nimport X from 'components/X'\nimport ParsedText from 'components/ParsedText'\nimport styles from './styles.module.scss'\nimport { CurrentUser } from './index'\n\ntype AlertDropdownProps = {\n  alerts: CurrentUser['alerts'],\n  readAlert: (id: string) => unknown\n  onEmptyClick?: (a: any) => any\n}\n\nconst Alerts = ({ alerts, readAlert }: AlertDropdownProps) => {\n  return (<>\n    {alerts.map(alert =>\n      <div key={alert.id} className={styles.alert} onClick={() => readAlert(alert.id)}>\n        <X ring />\n        {alert.link\n          ? <Link to={alert.link}>{alert.content}</Link>\n          : <ParsedText content={alert.content} />\n        }\n      </div>\n    )}\n  </>)\n\n\n}\n\nexport const AlertDropdown: React.SFC<AlertDropdownProps> = ({ alerts, onEmptyClick, readAlert }) => (\n  <div className={styles.alertDropdown}>\n    {alerts.length\n      ? <Alerts alerts={alerts} readAlert={readAlert} />\n      : <div className={styles.noAlerts} onClick={onEmptyClick}>No Alerts!</div>\n    }\n  </div>\n)\n\nexport const AlertCircle: React.SFC<{ unread: number }> = ({ unread }) => (\n  <div className={cx(styles.circle, {\n    [styles.unread]: unread,\n    [styles.unread1]: unread > 0 && unread < 5,\n    [styles.unread2]: unread >= 5 && unread < 10,\n    [styles.unread3]: unread >= 10 && unread < 15,\n    [styles.unread4]: unread >= 15,\n  })}>\n    {unread || 0}\n  </div>\n)\n","const JWT = '__JWT__'\n\ntype JwtMap = {\n  __currentUser__: string,\n  [username: string]: string\n}\n\ntype JwtUser = {\n  username: string,\n  jwt: string\n}\n\nconst getMapping = (): JwtMap => {\n  const stored = localStorage.getItem(JWT)\n  return stored ? JSON.parse(stored) : { __currentUser__: '' }\n}\n\nconst get = (): string| void => {\n  const mapping = getMapping()\n  return mapping[mapping.__currentUser__]\n}\n\nconst getInnactiveUserList = (): Array<JwtUser> => {\n  const mapping = getMapping()\n  return Object.keys(mapping)\n    .filter(username => (username !== '__currentUser__' && username !== mapping.__currentUser__))\n    .map(username => ({\n      username, jwt: mapping[username]\n    }))\n}\n\nconst getCurrentUser = (): JwtUser => {\n  const mapping = getMapping()\n  return {\n    username: mapping.__currentUser__,\n    jwt: mapping[mapping.__currentUser__]\n  }\n}\n\nconst set = (username: string, jwt: string): void => {\n  const mapping = getMapping()\n  mapping[username] = jwt\n  localStorage.setItem(JWT, JSON.stringify(mapping))\n}\n\nconst setCurrentUser = (username: string) => {\n  const mapping = getMapping()\n  mapping.__currentUser__ = username\n  localStorage.setItem(JWT, JSON.stringify(mapping))\n}\n\nconst clearCurrentUser = () => {\n  const mapping = getMapping()\n  mapping.__currentUser__ = ''\n  localStorage.setItem(JWT, JSON.stringify(mapping))\n}\n\nconst TRACKING_TOKEN = '__TRACKING_TOKEN__'\nconst setTrackingToken = () => {\n  try {\n    const existingToken = getTrackingToken()\n    if (!existingToken) {\n      const token = `${Date.now()}-${Math.random()}`\n      localStorage.setItem(TRACKING_TOKEN, token)\n      return token\n    } else {\n      return existingToken\n    }\n\n  } catch(e) {\n    console.log('could not set trakcing token: ', e)\n  }\n}\n\nconst getTrackingToken = (): string => localStorage.getItem(TRACKING_TOKEN) || ''\n\nexport default {\n  get,\n  getCurrentUser,\n  getInnactiveUserList,\n  getTrackingToken,\n  setTrackingToken,\n  set,\n  setCurrentUser,\n  clearCurrentUser\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport jwt from 'utils/jwt'\nimport styles from './styles.module.scss'\n\nconst switchUser = (username: string) => {\n  jwt.setCurrentUser(username)\n  window.location.reload()\n}\n\nconst logout = () => {\n  jwt.clearCurrentUser()\n  window.location.reload()\n}\n\nexport const UserDropdown: React.SFC<{}> = () => {\n  const alternativeUsers = jwt.getInnactiveUserList()\n\n  return (\n    <ul className={styles.userDropdown}>\n      <a href=\"#logout\" onClick={logout}>\n        <li>Logout</li>\n      </a>\n\n      <Link to=\"/messages\">\n        <li>\n          <div>Messages</div>\n        </li>\n      </Link>\n\n      <Link to=\"/profile\">\n        <li>\n          <div>Update Profile</div>\n        </li>\n      </Link>\n\n      <Link to=\"/signup\">\n        <li>\n          <div>Create Account</div>\n        </li>\n      </Link>\n\n      {!!alternativeUsers.length &&\n        <div className={styles.switchAccounts}>\n          <strong>Switch Account</strong>\n          <ul>\n            {alternativeUsers.map(({ username }) => (\n              <li\n                key={username}\n                onClick={() => switchUser(username)}\n              >\n                {username}\n              </li>\n             ))}\n          </ul>\n        </div>\n      }\n    </ul>\n  )\n}\n","import React, { useEffect } from 'react'\nimport cx from 'classnames'\nimport styles from './styles.module.scss'\n\n\ntype Props = {\n  hide: Function,\n  children: any\n}\n\nconst ELEMENT_ID = '__dropdown_component__'\n\nexport default function Dropdown({ children, hide }: Props) {\n  const hideDropdown = (e: any) => {\n    const dropdown = document.getElementById(ELEMENT_ID)\n    if (dropdown && e.target !== dropdown && !dropdown.contains(e.target)) {\n      hide()\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener('click', hideDropdown)\n    return () => document.removeEventListener('click', hideDropdown)\n  })\n\n  return (\n    <div id={ELEMENT_ID} className={cx(styles.dropdown, 'solid')}>\n      {children}\n    </div>\n  )\n}\n","import React, { useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport cx from 'classnames'\nimport { useQuery, useMutation } from 'urql'\nimport useResponsive from 'utils/useResponsive'\nimport useInterval from 'utils/useInterval'\n\n\nimport styles from './styles.module.scss'\nimport { Width } from 'components/Body'\n\nimport { AlertDropdown, AlertCircle } from './Alerts'\nimport { UserDropdown } from './User'\nimport Dropdown from './Dropdown'\n\nimport { RouteChildrenProps } from 'react-router'\n\nexport type CurrentUser = {\n    id: string,\n    username: string,\n    avatarUrl?: string\n    alerts: Array<{\n      id: string\n      content: string\n      link?: string\n    }>\n  }\nexport type CurrentUserQuery = {\n  currentUser?: CurrentUser\n}\n\nconst currentUserQuery = `{\n  currentUser {\n    id\n    username\n    avatarUrl\n    alerts: alertsList (condition: { read: false }) {\n      id\n      content\n      link\n    }\n  }\n}`\n\ntype ReadAlertInput = {\n  input: {\n    alertId: string\n  }\n}\n\ntype ReadAlertResponse = {\n  readAlert: {\n    alert: {\n      id: string,\n      read: boolean\n    }\n  }\n}\n\nconst readAlertMutation = `\nmutation readAlert($input: ReadAlertInput!) {\n  readAlert(input: $input) {\n    alert {\n      id\n      read\n    }\n  }\n}`\n\nexport type Props = RouteChildrenProps\n\nexport type State = {\n  dropdownState: null | 'users' | 'alerts'\n}\n\nfunction Nav(props: Props) {\n  const [dropdownState, setDropdownState] = useState<State['dropdownState']>(null)\n  const [{ data, fetching }, executeQuery] = useQuery<CurrentUserQuery>({ query: currentUserQuery })\n  const [response, executeReadAlert] = useMutation<ReadAlertResponse, ReadAlertInput>(readAlertMutation) // eslint-disable-line\n  const currentUser = (data && data.currentUser) || null\n\n  const readAlert = (alertId: string) => executeReadAlert({ input: { alertId } })\n\n  const hideDropdown = () => setDropdownState(null)\n  useEffect(() => props.history.listen(hideDropdown))\n  useInterval(() => {\n    if (!document.hidden) {\n      executeQuery({ requestPolicy: 'network-only' })\n    }\n  }, 10000)\n\n  return (\n    <nav className={cx(styles.container, 'solid')}>\n      <Width>\n        <NavBar\n          loading={fetching}\n          currentUser={currentUser}\n          toggleDropdownVisible={setDropdownState}\n        />\n        <div className={styles.dropdownPosition}>\n          {dropdownState &&\n            <Dropdown hide={hideDropdown}>\n              {dropdownState === 'users' && <UserDropdown />}\n              {dropdownState === 'alerts' && currentUser && <AlertDropdown\n                alerts={currentUser.alerts}\n                onEmptyClick={hideDropdown}\n                readAlert={readAlert}\n              />}\n            </Dropdown>\n          }\n        </div>\n      </Width>\n    </nav>\n  )\n}\n\n\n\ntype NavBarProps = {\n  loading: boolean,\n  currentUser: CurrentUserQuery['currentUser'] | null,\n  toggleDropdownVisible: (state: State['dropdownState']) => void,\n}\n\nconst NavBar: React.SFC<NavBarProps> = ({ toggleDropdownVisible, currentUser, loading }) => {\n  return (\n    <div className={styles.content}>\n      <Link to=\"/\">\n        <div className={styles.title}>FriendWorld</div>\n      </Link>\n\n      <div className={styles.links}>\n        {currentUser\n          ? <SignedInMenu currentUser={currentUser} toggleDropdownVisible={toggleDropdownVisible} />\n          : loading ? false : <SignedOutMenu />\n        }\n      </div>\n    </div>\n  )\n}\n\ntype SignedInMenuProps = {\n  currentUser: CurrentUser\n  toggleDropdownVisible: NavBarProps['toggleDropdownVisible']\n}\n\nconst SignedInMenu = ({ currentUser, toggleDropdownVisible }: SignedInMenuProps) => {\n  const { isDesktop, isMobile } = useResponsive(540)\n\n  return (\n    <>\n      <div\n        className={styles.link}\n        onClick={() => toggleDropdownVisible('users')}\n        style={{ maxWidth: '180px', overflow: 'auto' }}\n      >\n        {currentUser.username}\n        <div\n          className={cx(styles.circle, styles.user)}\n          style={{ backgroundImage: `url(${currentUser.avatarUrl})` }}\n        />\n      </div>\n\n      {isDesktop && (\n        <div className={styles.link} onClick={() => toggleDropdownVisible('alerts')}>\n          Alerts\n          <AlertCircle unread={currentUser.alerts.length} />\n        </div>\n      )}\n\n      {isMobile && (\n        <div className={styles.link} onClick={() => toggleDropdownVisible('alerts')}>\n          <AlertCircle unread={currentUser.alerts.length} />\n        </div>\n      )}\n      {/*\n      <Link to=\"/signup\" className={styles.link}>Signup</Link>\n      <Link to=\"/login\" className={styles.link}>Login</Link>\n    */}\n    </>\n  )\n}\n\nconst SignedOutMenu = () => (\n  <>\n    <Link to=\"/login\" className={styles.link}>Login</Link>\n    <Link to=\"/signup\" className={styles.link}>Signup</Link>\n  </>\n)\n\nexport default Nav\n","import * as React from 'react'\nimport styles from './styles.module.scss'\n\ntype Props = {\n  error: Error | string\n}\n\nconst DisplayError: React.SFC<Props> = ({ error }) => (\n  <div className={styles.error}>\n    An Error Occurred: {JSON.stringify(error, null, 3)}\n  </div>\n)\n\nexport default DisplayError\n","import React, { useState, useEffect } from 'react'\nimport styles from './styles.module.scss'\n\n\nconst Loading: React.SFC<{}> = () => {\n  const [dots, setDots] = useState<string>('')\n\n  useEffect(() => {\n    const interval = setInterval(() => setDots(dots + '.'), 350)\n    return () => clearInterval(interval)\n  })\n\n  return (\n    <div className={styles.loading}>\n      loading{dots}\n    </div>\n)\n}\n\nexport default Loading\n","import React, { useState, useMemo } from 'react';\nimport { useMutation } from 'urql'\nimport jwt from 'utils/jwt'\nimport DisplayError from 'components/DisplayError'\nimport Loading from 'components/Loading'\nimport styles from './styles.module.scss'\n\n\nconst loginMutation = `\nmutation($input: LoginInput!) {\n  login(input: $input) {\n    jwtToken\n    query {\n      currentUser {\n        id\n        username\n      }\n    }\n  }\n}`\n\n\ntype LoginInput = {\n  input: {\n    username: string,\n    password: string\n  }\n}\ntype LoginResponse = { login: { jwtToken: string }}\ntype Props = {}\n\ntype State = {\n  username: string,\n  password: string\n}\n\nfunction Login() {\n  const [username, setUsername] = useState<string>('')\n  const [password, setPassword] = useState<string>('')\n  const [errorText, setErrorText] = useState<string>('')\n\n\n  const [{ error, fetching, data }, executeLogin] = useMutation<LoginResponse, LoginInput>(loginMutation)\n\n  useMemo(() => {\n    if (data && data.login) {\n      if (data.login.jwtToken) {\n        jwt.set(username, data.login.jwtToken)\n        jwt.setCurrentUser(username)\n        window.location.href = '/'\n      } else {\n        setErrorText('Incorrect username/password combination')\n      }\n    }\n  }, [username, data])\n\n  return (\n    <section className={styles.login}>\n      <div className={styles.card}>\n        <h1>Login</h1>\n        {error && <DisplayError error={error} />}\n        {fetching && <Loading />}\n        {!error && !fetching && (\n          <form>\n            <input\n              name=\"fw_username\"\n              placeholder=\"username\"\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n            />\n            <input\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n            <button\n              className={styles.submitButton}\n              onClick={(e) => {\n                e.preventDefault()\n                if (username && password) {\n                  setErrorText('')\n                  executeLogin({ input: { username, password } })\n                }\n              }}\n            >\n              Submit\n            </button>\n            {errorText && <DisplayError error={errorText} />}\n\n          </form>\n        )}\n      </div>\n    </section>\n  )\n}\n\nexport default Login\n","import React, { useState } from 'react';\nimport { useMutation } from 'urql'\nimport jwt from 'utils/jwt'\nimport DisplayError from 'components/DisplayError'\nimport Loading from 'components/Loading'\nimport styles from './styles.module.scss'\n\nconst signupMutation = `\nmutation($input: SignupInput!) {\n  signup(input: $input) {\n    jwtToken\n  }\n}`\n\n\ntype SignupInput = {\n  input: {\n    username: string,\n    password: string\n  }\n}\n\ntype SignupResponse = { signup: { jwtToken: string }}\n\ntype Props = {}\n\ntype State = {\n  username: string,\n  password: string\n}\n\nfunction Signup() {\n  const [username, setUsername] = useState<string>('')\n  const [password, setPassword] = useState<string>('')\n  const [passwordConfirm, setPasswordConfirm] = useState<string>('')\n  const [errorText, setErrorText] = useState<string>('')\n  const [{ error, fetching, data }, executeSignup] = useMutation<SignupResponse, SignupInput>(signupMutation)\n\n  const signup = () => {\n    if (!username || !password) {\n      setErrorText('Must include username and password.')\n      return\n    }\n    if (password !== passwordConfirm) {\n      setErrorText('Password must match Password Confirmation')\n      return\n    }\n    executeSignup({ input: { username, password } })\n  }\n\n  const displayErrorText = error\n    ? error.message.includes('violates unique constraint')\n      ? 'That username is already taken. Please try again'\n      : error.message\n    : errorText\n      ? errorText\n      : ''\n\n  if (data && !error) {\n    jwt.set(username, data.signup.jwtToken)\n    jwt.setCurrentUser(username)\n    window.location.href = '/onboarding'\n  }\n\n  return (\n    <section className={styles.signup}>\n      <div className={styles.card}>\n        <h1>Create Account</h1>\n        <form>\n          <div className={styles.inputs}>\n            <input\n              name=\"fw_username\"\n              placeholder=\"Username\"\n              value={username}\n              onChange={(e) => {\n                setUsername(e.target.value)\n                if (e.target.value.length > 18) setErrorText('Username must be 18 characters or less')\n              }}\n            />\n            <input\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n            <input\n              type=\"password\"\n              name=\"password_confirm\"\n              placeholder=\"Password Confirmation\"\n              value={passwordConfirm}\n              onChange={(e) => setPasswordConfirm(e.target.value)}\n            />\n          </div>\n\n          {displayErrorText && <DisplayError error={displayErrorText} />}\n          {fetching && <Loading />}\n          {!fetching && (\n            <button\n              className={styles.submitButton}\n              onClick={(e) => {\n                e.preventDefault()\n                signup()\n              }}\n            >\n              Submit\n            </button>\n          )}\n        </form>\n      </div>\n    </section>\n  )\n}\n\n\n\nexport default Signup\n\n","import * as React from 'react';\nimport { Link } from 'react-router-dom'\nimport cx from 'classnames'\nimport ParsedText from '../ParsedText'\nimport profanityFilter from 'utils/profanityFilter'\nimport styles from './styles.module.scss';\n\n\nexport type PostType = {\n  id: string,\n  createdAt: string,\n  content: string,\n  author?: {\n    id: string,\n    username: string\n    avatarUrl?: string\n    postStats?: {\n      totalCount: number\n    }\n  } | null,\n  thread?: {\n    id: string,\n    title: string\n  }\n}\n\ntype Props = {\n  post: PostType\n}\n\nconst Post: React.SFC<Props> = ({ post }) => (\n  <article className={styles.post}>\n    <div className={styles.main}>\n      {!!post.author &&\n        <Link to={`/users/${post.author.username}`} className={styles.panel}>\n          <aside className={styles.panelContainer}>\n            <div className={styles.avatar} style={{ backgroundImage: `url(${post.author.avatarUrl})` }} />\n            <div className={styles.userInfo}>\n              <div className={styles.username}>{post.author.username}</div>\n              {post.author.postStats &&\n                <div className={styles.totalPosts}><strong>Posts:</strong> {post.author.postStats.totalCount}</div>\n              }\n            </div>\n          </aside>\n        </Link>\n      }\n\n\n      <div className={styles.content}>\n        <ParsedText content={post.content} />\n      </div>\n\n    </div>\n    <div className={cx(styles.footer, 'offWhite')}>\n      <div className={styles.postedAt}>\n        <time>Posted at: {new Date(post.createdAt).toISOString()}</time>\n        <span><Link to={`/posts/${post.id}`}>/posts/{post.id}</Link></span>\n      </div>\n      {!!post.thread && (\n        <div className={styles.threadLink}>\n          In thread: <Link to={`/threads/${post.thread.id}`}>{profanityFilter(post.thread.title)}</Link>\n        </div>\n      )}\n    </div>\n  </article>\n)\n\nexport default Post\n","import * as React from 'react';\nimport { useQuery } from 'urql'\nimport { Link } from 'react-router-dom'\nimport styles from './styles.module.scss'\nimport Post, { PostType } from 'components/Post'\nimport DisplayError from 'components/DisplayError'\nimport Loading from 'components/Loading'\n\n\ntype PostQuery = {\n  post?: PostType\n}\n\nconst queryType = process.env.NODE_ENV === 'production' ? 'post' : 'postById'\n\nconst postQuery = `\nquery ${queryType} ($id: Int!){\n  post: ${queryType} (id: $id) {\n    id\n    createdAt\n    content\n    author {\n      id\n      username\n      avatarUrl\n      postStats: authoredPosts {\n        totalCount\n      }\n    }\n    thread {\n      id\n      title\n    }\n  }\n}`\n\n\nconst Posts: React.SFC<{ id: number }> = ({ id }) => {\n  const [{ error, fetching, data }] = useQuery<PostQuery>({ query: postQuery, variables: { id } })\n\n  return (\n    <section>\n      <div className={styles.back}>\n        <Link to=\"/\">{'< Back to forum'}</Link>\n      </div>\n\n      <div className={styles.left}>\n        {error && <DisplayError error={error} />}\n        {fetching && <Loading />}\n        {data && (\n          data.post\n            ? <Post post={data.post}/>\n            : 'This post does not exist!'\n        )}\n      </div>\n    </section>\n\n  )\n}\n\nexport default Posts\n","import * as React from 'react';\nimport noop from 'lodash/noop'\nimport styles from './styles.module.scss';\nimport Img from '../Img'\n\ntype Props = {\n  url: string\n  content: string\n  img?: string\n  onClick?: () => unknown\n}\n\nconst Ad: React.SFC<Props> = ({ url, img, content, onClick }) => (\n  <div className={styles.ad}>\n    <a\n      href={url}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      onClick={onClick || noop}\n    >\n      {img &&\n        <Img url={img} alt={content} />\n      }\n      {content &&\n        <div className={styles.content}>{content}</div>\n      }\n    </a>\n  </div>\n)\n\nexport default Ad\n","import React, { useMemo } from 'react'\nimport { sampleSize, shuffle, isObject } from 'lodash'\nimport { useQuery, useMutation } from 'urql'\nimport Ad from 'components/Ad'\nimport styles from './styles.module.scss'\n\nconst safeParse = (str?: any) => {\n  try {\n    const obj = JSON.parse(str)\n    return isObject(obj) ? obj : {}\n  } catch(e) {\n    return {}\n  }\n}\nconst adQuery = `{\n  currentUser {\n    id\n    trackingInfo\n  }\n  ads: adsList {\n    id\n    url\n    img\n    content\n    tags\n    isGeneric\n    weight\n    targetTags\n    primaryTags\n  }\n}`\n\n// , weight        int default 1\n// , target_tags   jsonb default '[]'\n// , primary_tags  jsonb default '[]'\n// , tags          jsonb default '[]'\n\n\ntype AdQuery = {\n  ads: Array<{\n    id: string\n    url: string\n    img: string\n    content: string\n    isGeneric: boolean\n    weight: number\n    tags: string\n    targetTags: string\n    primaryTags: string\n  }>\n  currentUser?: {\n    id: string\n    trackingInfo: string\n  }\n}\n\ntype Ad = {\n  id: string\n  url: string\n  img: string\n  content: string,\n  isGeneric: boolean\n  weight: number\n  tags: Array<string>\n  primaryTags: Array<string>\n  targetTags: Array<string>\n}\n\n\nconst logAdClickMutation = `\nmutation logAdClick($input: LogAdClickInput!) {\n  logAdClick(input: $input) {\n    adClick {\n      adId\n      userId\n      clickCount\n    }\n  }\n}`\n\ntype LogAdClickInput = {\n  input: {\n    ad: string\n  }\n}\n\ntype LogAdClickResponse = {\n  logAdClick: {\n    adClick: {\n      adId: string\n      userId: string\n      clickCount: number\n    }\n  }\n}\n\ntype Filter = {\n  tags?: Array<string>,\n  targetTags?: Array<string>,\n}\n\nfunction filterAds(\n  allAds: Array<Ad>,\n  filter: Filter = {},\n  n: number = 1,\n): Array<Ad> {\n  const tags = new Set(filter.tags || [])\n  const targetTags = new Set(filter.targetTags || [])\n  const viableAds = allAds.filter(ad => ad.isGeneric)\n\n  const primaryAds = allAds.filter(ad => ad.primaryTags.some(a => tags.has(a)))\n\n  if (primaryAds.length >= n) {\n    return sampleSize(primaryAds, n)\n  }\n  const secondaryAds = allAds.filter(ad =>\n    ad.tags.some(a => tags.has(a))\n    && !primaryAds.includes(ad)\n  )\n\n  if (primaryAds.length + secondaryAds.length >= n) {\n    return [...shuffle(primaryAds), ...sampleSize(secondaryAds, n - primaryAds.length)]\n  }\n\n  const taggedAds = [...shuffle(primaryAds), ...shuffle(secondaryAds)]\n\n  const targetAds = allAds.filter(ad =>\n    ad.targetTags.some(a => targetTags.has(a))\n    && !taggedAds.includes(ad)\n  )\n\n  const remainingAds = [\n    ...targetAds,\n    ...viableAds.filter(ad => !taggedAds.includes(ad))\n  ]\n\n  return [...taggedAds, ...sampleSize(remainingAds, n - taggedAds.length)]\n}\n\nexport function useAds(n: number = 1, filter: Filter = {}) {\n  const [{ data, fetching }] = useQuery<AdQuery>({ query: adQuery })\n\n  const ads = useMemo(() => {\n    if (!data) return []\n    const parsedAds = data.ads.map(ad => ({\n      ...ad,\n      tags: JSON.parse(ad.tags),\n      primaryTags: JSON.parse(ad.primaryTags),\n      targetTags: JSON.parse(ad.targetTags),\n    }))\n    const trackingInfo = data.currentUser ? safeParse(data.currentUser.trackingInfo) : {}\n    const targetTags = [\n      trackingInfo.gender,\n      ...(trackingInfo.profileTags || [])\n    ]\n\n    return filterAds(parsedAds, {...filter, targetTags}, n)\n  }, [n, filter, data])\n\n  return { ads, fetchingAds: fetching }\n}\n\ntype Props = {\n  ads: Array<Ad>,\n  fetching?: boolean,\n}\nconst AdContainer = ({ ads, fetching }: Props) => {\n  const [response, executeLogAdClick] = useMutation<LogAdClickResponse, LogAdClickInput>(logAdClickMutation) // eslint-disable-line\n\n  if (fetching) return <>loading...</>\n  if (!ads) return null\n\n  const logAdClick = (id: string) =>\n    setTimeout(() =>\n      executeLogAdClick({ input: { ad: id }\n    }), 200)\n\n  return (\n    <section className={styles.adContainer}>\n      <div className={styles.label}>SPONSORED CONTENT</div>\n      {ads.map((ad, i) => (\n        <div className={styles.adWrapper} key={i}>\n          <Ad {...ad} onClick={() => logAdClick(ad.id)} />\n        </div>\n      ))}\n    </section>\n  )\n}\n\n\nexport default AdContainer\n","import React, { useState } from 'react'\nimport styles from './styles.module.scss'\n\nconst defaultPlaceholder = \"Join the conversation...\"\n\ntype Props = {\n  onSubmit: (content: string) => unknown,\n  onChange?: (content: string) => unknown,\n  buttonContent?: string,\n  placeholder?: string,\n  inputStyle?: Object\n}\n\nfunction TextInput ({\n  placeholder,\n  buttonContent,\n  inputStyle,\n  onSubmit,\n  onChange,\n}: Props) {\n  const [content, setContent] = useState('')\n\n  const submit = () => {\n    onSubmit(content)\n    setContent('')\n  }\n  const submitOnCommandEnter = (e: any) => {\n    if (e.keyCode === 13 && e.metaKey) {\n      submit()\n    }\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.inner}>\n      <textarea\n        className={styles.contentInput}\n        placeholder={placeholder || defaultPlaceholder}\n        onChange={e => {\n          setContent(e.target.value)\n          onChange && onChange(e.target.value)\n        }}\n        value={content}\n        style={inputStyle}\n        onKeyDown={submitOnCommandEnter}\n      />\n      <button\n        className={styles.submitButton}\n        onClick={submit}\n      >\n        {buttonContent || 'Submit'}\n      </button>\n      </div>\n    </div>\n  )\n}\n\nexport default TextInput\n","import React, { Fragment } from 'react';\nimport { useMutation, useQuery } from 'urql'\nimport { Link } from 'react-router-dom'\nimport cx from 'classnames'\nimport styles from './styles.module.scss'\nimport AdContainer, { useAds } from '../AdContainer'\nimport Post, { PostType } from 'components/Post'\nimport TextInput from 'components/TextInput'\nimport DisplayError from 'components/DisplayError'\nimport Loading from 'components/Loading'\nimport { getTags } from 'utils/parsers'\nimport useResponsive from 'utils/useResponsive'\nimport profanityFilter from 'utils/profanityFilter'\n\n\n\ntype ThreadQuery = {\n  thread?: {\n    id: number\n    title: string\n    posts: Array<PostType & { tags: string }>\n  }\n  currentUser?: {\n    id: string\n  }\n}\n\nconst queryType = process.env.NODE_ENV === 'production' ? 'thread' : 'threadById'\nconst threadQuery = `\nquery ${queryType} ($id: Int!) {\n  thread: ${queryType} (id: $id) {\n    id\n    title\n    posts: postsList {\n      id\n      content\n      createdAt\n      tags\n      author {\n        id\n        username\n        avatarUrl\n        postStats: authoredPosts {\n          totalCount\n        }\n      }\n    }\n  }\n  currentUser {\n    id\n  }\n}`\n\n\nconst createPostMutation = `\nmutation createPost($input: CreatePostInput!) {\n  createPost(input: $input) {\n    post {\n      id\n      content\n      createdAt\n      author {\n        id\n        avatarUrl\n        username\n      }\n    }\n  }\n}`\n\ntype CreatePostInput = {\n  input: {\n    content: string,\n    threadId: number,\n    tags: string, // Array<string>,\n    usernames: string, // Array<string>\n  }\n}\n\ntype CreatePostResponse = { createPost: { post: PostType } }\n\ntype AddPostProps = {\n  threadId: number,\n  disabled?: boolean\n}\nconst AddPost: React.SFC<AddPostProps> = ({ threadId, disabled }) => {\n  const [response, executeCreatePost] = useMutation<CreatePostResponse, CreatePostInput>(createPostMutation) // eslint-disable-line\n\n  const submit = (content: string) => {\n    if (!content) return\n    const { tags, usernames } = getTags(content)\n    executeCreatePost({\n      input: {\n        threadId,\n        content,\n        tags,\n        usernames,\n      }\n    })\n  }\n\n  return (\n    <>\n      {disabled && (\n        <Link to=\"/signup\">\n          <h2 className={styles.signup}>Create An Account To Join The Conversation!</h2>\n        </Link>\n      )}\n      <div className={cx(styles.addPost, disabled && styles.disabled)}>\n        <TextInput onSubmit={submit} />\n      </div>\n    </>\n  )\n}\n\nconst stickiedThreads = [1]\nconst Threads: React.SFC<{ id: number }> = ({ id }) => {\n  const { isMobile, isDesktop } = useResponsive(820)\n  const [{ data, error, fetching }] = useQuery<ThreadQuery>({ query: threadQuery, variables: { id } })\n\n  const tags = (\n    !stickiedThreads.includes(id) && data && data.thread\n      ? data.thread.posts.flatMap(p => JSON.parse(p.tags))\n      : []\n  )\n  const { ads, fetchingAds } = useAds(4, { tags })\n\n  const showMobileAd = (i: number) => {\n    if (!isMobile) return false\n    if ((i + 1) % 4) return false\n\n    const adIx = (((i + 1) / 4) - 1) % ads.length\n\n    return (\n      <div className={styles.ad}>\n        <AdContainer ads={[ads[adIx]]} fetching={fetchingAds} />\n      </div>\n    )\n  }\n\n  const isError = error && <DisplayError error={error} />\n  const isLoading = fetching && <Loading />\n\n\n  const isData = data && (data.thread ? (\n    <div className={styles.container}>\n      <header className={styles.threadTitle}>\n        <h2 >{profanityFilter(data.thread.title)}</h2>\n      </header>\n      <div>\n        <Link to={`/threads/${data.thread.id}`}>\n          <div className={styles.threadLink}>\n            /threads/{data.thread.id}\n          </div>\n        </Link>\n        <>\n          {data.thread.posts.map((post, i) =>\n            <Fragment key={post.id}>\n              {showMobileAd(i)}\n              <Post post={post} />\n            </Fragment>\n          )}\n        </>\n        <AddPost\n          threadId={data.thread.id}\n          disabled={!data.currentUser}\n        />\n      </div>\n    </div>\n  ) : 'This thread does not exist!')\n\n  return (\n    <section>\n      <div className={styles.back}>\n        <Link to=\"/\">{'< Back to forum'}</Link>\n      </div>\n\n      <div className={styles.threadContainer}>\n        <div className={styles.left}>\n          {isError}\n          {isLoading}\n          {isData}\n        </div>\n\n        {isDesktop && (\n          <div className={styles.adContainer}>\n            <AdContainer ads={ads} fetching={fetchingAds} />\n          </div>\n        )}\n      </div>\n    </section>\n  )\n}\n\nexport default Threads\n\n","import React, { useState } from 'react';\nimport { useQuery, useMutation } from 'urql'\nimport { Link } from 'react-router-dom'\nimport cx from 'classnames'\n\n\nimport styles from './styles.module.scss';\nimport { getTags } from 'utils/parsers'\nimport profanityFilter from 'utils/profanityFilter'\nimport TextInput from 'components/TextInput'\nimport Post from 'components/Post'\n\n\n\ntype UserQuery = {\n  currentUser?: {\n    id: string\n    username: string\n    avatarUrl: string\n    postStats: {\n      totalCount: number\n    }\n  }\n}\n\nconst userQuery = `{\n  currentUser {\n    id\n    username\n    avatarUrl\n    postStats: authoredPosts {\n      totalCount\n    }\n  }\n}`\n\ntype CreateThreadInput = {\n  input: {\n    title: string,\n    content: string,\n    tags: string, // Array<string>,\n    usernames: string, // Array<string>,\n  }\n}\ntype CreateThreadResponse = { createThread: { thread: { id: string, title: string } } }\n\nconst createThreadMutation = `\nmutation createThread($input: CreateThreadInput!) {\n  createThread(input: $input) {\n    thread {\n      id\n      title\n    }\n  }\n}`\n\n\nconst NewThread: React.SFC<{}> = () => {\n  const [title, setTitle] = useState<string>('')\n  const [content, setContent] = useState<string>('')\n  const [query] = useQuery<UserQuery>({ query: userQuery })\n  const [response, executeCreateThread] = useMutation<CreateThreadResponse, CreateThreadInput>(createThreadMutation)\n\n  const createThread = () => {\n    if (!title || !content) return\n    const { tags, usernames } = getTags(title + ' ' + content)\n    executeCreateThread({\n      input: {\n        title,\n        content,\n        tags,\n        usernames,\n      }\n    })\n  }\n\n  if (response.data) {\n    window.location.href = `/threads/${response.data.createThread.thread.id}`\n    return <div />\n  }\n  if (query.fetching || response.fetching) return <span>loading...</span>\n\n  const disabled = query.data && !query.data.currentUser\n  const author = query.data && query.data.currentUser && {\n    ...query.data.currentUser,\n    postStats: {\n      totalCount: query.data.currentUser.postStats.totalCount + 1\n    }\n  }\n\n  return (\n    <section className={styles.newThread}>\n      <div className={styles.back}>\n        <Link to=\"/\">{'< Back to forum'}</Link>\n      </div>\n      {!disabled && <h1 className={styles.sectionTitle}>New Thread</h1>}\n      {disabled && (\n        <Link to=\"/signup\">\n          <h2 className={styles.signup}>Create An Account To Join The Conversation!</h2>\n        </Link>\n      )}\n\n      <div className={cx({ [styles.disabled]: disabled })}>\n        <h2 className={styles.label}>Title</h2>\n        <input\n          className={styles.input}\n          onChange={e => setTitle(e.target.value)}\n          value={title}\n        />\n        <h2 className={styles.label}>Content</h2>\n        <TextInput\n          onSubmit={createThread}\n          onChange={setContent}\n          buttonContent=\"Start Thread\"\n          placeholder=\"\"\n          inputStyle={{ height: '200px' }}\n        />\n        {(title || content) && (\n          <>\n            <h2 className={styles.label}>[PREVIEW] {profanityFilter(title)}</h2>\n            <Post\n              post={{\n                id: 'XX',\n                createdAt: new Date().toString(),\n                content,\n                author,\n              }}\n            />\n          </>\n        )}\n      </div>\n    </section>\n  )\n}\n\nexport default NewThread\n","import React, { useState } from 'react';\nimport { useQuery, useMutation } from 'urql'\nimport { Link, Redirect } from 'react-router-dom'\nimport { RouteComponentProps } from 'react-router'\n\nimport styles from './styles.module.scss'\nimport DisplayError from 'components/DisplayError'\nimport Loading from 'components/Loading'\nimport useResponsive from 'utils/useResponsive'\nimport { getGender, getKeywords } from 'utils/parsers'\n\ntype CurrentUser = {\n  id: string\n  createdAt: string\n  username: string\n  avatarUrl: string\n  email: string | null\n  gender: string\n  birthday: string | null\n  bio: string\n  job: string\n  interests: string\n  websites: string\n  media: string\n  religion: string\n  politics: string\n  trackingInfo: string\n  postStats: {\n    totalCount: number\n  }\n}\ntype CurrentUserQuery = {\n  currentUser?: CurrentUser\n}\n\nconst userProps = `\n  id\n  createdAt\n  username\n  avatarUrl\n  email\n  gender\n  birthday\n  bio\n  job\n  interests\n  websites\n  media\n  religion\n  politics\n  trackingInfo\n`\n\nconst currentUserQuery = `{\n  currentUser {\n    ${userProps}\n    trackingInfo\n    postStats: authoredPosts {\n      totalCount\n    }\n  }\n}`\n\n\nconst updateUserMutation = `mutation UpdateUser($input: UpdateUserInput!) {\n  updateUser(input: $input) {\n    user {\n      ${userProps}\n    }\n  }\n}`\n\ntype UpdateUserInput = {\n  input: {\n    avatarUrl?: string\n    email?: string | null\n    gender?: string\n    birthday?: string | null\n    bio?: string\n    job?: string\n    interests?: string\n    websites?: string\n    media?: string\n    religion?: string\n    politics?: string\n    trackingInfo?: string\n  }\n}\n\ntype UpdateUserPayload = {\n  user: UpdateUserInput['input']\n}\n\n// const formatDate = (date: string) => new Date(date).toLocaleString('en-US', {\n//   weekday: 'long',\n//   year: 'numeric',\n//   month: 'long',\n//   day: 'numeric',\n//   hour: 'numeric',\n//   minute: 'numeric',\n//   second: 'numeric'\n// })\n\ntype Props = RouteComponentProps\n\nexport default function Profile({ history }: Props) {\n  const [{ data, error, fetching }] = useQuery<CurrentUserQuery>({ query: currentUserQuery })\n  const goto = (url: string) => history.push(url)\n\n  if (error) return <DisplayError error={error} />\n  if (fetching) return <Loading />\n  if (!data) return null\n  if (!data.currentUser) return <Redirect to=\"/signup\" />\n\n\n  return <ProfileContent currentUser={data.currentUser} goto={goto} />\n}\n\nfunction getTrackingInfo(fields: UpdateUserInput['input']) {\n  const trackingInfo = fields.trackingInfo ? JSON.parse(fields.trackingInfo) : {}\n  const gender = fields.gender ? getGender(fields.gender) : undefined\n  const profileTags = getKeywords([\n    fields.bio,\n    fields.job,\n    fields.interests,\n    fields.media,\n    fields.religion,\n    fields.politics,\n  ].join(' '))\n\n  return JSON.stringify({ ...trackingInfo, gender, profileTags })\n}\n\nconst validDate = (dateStr: string) => Date.parse(dateStr) ? new Date(dateStr).toISOString() : null\nconst validEmail = (emailStr: string) => emailStr.match(/^.+@.+\\..+$/) ? emailStr : null\nconst wait = (ms: number) => new Promise(res => setTimeout(res, ms))\ntype ContentProps = {\n  currentUser: CurrentUser,\n  goto: (url: string) => unknown\n}\n\nfunction ProfileContent ({ currentUser, goto }: ContentProps) {\n  const [avatarUrl, setAvatarUrl] = useState<string>(currentUser.avatarUrl)\n  const [email, setEmail] = useState<string>(currentUser.email || '')\n  const [gender, setGender] = useState<string>(currentUser.gender)\n  const [birthday, setBirthday] = useState<string>(currentUser.birthday || '')\n  const [bio, setBio] = useState<string>(currentUser.bio)\n  const [job, setJob] = useState<string>(currentUser.job)\n  const [interests, setInterests] = useState<string>(currentUser.interests)\n  const [websites, setWebsites] = useState<string>(currentUser.websites)\n  const [media, setMedia] = useState<string>(currentUser.media)\n  const [religion, setReligion] = useState<string>(currentUser.religion)\n  const [politics, setPolitics] = useState<string>(currentUser.politics)\n\n  const [submitted, setSubmitted] = useState<boolean>(false)\n  const { isMobile, isDesktop } = useResponsive(540)\n\n\n  const [isFakeLoading, setIsFakeLoading] = useState<boolean>(false)\n  const [response, executeUpdateUser] = useMutation<UpdateUserPayload, UpdateUserInput>(updateUserMutation)\n\n  const bdayError = submitted && birthday && !validDate(birthday) ? 'Birthday must be a valid date' : ''\n  const emailError = submitted && email && !validEmail(email) ? 'Email must be in correct format' : ''\n\n  const header = (\n    <header className={styles.header}>\n      <h1>Update Profile: {currentUser.username}</h1>\n      <div className={styles.subheader}>uuid: {currentUser.id}</div>\n      <div className={styles.subheader}><Link to={`/users/${currentUser.username}`}>View Profile</Link></div>\n    </header>\n  )\n\n  const updateUser = async () => {\n    setSubmitted(true)\n    setIsFakeLoading(true)\n    const fields = {\n        email: validEmail(email),\n        birthday: validDate(birthday),\n        avatarUrl,\n        gender,\n        bio,\n        job,\n        interests,\n        websites,\n        media,\n        religion,\n        politics,\n      }\n    const trackingInfo = getTrackingInfo({ ...fields, trackingInfo: currentUser.trackingInfo })\n    await Promise.all([\n      executeUpdateUser({\n        input: { ...fields, trackingInfo }\n      }),\n      wait(1000)\n    ])\n    setIsFakeLoading(false)\n    // goto(`/users/${currentUser.username}`)\n  }\n\n  return (\n    <div className={styles.profile}>\n      {isMobile && header}\n      <div className={styles.content}>\n        <div className={styles.left}>\n          <div>\n            <div className={styles.avatar} style={{ backgroundImage: `url(${avatarUrl})` }} />\n            <div><strong>Posts:</strong> {currentUser.postStats.totalCount}</div>\n          </div>\n        </div>\n\n        <div className={styles.right}>\n          {response.fetching || isFakeLoading\n            ? <Loading />\n            :\n            <>\n              {isDesktop && header}\n              <div className={styles.buttonContainer}>\n                <button className={styles.submitButton} onClick={updateUser}>Update Profile</button>\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>Avatar Url</h3>\n                <input\n                  className={styles.contentInput}\n                  value={avatarUrl}\n                  placeholder=\"http://www.website.com/image.jpeg\"\n                  onChange={e => setAvatarUrl(e.target.value)}\n                />\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>Email</h3>\n                <input\n                  className={styles.contentInput}\n                  value={email}\n                  placeholder=\"email@website.com\"\n                  onChange={e => setEmail(e.target.value)}\n                />\n                {!!emailError && <div>{emailError}</div>}\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>Gender</h3>\n                <input\n                  className={styles.contentInput}\n                  value={gender}\n                  placeholder=\"Gender\"\n                  onChange={e => setGender(e.target.value)}\n                />\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>Birthday</h3>\n                <input\n                  className={styles.contentInput}\n                  value={birthday}\n                  placeholder=\"03/11/19\"\n                  onChange={e => setBirthday(e.target.value)}\n                />\n                {!!bdayError && <div>{bdayError}</div>}\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>About Me</h3>\n                <textarea\n                  className={styles.contentInput}\n                  value={bio}\n                  placeholder=\"Tell us about yourself!\"\n                  onChange={e => setBio(e.target.value)}\n                />\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>Occupation</h3>\n                <input\n                  className={styles.contentInput}\n                  value={job}\n                  placeholder=\"Accountant\"\n                  onChange={e => setJob(e.target.value)}\n                />\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>Interestes</h3>\n                <input\n                  className={styles.contentInput}\n                  value={interests}\n                  placeholder=\"Bowling, Stamp Collecting, Family\"\n                  onChange={e => setInterests(e.target.value)}\n                />\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>Favorite Websites</h3>\n                <input\n                  className={styles.contentInput}\n                  value={websites}\n                  placeholder=\"friendworld.social, fastcashmoneyplus.biz\"\n                  onChange={e => setWebsites(e.target.value)}\n                />\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>Favorite Movies, TV shows, and Music</h3>\n                <input\n                  className={styles.contentInput}\n                  value={media}\n                  placeholder=\"The Godfather, Citizen Kane, Casablanca\"\n                  onChange={e => setMedia(e.target.value)}\n                />\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>Religious Views</h3>\n                <input\n                  className={styles.contentInput}\n                  value={religion}\n                  placeholder=\"God\"\n                  onChange={e => setReligion(e.target.value)}\n                />\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>Political Views</h3>\n                <input\n                  className={styles.contentInput}\n                  value={politics}\n                  placeholder=\"Liberal/Conservative\"\n                  onChange={e => setPolitics(e.target.value)}\n                />\n              </div>\n\n              <div className={styles.buttonContainer}>\n                <button className={styles.submitButton} onClick={updateUser}>Update Profile</button>\n              </div>\n            </>\n          }\n        </div>\n      </div>\n    </div>\n  )\n}\n\n","import React from 'react';\nimport { useQuery } from 'urql'\nimport styles from './styles.module.scss'\nimport { Link } from 'react-router-dom'\nimport Post from 'components/Post'\nimport DisplayError from 'components/DisplayError'\nimport ParsedText from 'components/ParsedText'\nimport Loading from 'components/Loading'\nimport useResponsive from 'utils/useResponsive'\n\n\nconst userQuery = `\nquery userByUsername ($username: UsernameDomain!) {\n  ads {\n    totalCount\n  }\n  user: userByUsername (username: $username) {\n    id\n    createdAt\n    username\n    avatarUrl\n    email\n    gender\n    birthday\n    bio\n    job\n    interests\n    websites\n    media\n    religion\n    politics\n    trackingInfo\n    postStats: authoredPosts {\n      totalCount\n    }\n    adClicks {\n      totalCount\n    }\n    posts: authoredPostsList (first: 10, orderBy: [CREATED_AT_DESC]) {\n      id\n      content\n      createdAt\n      thread {\n        id\n        title\n      }\n    }\n  }\n}`\n\ntype UserQuery = {\n  ads: {\n    totalCount: number\n  }\n  user: {\n    id: string\n    createdAt: string\n    username: string\n    avatarUrl: string | null\n    email: string | null\n    gender: string | null\n    birthday: string | null\n    bio: string | null\n    job: string | null\n    interests: string | null\n    websites: string | null\n    media: string | null\n    religion: string | null\n    politics: string | null\n    postStats: {\n      totalCount: number\n    }\n    adClicks: {\n      totalCount: number\n    }\n    posts: Array<{\n      id: string\n      content: string\n      createdAt: string\n      thread: {\n        id: string\n        title: string\n      }\n\n    }>\n  } | null\n}\n\nconst InfoSection = ({ title, info }: { title: string, info: any }) => (\n  info && (\n    <div className={styles.infoSection}>\n      <h3>{title}</h3>\n      <ParsedText content={info} />\n    </div>\n  )\n)\n\ntype Props = {\n  username: string\n}\n\nconst formatDate = (date: string) => new Date(date).toLocaleString('en-US', {\n  weekday: 'long',\n  year: 'numeric',\n  month: 'long',\n  day: 'numeric',\n  hour: 'numeric',\n  minute: 'numeric',\n  second: 'numeric'\n})\n\nconst User: React.SFC<Props> = ({ username }) => {\n  const [{ error, fetching, data }] = useQuery<UserQuery>({ query: userQuery, variables: { username } })\n  const { isMobile, isDesktop } = useResponsive(540)\n\n  if (error) return <DisplayError error={error} />\n  if (fetching) return <Loading />\n  if (!data || !data.user) return (\n    <div style={{ margin: '20px 0', textAlign: 'center' }}>\n      {username} is not an active Friendworld user!\n    </div>\n  )\n\n  const { user, ads } = data\n\n  const header = (\n    <header className={styles.header}>\n      <h1 className={styles.intro}>Welcome to {user.username}'s Profile!</h1>\n      <h4 className={styles.memberSince}>{user.username} has been a member since {formatDate(user.createdAt)}</h4>\n      <h4 className={styles.memberSince}>{user.username} has engaged with {user.adClicks.totalCount}/{ads.totalCount} pieces of sponsored content!</h4>\n    </header>\n  )\n\n  return (\n    <div className={styles.profile}>\n      {isMobile && header}\n      <div className={styles.content}>\n        <div className={styles.left}>\n          <div>\n            <div className={styles.avatar} style={{ backgroundImage: `url(${user.avatarUrl})` }} />\n            <div><strong>Posts:</strong> {user.postStats.totalCount}</div>\n            <div className={styles.sendMessage}>\n              <Link to={`/messages/${user.username}`}>Message {user.username}</Link>\n            </div>\n          </div>\n        </div>\n\n        <div className={styles.right}>\n          {isDesktop && header}\n          <div className={styles.userInfo}>\n\n          <InfoSection title=\"Gender\" info={user.gender} />\n          <InfoSection title=\"Birthday\" info={user.birthday} />\n          <InfoSection title=\"About Me\" info={user.bio} />\n          <InfoSection title=\"Occupation\" info={user.job} />\n          <InfoSection title=\"Interests\" info={user.interests} />\n          <InfoSection title=\"Favorite Websites\" info={user.websites} />\n          <InfoSection title=\"Favorite Movies, TV shows, and Music\" info={user.media} />\n          <InfoSection title=\"Religious Views\" info={user.religion} />\n          <InfoSection title=\"Political Views\" info={user.politics} />\n\n          </div>\n          <div className={styles.recentPosts}>\n            {user.posts.length ? (<>\n              <h2>Recent posts by {user.username}:</h2>\n              {user.posts.map(post => (\n                <div className={styles.postContainer} key={post.id}>\n                  <Post post={post} />\n                </div>\n              ))}\n            </>) : (\n              <h3>This user has not made any posts yet!</h3>\n            )}\n          </div>\n\n          <div className={styles.uuid}>user uuid: {user.id}</div>\n        </div>\n\n      </div>\n    </div>\n  )\n}\n\nexport default User\n","import React, { Fragment } from 'react';\nimport { Link } from 'react-router-dom'\nimport { useQuery } from 'urql'\nimport orderBy from 'lodash/orderBy'\nimport DisplayError from 'components/DisplayError'\nimport Loading from 'components/Loading'\nimport styles from './styles.module.scss'\n\nconst messagesDataQuery = `{\n  messageData: currentUser {\n    username\n    sent: messagesSentList {\n      createdAt\n      user: to {\n        username\n      }\n    }\n    received: messagesReceivedList {\n      createdAt\n      user: from {\n        username\n      }\n    }\n  }\n}`\n\ntype MessageData = {\n  createdAt: string\n  user: {\n    username: string\n  }\n}\ntype MessagesDataQuery = {\n  messageData: null | {\n    username: string\n    sent: Array<MessageData>\n    received: Array<MessageData>\n  }\n}\n\nconst collectMessages = (\n  messages: Map<string, Date>,\n  { createdAt, user: { username } }: MessageData\n) => {\n  const _createdAt = new Date(createdAt)\n  // @ts-ignore\n  if (!messages.has(username) || (messages.get(username) < _createdAt)) {\n    messages.set(username, _createdAt)\n  }\n  return messages\n}\n\nconst uniqueSortedUsers = (messageData: MessagesDataQuery['messageData']) => {\n  if (!messageData) return []\n\n  const allMessages = [...messageData.sent, ...messageData.received]\n  const messages = allMessages.reduce(collectMessages, new Map())\n\n  const values = Array.from(messages.entries())\n  return orderBy(values, [1]).reverse().map(m => m[0])\n}\n\nexport default function SidePanel() {\n  const [{ error, fetching, data }] = useQuery<MessagesDataQuery>({\n    query: messagesDataQuery\n  })\n\n  if (error) return <DisplayError error={error} />\n  if (fetching) return <Loading />\n  if (!data || !data.messageData) return null\n\n  const messageNames = uniqueSortedUsers(data.messageData)\n\n\n  return (\n    <aside className={styles.sidePanelContainer}>\n      <div className={styles.sidePanel}>\n        {messageNames.length ?\n          messageNames.map(username => (\n            <Fragment key={username}>\n              <Link to={`/messages/${username}`}>\n                <div className={styles.user}>{username}</div>\n              </Link>\n            </Fragment>\n          ))\n          : <div className={styles.emptyUsers}>You have no conversations.</div>\n        }\n      </div>\n    </aside>\n  )\n}\n","import React, { useState, useRef, useEffect } from 'react';\nimport { useQuery, useMutation } from 'urql'\nimport { Link, Redirect } from 'react-router-dom'\nimport orderBy from 'lodash/orderBy'\nimport DisplayError from 'components/DisplayError'\n// import Loading from 'components/Loading'\nimport ParsedText from 'components/ParsedText'\nimport styles from './styles.module.scss'\nimport useInterval from 'utils/useInterval'\n\nconst requestedUserQuery = `query messagesByUsername ($username: UsernameDomain!) {\n  currentUser {\n    username\n  }\n  requestedUser: userByUsername(username: $username) {\n    sent: messagesSentList {\n      id\n      content\n      createdAt\n      to {\n        username\n      }\n      from {\n        username\n      }\n    }\n    received: messagesReceivedList {\n      id\n      content\n      createdAt\n      to {\n        id\n        username\n      }\n      from {\n        id\n        username\n      }\n    }\n  }\n}`\n\nconst createMessageMutation = `mutation createMessage ($input: CreateMessageInput!) {\n  createMessage (input: $input) {\n    message {\n      id\n      content\n      from {\n        id\n        username\n      }\n    }\n  }\n}`\n\ntype Message = {\n  id: string\n  content: string\n  createdAt: string\n  to: {\n    id: string\n    username: string\n  }\n  from: {\n    id: string\n    username: string\n  }\n}\n\ntype RequestedUserQuery = {\n  currentUser?: {\n    username: string\n  }\n  requestedUser: {\n    sent: Array<Message>\n    received: Array<Message>\n  }\n}\n\ntype CreateMessageInput = {\n  input: {\n    toUsername: string\n    content: string\n  }\n}\n\ntype CreateMessagePayload = {\n  createMessage: {\n    message: Message\n  }\n}\n\ntype Props = {\n  username?: string | null\n}\n\n\n\nexport default function MessagePanel ({ username }: Props) {\n  const $sentMessages = useRef<any>(null)\n  const [messageToSend, setMessageToSend] = useState<string>('')\n  const [{ error, data }, executeQuery] = useQuery<RequestedUserQuery>({\n    query: requestedUserQuery,\n    variables: { username: username || '' }\n  })\n  const [\n    response, // eslint-disable-line\n    executeCreateMessage\n  ] = useMutation<CreateMessagePayload, CreateMessageInput>(createMessageMutation)\n\n  useInterval(() => {\n    if (!document.hidden) {\n      executeQuery({ requestPolicy: 'network-only' })\n    }\n  }, 1000)\n\n  const memoized = [\n    data\n    && data.requestedUser\n    && data.requestedUser.received && data.requestedUser.sent\n    && data.requestedUser.received.length + data.requestedUser.sent.length\n  ]\n\n  useEffect(() => {\n    if ($sentMessages.current) {\n      $sentMessages.current.scrollTop = $sentMessages.current.scrollHeight\n    }\n  }, memoized) // eslint-disable-line\n\n\n  const sendMessage = (keyPressed?: string) => {\n    if (keyPressed === 'Enter' && !!messageToSend) {\n      executeCreateMessage({\n        input: {\n          content: messageToSend,\n          toUsername: username || ''\n        }\n      })\n      setMessageToSend('')\n    }\n  }\n\n  if (error) return <DisplayError error={error} />\n  // if (fetching && !stopLoadDisplay) return <Loading />\n  if (!data || !data.currentUser) return null\n\n\n  if (data.currentUser.username === username) return <Redirect to=\"/messages\" />\n\n  const collectedMessages = data.requestedUser ? collectMessages(data.requestedUser) : []\n  const sentMessages = collectedMessages.map(message => (\n    <div className={styles.message} key={message.id}>\n      <div className={styles.sender}>\n        <Link to={`/users/${message.from.username}`}>\n          <strong>\n            {message.from.username}\n          </strong>\n        </Link>\n        <time>[{message.createdAt}]</time>\n      </div>\n      <div className={styles.content}>\n        <ParsedText content={message.content} />\n      </div>\n    </div>\n  ))\n\n  return (\n    <section className={styles.messagePanel}>\n      {!data.requestedUser && `${username} is not an active FriendWorld user`}\n      {data.requestedUser && <>\n        <div ref={$sentMessages} className={styles.sentMessages}>\n          {data.requestedUser && (collectedMessages.length\n            ? sentMessages\n            : `Send ${username} a message!`\n          )}\n        </div>\n\n        <input\n          className={styles.sendBox}\n          value={messageToSend}\n          onChange={e => setMessageToSend(e.target.value)}\n          onKeyPress={e => sendMessage(e.key)}\n          placeholder=\"Press ENTER to send message\"\n        />\n      </>}\n\n    </section>\n  )\n}\n\nconst collectMessages = (requestedUser: RequestedUserQuery['requestedUser']) => orderBy([\n  ...requestedUser.received,\n  ...requestedUser.sent\n], 'createdAt')\n","import React, { useState } from 'react'\nimport { useMutation } from 'urql'\nimport cx from 'classnames'\n\nimport styles from './styles.module.scss'\n\nconst createMessageMutation = `mutation createMessage ($input: CreateMessageInput!) {\n  createMessage (input: $input) {\n    message {\n      id\n      content\n      from {\n        id\n        username\n      }\n    }\n  }\n}`\n\ntype Message = {\n  id: string\n  content: string\n  createdAt: string\n  to: {\n    id: string\n    username: string\n  }\n  from: {\n    id: string\n    username: string\n  }\n}\n\ntype CreateMessageInput = {\n  input: {\n    toUsername: string\n    content: string\n  }\n}\n\ntype CreateMessagePayload = {\n  createMessage: {\n    message: Message\n  }\n}\n\nexport default function NewMessagePanel() {\n  const [messageToSend, setMessageToSend] = useState<string>('')\n  const [newUser, setNewUser] = useState<string>('')\n  const [\n    response, // eslint-disable-line\n    executeCreateMessage\n  ] = useMutation<CreateMessagePayload, CreateMessageInput>(createMessageMutation)\n\n  const sendMessage = () => {\n    if (!!messageToSend && !!newUser) {\n      executeCreateMessage({\n        input: {\n          content: messageToSend,\n          toUsername: newUser\n        }\n      }).then(() => {\n        window.location.href = `messages/${newUser}`\n      })\n    }\n  }\n\n  const submitOnCommandEnter = (e: any) => {\n    if (e.keyCode === 13 && e.metaKey) {\n      sendMessage()\n    }\n  }\n\n  return (\n    <section className={styles.messagePanel}>\n      <div>\n        Send a new message to:\n        <div>\n          <input\n            className={styles.sendBox}\n            placeholder=\"Enter username here\"\n            value={newUser}\n            onChange={e => setNewUser(e.target.value)}\n          />\n          <textarea\n            className={cx(styles.sendBox, styles.newMessageBox)}\n            value={messageToSend}\n            onChange={e => setMessageToSend(e.target.value)}\n            placeholder=\"Enter message here\"\n            onKeyDown={submitOnCommandEnter}\n          />\n        </div>\n        <button className={styles.submitButton} onClick={sendMessage}>Send</button>\n      </div>\n    </section>\n  )\n}\n","import React, { useState } from 'react';\nimport { Link, Redirect } from 'react-router-dom'\n\nimport { useQuery } from 'urql'\nimport styles from './styles.module.scss'\nimport useResponsive from 'utils/useResponsive'\nimport DisplayError from 'components/DisplayError'\nimport Loading from 'components/Loading'\nimport SidePanel from './SidePanel'\nimport MessagePanel from './MessagePanel'\nimport NewMessagePanel from './NewMessagePanel'\n\n\nconst currentUserQuery = `{\n  currentUser {\n    username\n  }\n}`\n\ntype CurrentUserQuery = {\n  currentUser?: {\n    username: string\n  }\n}\n\ntype Props = {\n  username?: string | null\n}\n\ntype State = {\n  newMessage: boolean\n}\n\nconst Messages: React.SFC<Props> = ({ username }) => {\n  const { isMobile, isDesktop } = useResponsive(450)\n  const [newMessage, setNewMessage] = useState<State['newMessage']>(false)\n  const [{ data, error, fetching }] = useQuery<CurrentUserQuery>({ query: currentUserQuery })\n\n  if (error) return <DisplayError error={error} />\n  if (fetching) return <Loading />\n\n  if (data && !data.currentUser) {\n    return <Redirect to=\"/signup\" />\n  } else if (data && data.currentUser && data.currentUser.username === username) {\n    return <Redirect to=\"/messages\" />\n  }\n\n  return (\n    <div className={styles.messages}>\n      <header className={styles.header}>\n        <h1>Message Console</h1>\n        {isMobile && (newMessage || username)\n          ? <Link to=\"/messages\" onClick={() => setNewMessage(false)}>{'< All Messages'}</Link>\n          : <Link to=\"/messages\" onClick={() => setNewMessage(true)}>New Message</Link>\n        }\n      </header>\n\n      <section className={styles.messagesSection}>\n        {isMobile && (\n          <div className={styles.mobileContainer}>\n            {username && <MessagePanel username={username} />}\n            {!username && newMessage && <NewMessagePanel />}\n            {!username && !newMessage && <SidePanel />}\n          </div>\n        )}\n\n        {isDesktop && (\n          <div className={styles.desktopContainer}>\n            <SidePanel />\n\n            {username && <MessagePanel username={username} />}\n            {!username && <NewMessagePanel />}\n\n          </div>\n        )}\n      </section>\n    </div>\n  )\n}\n\nexport default Messages\n","import * as React from 'react';\nimport { useQuery } from 'urql'\nimport { Link } from 'react-router-dom'\nimport styles from './styles.module.scss'\nimport useResponsive from 'utils/useResponsive'\nimport profanityFilter from 'utils/profanityFilter'\nimport partition from 'lodash/partition'\n\nimport DisplayError from 'components/DisplayError'\nimport Loading from 'components/Loading'\nimport AdContainer, { useAds } from '../AdContainer'\n\n\nconst threadQuery = `{\n  currentUser {\n    id\n  }\n  threads: threadsList (orderBy: [LATEST_POST_TIME_DESC]) {\n    id\n    title\n    latestPostTime\n    postStats: posts {\n      totalCount\n    }\n    posts: postsList (first: 1, orderBy: [CREATED_AT_DESC]) {\n      author {\n        username\n      }\n    }\n  }\n}`\n\ntype Thread = {\n  id: number,\n  title: string,\n  latestPostTime: string,\n  posts: Array<{ author: { username: string } }>\n  postStats: {\n    totalCount: number\n  }\n}\ntype ThreadQuery = {\n  threads: Array<Thread>\n  currentUser: null | {\n    id: string\n  }\n}\n\nconst ThreadPost = ({ thread }: { thread: Thread }) => {\n  const userName = thread.posts[0] && thread.posts[0].author.username\n  const title = profanityFilter(\n    thread.title.length > 297\n      ? thread.title.substring(0, 297) + '...'\n      : thread.title\n  )\n\n  return (\n    <article key={thread.id} className={styles.threadPost}>\n      <Link className={styles.postLink} to={`/threads/${thread.id}`}>{title}</Link>\n      <div className={styles.info}><strong>LAST POST:</strong> <time>[{thread.latestPostTime}]</time></div>\n      <div className={styles.info}><strong>by: </strong>\n        <Link to={`/users/${userName}`}>{userName}</Link>\n      </div>\n      <div className={styles.info}><strong>POSTS:</strong> {thread.postStats.totalCount}</div>\n    </article>\n  )\n}\n\nconst stickiedThreads = [1]\n\nconst Forum: React.SFC<{}> = () => {\n  const { isMobile, isDesktop } = useResponsive(540)\n  const [{ fetching, error, data }] = useQuery<ThreadQuery>({ query: threadQuery })\n  const { ads, fetchingAds } = useAds(4)\n  const showMobileAd = (i: number) => {\n    const adFreq = 4\n    if (!isMobile) return false\n    if ((i + 1) % adFreq) return false\n\n    const adIx = (((i + 1) / adFreq) - 1) % ads.length\n\n    return (\n      <div className={styles.adContainer}>\n        <AdContainer ads={[ads[adIx]]} fetching={fetchingAds} />\n      </div>\n    )\n  }\n\n  const partitioned:[Array<Thread>, Array<Thread>] = data && data.threads\n    ? partition(data.threads, thread => stickiedThreads.includes(thread.id))\n    : [[], []]\n\n\n  return (\n    <section className={styles.forum}>\n      <section className={styles.left}>\n        {fetching && <Loading />}\n        {error && <DisplayError error={error} />}\n        {data && (\n          <>\n            {data.currentUser &&\n              <div className={styles.quickLinks}>\n                <strong>quick links:</strong>{' '}\n                <Link to=\"/messages\">Messages</Link>{', '}\n                <Link to=\"/profile\">Update Profile</Link>{', '}\n                <Link to=\"/stats\">Stats</Link>\n              </div>\n            }\n            <header className={styles.header}>\n              <h1>Forum</h1>\n              <Link to=\"/threads/new\" className={styles.startThread}>\n                Start A Thread!\n              </Link>\n            </header>\n            <div style={{ border: '1px dashed', padding: '3px', paddingBottom: 0, marginBottom: '10px'}}>\n              <ThreadPost thread={partitioned[0][0]} />\n            </div>\n            {partitioned[1].length && partitioned[1].map((thread, i) =>\n              <React.Fragment key={thread.id}>\n                {showMobileAd(i)}\n                <ThreadPost thread={thread} />\n              </React.Fragment>\n            )}\n          </>\n        )}\n      </section>\n      {isDesktop && <AdContainer ads={ads} fetching={fetchingAds}/>}\n    </section>\n\n  )\n}\n\nexport default Forum\n","import React from 'react';\nimport { useQuery } from 'urql'\nimport { Link } from 'react-router-dom'\n\nimport DisplayError from 'components/DisplayError'\nimport Loading from 'components/Loading'\nimport styles from './styles.module.scss'\n\n\nconst statsQuery = `{\n  userStatsList {\n    username\n    postCount\n  }\n  userAdClicksList {\n    username\n    adClicks\n  }\n}`\n\ntype StatsQuery = {\n  userStatsList: Array<{\n    username: string\n    postCount: string\n  }>\n  userAdClicksList: Array<{\n    username: string\n    adClicks: string\n  }>\n}\n\n\n\nfunction Stats() {\n  const [{ error, fetching, data }] = useQuery<StatsQuery>({ query: statsQuery })\n\n  if (error) {\n    debugger\n    return <DisplayError error={error} />\n  }\n  if (fetching) return <Loading />\n  if (!data) return null\n\n  return (\n    <section className={styles.stats}>\n      <h1>User Stats</h1>\n      <div className={styles.sectionContainer}>\n        <div className={styles.statSection}>\n          <h2>Top Posters:</h2>\n          <table>\n            <thead>\n              <tr>\n                <th></th>\n                <th>Username</th>\n                <th>Posts</th>\n              </tr>\n            </thead>\n            <tbody>\n              {data.userStatsList.map((stat, i) => (\n                <tr key={i}>\n                  <td>{i + 1}.</td>\n                  <td>\n                    <Link to={`/users/${stat.username}`}>{stat.username}</Link>\n                  </td>\n                  <td>{stat.postCount}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n        <div className={styles.statSection}>\n          <h2>Sponsored Content Engagements:</h2>\n          <table>\n            <thead>\n              <tr>\n                <th></th>\n                <th>Username</th>\n                <th>Engagements</th>\n              </tr>\n            </thead>\n            <tbody>\n              {data.userAdClicksList.map((stat, i) => (\n                <tr key={i}>\n                  <td>{i + 1}.</td>\n                  <td>\n                    <Link to={`/users/${stat.username}`}>{stat.username}</Link>\n                  </td>\n                  <td>{stat.adClicks}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </section>\n  )\n}\n\nexport default Stats\n","import React from 'react';\nimport { Link } from 'react-router-dom'\nimport styles from './styles.module.scss'\n\n\nfunction Onboarding() {\n  return (\n    <section className={styles.onboarding}>\n      <div className={styles.card}>\n        <h1>Welcome to Friendworld!</h1>\n        <p>Thanks for signing up! Please fill out your profile so everyone knows what you're all about!</p>\n        <Link to=\"/profile\">Click here to update your profile</Link>\n        <p>Or, hit the forums now and fill out your profile later :)</p>\n        <Link to=\"/\">Click here to go to the forum</Link>\n      </div>\n    </section>\n  )\n}\n\nexport default Onboarding\n","import React from 'react'\n\nimport { useQuery } from 'urql'\nimport Ad from 'components/Ad'\nimport DisplayError from 'components/DisplayError'\nimport Loading from 'components/Loading'\n\nconst adQuery = `{\n  stats: ads {\n    totalCount\n  }\n  ads: adsList {\n    id\n    url\n    img\n    content\n    tags\n    isGeneric\n    weight\n    targetTags\n    primaryTags\n  }\n}`\n\nfunction DevAds() {\n  const [{ data, fetching, error }] = useQuery({ query: adQuery })\n  if (process.env.NODE_ENV !== 'development') return 'ads'\n  if (error) return <DisplayError error={error} />\n  if (fetching) return <Loading />\n  if (!data) return 'no data'\n\n  return (\n    <div>\n      <h1>Total Ads: {data.stats.totalCount}</h1>\n      {data.ads.map((ad: any) =>\n        <div key={ad.id} style={{ border: '1px solid', padding: '5px', margin: '10px' }}>\n          <div style={{ maxWidth: '400px' }}>\n            <Ad {...ad} />\n          </div>\n          <pre>{JSON.stringify(ad, null, 3)}</pre>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default DevAds\n","import * as React from 'react'\nimport { withRouter, Route, Switch } from 'react-router-dom'\nimport { RouteComponentProps } from 'react-router'\n\nimport Body, { Width } from 'components/Body'\nimport Nav from 'containers/Nav'\nimport Login from 'containers/Login'\nimport Signup from 'containers/Signup'\nimport Posts from 'containers/Posts'\nimport Threads from 'containers/Threads'\nimport NewThread from 'containers/NewThread'\n\nimport Profile from 'containers/Profile'\nimport User from 'containers/User'\nimport Messages from 'containers/Messages'\nimport Forum from 'containers/Forum'\nimport Stats from 'containers/Stats'\nimport Onboarding from 'containers/Onboarding'\nimport DevAds from 'containers/DevAds'\n\n\nclass App extends React.Component<RouteComponentProps> {\n  componentDidUpdate(prevProps: RouteComponentProps) {\n    if (this.props.location !== prevProps.location) {\n      window.scrollTo(0, 0)\n    }\n  }\n\n  render() {\n    return (\n      <main className=\"App\">\n        <Route path=\"/\" component={Nav} />\n\n        <Body>\n          <Switch>\n            <Route exact path=\"/\" component={Forum} />\n            <Route exact path=\"/threads/new\" component={NewThread} />\n\n            <Route exact path=\"/threads/:id\" render={({ match }) =>\n              <Threads id={Number(match.params.id)} />\n            }/>\n\n            <Route exact path=\"/messages\" render={({ match }) =>\n              <Messages />\n            }/>\n\n            <Route path=\"/messages/:username\" render={({ match }) =>\n              <Messages username={match.params.username} />\n            }/>\n\n\n            <Route path=\"/posts/:id\" render={({ match }) =>\n              <Posts id={Number(match.params.id)} />\n            }/>\n\n            <Route path=\"/users/:username\" render={({ match }) =>\n              <User username={match.params.username} />\n            }/>\n\n            <Route exact path=\"/login\" component={Login} />\n            <Route exact path=\"/signup\" component={Signup} />\n            <Route exact path=\"/profile\" component={Profile} />\n            <Route exact path=\"/stats\" component={Stats} />\n            <Route exact path=\"/onboarding\" component={Onboarding} />\n            <Route exact path=\"/dev/ads\" component={(DevAds as any)} />\n\n          </Switch>\n        </Body>\n\n        <footer style={{ fontSize: '11px', padding: '10px 0'}}>\n          <Width>(c) 2019 FriendWorld.social</Width>\n        </footer>\n      </main>\n    )\n  }\n}\n\n\n\n\nexport default withRouter(App)\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { Provider, createClient } from 'urql';\nimport App from './App';\nimport jwt from './utils/jwt'\n\njwt.setTrackingToken()\n\nconst isProd = process.env.NODE_ENV === 'production'\nconst client = createClient({\n  url: isProd\n    ? 'https://friendworld.appspot.com/graphql'\n    : 'http://localhost:5000/graphql',\n  fetchOptions: () => {\n    const jwtToken = jwt.get()\n    if (jwtToken) {\n      return {\n        headers: {\n          Authorization: `Bearer ${jwtToken}`,\n          trackingToken: jwt.getTrackingToken() || ''\n        }\n      }\n    } else {\n      return {\n        headers: {\n          trackingToken: jwt.getTrackingToken() || ''\n        } as any\n      }\n    }\n  }\n})\n\nconst hours = new Date().getHours();\nif (hours < 5 || hours >= 22) document.body.className = 'nightmode';\n\nReactDOM.render(\n  (\n    <Provider value={client}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>\n  ),\n  document.getElementById('root')\n );\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"signup\":\"styles_signup__1TBgB\",\"card\":\"styles_card__2i6Va\",\"inputs\":\"styles_inputs__2-zI-\",\"submitButton\":\"styles_submitButton__1RQ0F\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1c7gy\",\"inner\":\"styles_inner__2Y1v5\",\"contentInput\":\"styles_contentInput__1FYQK\",\"submitButton\":\"styles_submitButton__F4S4o\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"stats\":\"styles_stats__AKzjd\",\"statSection\":\"styles_statSection__2sbUJ\",\"sectionContainer\":\"styles_sectionContainer__2Iauo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"styles_header__kQFtS\",\"memberSince\":\"styles_memberSince__6_eN_\",\"content\":\"styles_content__2k8HI\",\"left\":\"styles_left__3RLgw\",\"right\":\"styles_right__1wvr3\",\"avatar\":\"styles_avatar__up-xt\",\"subheader\":\"styles_subheader__2yCNY\",\"postContainer\":\"styles_postContainer__8sWw_\",\"recentPosts\":\"styles_recentPosts__2pfm9\",\"inputSection\":\"styles_inputSection__3flum\",\"contentInput\":\"styles_contentInput__1yKr9\",\"submitButton\":\"styles_submitButton__qntJH\",\"profile\":\"styles_profile__CnGcI\",\"buttonContainer\":\"styles_buttonContainer__21qge\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"styles_login__1bddG\",\"card\":\"styles_card__342W-\",\"submitButton\":\"styles_submitButton__3gLIc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"adContainer\":\"styles_adContainer__lMNuW\",\"label\":\"styles_label__2MmNX\",\"adWrapper\":\"styles_adWrapper__7ikg8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3ZrW4\",\"content\":\"styles_content__mkpSL\",\"title\":\"styles_title__g_H6k\",\"links\":\"styles_links__1lT-N\",\"link\":\"styles_link__2r07p\",\"user\":\"styles_user__KXrwW\",\"circle\":\"styles_circle__3a6lQ\",\"label\":\"styles_label__3nbc0\",\"unread\":\"styles_unread__39lvg\",\"unread1\":\"styles_unread1__1t29L\",\"Unread\":\"styles_Unread__20_Xf\",\"unread2\":\"styles_unread2__1gjma\",\"unread3\":\"styles_unread3__2odvK\",\"Rotate\":\"styles_Rotate__Jr-hj\",\"unread4\":\"styles_unread4__2qCGs\",\"Breathe\":\"styles_Breathe__TeGmQ\",\"dropdownPosition\":\"styles_dropdownPosition__RvAKI\",\"dropdown\":\"styles_dropdown__3tTva\",\"alert\":\"styles_alert__2nkwt\",\"alertDropdown\":\"styles_alertDropdown__28W3J\",\"noAlerts\":\"styles_noAlerts__aWfQ5\",\"userDropdown\":\"styles_userDropdown__3RMMv\",\"switchAccounts\":\"styles_switchAccounts__3Okr5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"width\":\"styles_width__2uPjX\",\"body\":\"styles_body__3rj8V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"back\":\"styles_back__3PY0I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ad\":\"styles_ad__tC5Qg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"onboarding\":\"styles_onboarding__3XU1K\",\"card\":\"styles_card__PWU0O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"styles_header__hU_hQ\",\"messagesSection\":\"styles_messagesSection__2TjQW\",\"mobileContainer\":\"styles_mobileContainer__2EvvN\",\"desktopContainer\":\"styles_desktopContainer__hT0b1\",\"messagePanel\":\"styles_messagePanel__3ea8x\",\"sentMessages\":\"styles_sentMessages__-5hBn\",\"newMessageBox\":\"styles_newMessageBox__151Oc\",\"sendBox\":\"styles_sendBox__2qRGc\",\"submitButton\":\"styles_submitButton__3lvS8\",\"message\":\"styles_message__Ok6NK\",\"sender\":\"styles_sender__2ZGF9\",\"sidePanelContainer\":\"styles_sidePanelContainer__3Z_GC\",\"emptyUsers\":\"styles_emptyUsers__2F5wl\",\"sidePanel\":\"styles_sidePanel__2cb8A\",\"user\":\"styles_user__3s6J6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"x\":\"styles_x__2XNkA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"img\":\"styles_img__2wl0K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"styles_error__30xW5\"};"],"sourceRoot":""}