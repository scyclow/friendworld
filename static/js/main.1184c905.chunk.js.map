{"version":3,"sources":["containers/User/styles.module.scss","components/Post/styles.module.scss","containers/Threads/styles.module.scss","containers/Forum/styles.module.scss","containers/NewThread/styles.module.scss","components/Body/index.tsx","utils/useResponsive.ts","utils/useInterval.ts","components/X/index.tsx","utils/keywords.ts","utils/parsers.ts","components/Img/index.tsx","utils/profanityFilter.ts","components/ParsedText.tsx","containers/Nav/Alerts.tsx","utils/jwt.ts","containers/Nav/User.tsx","containers/Nav/Dropdown.tsx","containers/Nav/index.tsx","components/DisplayError/index.tsx","components/Loading/index.tsx","containers/Login/index.tsx","containers/Signup/index.tsx","components/Post/index.tsx","containers/Posts/index.tsx","components/Ad/index.tsx","containers/AdContainer/index.tsx","components/TextInput/index.tsx","containers/Threads/index.tsx","containers/NewThread/index.tsx","containers/Profile/index.tsx","containers/User/index.tsx","containers/Messages/SidePanel.tsx","containers/Messages/MessagePanel.tsx","containers/Messages/NewMessagePanel.tsx","containers/Messages/index.tsx","containers/Forum/index.tsx","containers/Stats/index.tsx","containers/Onboarding/index.tsx","containers/DevAds/index.tsx","App.tsx","index.tsx","containers/Signup/styles.module.scss","components/TextInput/styles.module.scss","containers/Stats/styles.module.scss","containers/Profile/styles.module.scss","containers/Login/styles.module.scss","containers/AdContainer/styles.module.scss","containers/Nav/styles.module.scss","components/Body/styles.module.css","containers/Posts/styles.module.scss","components/Ad/styles.module.scss","containers/Onboarding/styles.module.scss","containers/Messages/styles.module.scss","components/X/styles.module.scss","components/Img/styles.module.scss","components/DisplayError/styles.module.scss"],"names":["module","exports","header","profile","intro","memberSince","sendMessage","content","left","right","avatar","postContainer","recentPosts","infoSection","uuid","post","threadLink","username","totalPosts","main","panel","panelContainer","userInfo","footer","postedAt","threadTitle","signup","disabled","back","addPost","adContainer","ad","threadContainer","startThread","quickLinks","info","threadPost","postLink","forum","input","sectionTitle","label","Width","_ref","children","props","Object","objectWithoutProperties","react","assign","className","styles","width","Body","_ref2","body","Body_Width","getSize","innerHeight","window","innerWidth","setEventListener","event","handler","addEventListener","removeEventListener","useResponsive","mobileWidth","_useState","useState","_useState2","slicedToArray","isMobile","setIsMobile","useEffect","wasMobile","isNowMobile","isDesktop","useInterval","callback","delay","savedCallback","useRef","current","id","setInterval","clearInterval","ringStyles","border","borderRadius","X","onClick","ring","x","style","gender","male","female","other","keywords","Set","concat","toConsumableArray","externalLinkTest","imageTest","userTest","hashtagTest","postTest","threadTest","isUsername","str","cleanFragment","match","isHashtag","isKeyword","has","toLowerCase","getUsernames","split","filter","map","f","getKeywords","getTags","tags","JSON","stringify","usernames","fragment","test","replace","RegExp","Img","url","alt","img","src","profanityFilter","each","motherfucker","fuck","shit"," dick ","bitch","cunt","cocksuck","cock","nigger","nigga"," fag ","faggot","tranny"," god ","goddamn","pussy","replaceTo","replaceFrom","imgStyle","maxHeight","parseFragment","isExternalLink","href","target","rel","userId","dirt","Link","to","hashtag","isPostRef","postId","isThreadRef","threadId","combineFragments","fragments","length","arr","lastFragment","slice","addIndex","i","key","parser","paragraph","reduce","ParsedText","Alerts","alerts","readAlert","react_default","a","createElement","Fragment","alert","components_X","link","AlertDropdown","onEmptyClick","alertDropdown","Alerts_Alerts","noAlerts","AlertCircle","_ref3","_cx","unread","cx","circle","defineProperty","unread1","unread2","unread3","unread4","JWT","getMapping","stored","localStorage","getItem","parse","__currentUser__","mapping","steve_p","setItem","Steve_p","getTrackingToken","jwt","get","getCurrentUser","getInnactiveUserList","keys","setTrackingToken","existingToken","token","Date","now","Math","random","e","console","log","set","setCurrentUser","clearCurrentUser","logout","location","reload","UserDropdown","alternativeUsers","currentUser","__JWT__","userDropdown","switchAccounts","switchUser","ELEMENT_ID","Dropdown","hide","hideDropdown","dropdown","document","getElementById","contains","currentUserQuery","readAlertMutation","NavBar","toggleDropdownVisible","loading","title","links","Nav_SignedInMenu","Nav_SignedOutMenu","SignedInMenu","_useResponsive","maxWidth","overflow","user","backgroundImage","avatarUrl","Alerts_AlertCircle","SignedOutMenu","Nav","dropdownState","setDropdownState","_useQuery","useQuery","query","_useQuery2","_useQuery2$","data","fetching","executeQuery","_useMutation","useMutation","_useMutation2","executeReadAlert","history","listen","hidden","requestPolicy","container","Nav_NavBar","dropdownPosition","User_UserDropdown","Alerts_AlertDropdown","alertId","DisplayError","error","Loading","dots","setDots","interval","loginMutation","Login","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","errorText","setErrorText","_useMutation2$","executeLogin","useMemo","login","jwtToken","card","components_DisplayError","components_Loading","name","placeholder","value","onChange","type","submitButton","preventDefault","signupMutation","Signup","passwordConfirm","setPasswordConfirm","_useState7","_useState8","executeSignup","displayErrorText","message","includes","inputs","Post","author","postStats","totalCount","createdAt","toISOString","thread","postQuery","Posts","variables","components_Post","Ad","noop","safeParse","obj","isObject","adQuery","useAds","n","arguments","undefined","ads","parsedAds","objectSpread","primaryTags","targetTags","trackingInfo","profileTags","allAds","viableAds","isGeneric","primaryAds","some","sampleSize","secondaryAds","shuffle","taggedAds","targetAds","remainingAds","filterAds","fetchingAds","AdContainer","executeLogAdClick","adWrapper","components_Ad","setTimeout","defaultPlaceholder","TextInput","buttonContent","inputStyle","onSubmit","setContent","submit","inner","contentInput","onKeyDown","keyCode","metaKey","threadQuery","AddPost","executeCreatePost","components_TextInput","_getTags","stickiedThreads","Threads","_useAds","posts","flatMap","p","isError","isLoading","isData","adIx","containers_AdContainer","showMobileAd","Threads_AddPost","NewThread","setTitle","response","executeCreateThread","createThread","newThread","height","toString","userProps","updateUserMutation","Profile","ProfileContent","goto","push","Redirect","getTrackingInfo","fields","genderWords","intersection","getGender","bio","job","interests","media","religion","politics","join","validDate","dateStr","validEmail","emailStr","wait","ms","Promise","res","setAvatarUrl","email","setEmail","setGender","birthday","setBirthday","_useState9","_useState10","setBio","_useState11","_useState12","setJob","_useState13","_useState14","setInterests","_useState15","websites","_useState16","setWebsites","_useState17","_useState18","setMedia","_useState19","_useState20","setReligion","_useState21","_useState22","setPolitics","_useState23","_useState24","submitted","setSubmitted","_useState25","_useState26","isFakeLoading","setIsFakeLoading","executeUpdateUser","bdayError","emailError","subheader","updateUser","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","all","stop","apply","this","buttonContainer","inputSection","InfoSection","User","margin","textAlign","date","toLocaleString","weekday","year","month","day","hour","minute","second","adClicks","User_InfoSection","messagesDataQuery","collectMessages","messages","_createdAt","uniqueSortedUsers","messageData","sent","received","Map","values","Array","from","entries","orderBy","reverse","m","SidePanel","messageNames","sidePanelContainer","sidePanel","emptyUsers","requestedUserQuery","createMessageMutation","MessagePanel","$sentMessages","messageToSend","setMessageToSend","executeCreateMessage","memoized","requestedUser","scrollTop","scrollHeight","collectedMessages","sentMessages","sender","messagePanel","ref","sendBox","onKeyPress","toUsername","NewMessagePanel","newUser","setNewUser","then","newMessageBox","Messages","newMessage","setNewMessage","messagesSection","mobileContainer","desktopContainer","ThreadPost","userName","substring","latestPostTime","Forum","partitioned","threads","partition","padding","paddingBottom","marginBottom","Forum_ThreadPost","statsQuery","Stats","stats","sectionContainer","statSection","userStatsList","stat","postCount","userAdClicksList","Onboarding","onboarding","DevAds","App","prevProps","scrollTo","Route","path","component","components_Body","Switch","exact","render","containers_Threads","Number","params","containers_Messages","_ref4","containers_Posts","_ref5","containers_User","fontSize","React","withRouter","client","createClient","fetchOptions","headers","Authorization","trackingToken","hours","getHours","ReactDOM","urql_es","BrowserRouter","src_App","Unread","Rotate","Breathe"],"mappings":"4EACAA,EAAAC,QAAA,CAAkBC,OAAA,uBAAAC,QAAA,wBAAAC,MAAA,sBAAAC,YAAA,4BAAAC,YAAA,4BAAAC,QAAA,wBAAAC,KAAA,qBAAAC,MAAA,sBAAAC,OAAA,uBAAAC,cAAA,8BAAAC,YAAA,4BAAAC,YAAA,4BAAAC,KAAA,gECAlBd,EAAAC,QAAA,CAAkBc,KAAA,qBAAAL,OAAA,uBAAAR,OAAA,uBAAAc,WAAA,2BAAAC,SAAA,yBAAAC,WAAA,2BAAAC,KAAA,qBAAAC,MAAA,sBAAAC,eAAA,+BAAAC,SAAA,yBAAAf,QAAA,wBAAAgB,OAAA,uBAAAC,SAAA,8CCAlBxB,EAAAC,QAAA,CAAkBwB,YAAA,4BAAAC,OAAA,uBAAAC,SAAA,yBAAAnB,KAAA,qBAAAoB,KAAA,qBAAAZ,WAAA,2BAAAa,QAAA,wBAAAC,YAAA,4BAAAC,GAAA,mBAAAC,gBAAA,qDCAlBhC,EAAAC,QAAA,CAAkBC,OAAA,uBAAA+B,YAAA,4BAAAC,WAAA,2BAAAC,KAAA,qBAAAC,WAAA,2BAAAC,SAAA,yBAAAC,MAAA,sBAAAR,YAAA,4BAAAtB,KAAA,0CCAlBR,EAAAC,QAAA,CAAkB2B,KAAA,qBAAAW,MAAA,sBAAAC,aAAA,6BAAAC,MAAA,sBAAAf,OAAA,uBAAAC,SAAA,6NCOLe,EAA0B,SAAAC,GAAA,IAAGC,EAAHD,EAAGC,SAAaC,EAAhBC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,qBACrCK,EAAA,oBAAAF,OAAAG,OAAA,CAAKC,UAAWC,IAAOC,OAAWP,GAC/BD,IAUUS,EANgB,SAAAC,GAAA,IAAGV,EAAHU,EAAGV,SAAH,OAC7BI,EAAA,qBAAKE,UAAWC,IAAOI,MACrBP,EAAA,cAACQ,EAAD,KAAQZ,sCCTNa,EAAU,iBAAmB,CACjCC,YAAaC,OAAOD,YACpBE,WAAYD,OAAOC,aAIfC,EAAmB,SAACC,EAAeC,GAAhB,OAAmC,WAE1D,OADAJ,OAAOK,iBAAiBF,EAAOC,GACxB,kBAAMJ,OAAOM,oBAAoBH,EAAOC,MAIlC,SAASG,EAAcC,GAAqB,IAAAC,EACzBC,mBAAkBZ,IAAUG,YAAcO,GADjBG,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAAsB,EAAA,GAClDI,EADkDF,EAAA,GACxCG,EADwCH,EAAA,GAWzD,OARAI,oBAAUb,EAAiB,SAAU,WACnC,IAAMc,EAAYH,EACZI,EAAcnB,IAAUG,YAAcO,EACxCQ,IAAcC,GAChBH,EAAYG,MAIT,CACLJ,WACAK,WAAYL,GC9BD,SAASM,EAAYC,EAAoBC,GACtD,IAAMC,EAAgBC,iBAAY,MAGlCR,oBAAU,WACRO,EAAcE,QAAUJ,GACvB,CAACA,IAGJL,oBAAU,WAIR,GAAc,OAAVM,EAAgB,CAClB,IAAII,EAAKC,YAJX,WACEJ,EAAcE,WAGaH,GAC3B,OAAO,kBAAMM,cAAcF,MAE5B,CAACJ,iDCXAO,EAAa,CAAEC,OAAQ,YAAaC,aAAc,QAWzCC,EAVc,SAAA/C,GAAA,IAAGgD,EAAHhD,EAAGgD,QAASC,EAAZjD,EAAYiD,KAAZ,OAC3B5C,EAAA,sBACEE,UAAWC,IAAO0C,EAClBC,MAAOF,EAAOL,EAAa,GAC3BI,QAASA,GAHX,aC0JWI,EAAS,CACpBC,KAAM,CACJ,MACA,OACA,IACA,MACA,MACA,IACA,OACA,MACA,QACA,OACA,QAEFC,OAAQ,CACN,QACA,SACA,IACA,OACA,IACA,MACA,QACA,QACA,UAEFC,MAAO,CACL,cACA,aACA,QACA,IACA,iBACA,gBACA,cACA,UACA,gBAMWC,EAAA,IAAIC,IAAJ,GAAAC,OA5MS,CACtB,WACA,oBACA,uBACA,mBACA,aACA,QACA,OACA,OACA,QACA,OACA,SACA,SACA,UACA,SACA,iBACA,UACA,MACA,WACA,MACA,SACA,YACA,UACA,MACA,UACA,cACA,cACA,aACA,UACA,UACA,QACA,UAGiB,CACjB,MACA,SACA,eACA,MACA,SACA,UACA,QACA,aACA,UACA,QACA,SACA,WACA,SACA,UACA,YACA,SACA,QACA,UACA,QACA,SACA,YACA,UAG0B,CAC1B,MACA,YACA,aACA,UACA,UACA,aACA,YACA,aACA,QACA,SACA,QACA,UACA,WACA,MACA,WACA,SACA,OACA,YACA,MACA,kBAGsB,CACtB,WACA,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","file":"static/js/main.1184c905.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"styles_header__2wLxh\",\"profile\":\"styles_profile__31rzl\",\"intro\":\"styles_intro__1X3Y3\",\"memberSince\":\"styles_memberSince__1jhAK\",\"sendMessage\":\"styles_sendMessage__3284j\",\"content\":\"styles_content__1_9jW\",\"left\":\"styles_left__vhBr7\",\"right\":\"styles_right__1-xIl\",\"avatar\":\"styles_avatar__1sUtC\",\"postContainer\":\"styles_postContainer__35feo\",\"recentPosts\":\"styles_recentPosts__1aAFm\",\"infoSection\":\"styles_infoSection__2k3k7\",\"uuid\":\"styles_uuid__36WGZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"post\":\"styles_post__2wjTj\",\"avatar\":\"styles_avatar__2GJc8\",\"header\":\"styles_header__19BhD\",\"threadLink\":\"styles_threadLink__3x7tb\",\"username\":\"styles_username__2fJ1r\",\"totalPosts\":\"styles_totalPosts__1YOIB\",\"main\":\"styles_main__TKFmC\",\"panel\":\"styles_panel__3ULdb\",\"panelContainer\":\"styles_panelContainer__2nRTc\",\"userInfo\":\"styles_userInfo__3SK-L\",\"content\":\"styles_content__2Ru5-\",\"footer\":\"styles_footer__dMb2p\",\"postedAt\":\"styles_postedAt__9cLJi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"threadTitle\":\"styles_threadTitle__nzF4M\",\"signup\":\"styles_signup__2AxnY\",\"disabled\":\"styles_disabled__1TmJj\",\"left\":\"styles_left__1P-Yx\",\"back\":\"styles_back__2jFxT\",\"threadLink\":\"styles_threadLink__1hkCr\",\"addPost\":\"styles_addPost__1-izz\",\"adContainer\":\"styles_adContainer__2ZcDv\",\"ad\":\"styles_ad__36g-4\",\"threadContainer\":\"styles_threadContainer__22gH-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"styles_header__VUeZN\",\"startThread\":\"styles_startThread__2DdKA\",\"quickLinks\":\"styles_quickLinks__cJQge\",\"info\":\"styles_info__2f1QB\",\"threadPost\":\"styles_threadPost__3SWHg\",\"postLink\":\"styles_postLink__2yHjb\",\"forum\":\"styles_forum__AVThT\",\"adContainer\":\"styles_adContainer__3zUCc\",\"left\":\"styles_left__2_RIC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"back\":\"styles_back__3iTuS\",\"input\":\"styles_input__rHUWj\",\"sectionTitle\":\"styles_sectionTitle__2wqKD\",\"label\":\"styles_label___0hEN\",\"signup\":\"styles_signup__34diQ\",\"disabled\":\"styles_disabled__3WJTC\"};","import * as React from 'react';\nimport styles from './styles.module.css';\n\ninterface Props {\n  children: any,\n  [prop: string]: any\n}\n\nexport const Width: React.SFC<Props> = ({ children, ...props }) => (\n  <div className={styles.width} {...props}>\n    {children}\n  </div>\n)\n\nconst Body: React.SFC<Props> = ({ children }) => (\n  <div className={styles.body}>\n    <Width>{children}</Width>\n  </div>\n)\n\nexport default Body\n\n","import { useState, useEffect } from 'react'\n\ntype WindowSize = {\n  innerHeight: number\n  innerWidth: number\n}\n\nconst getSize = (): WindowSize => ({\n  innerHeight: window.innerHeight,\n  innerWidth: window.innerWidth,\n})\n\ntype AnyFn = (a: any) => any\nconst setEventListener = (event: string, handler: AnyFn) => () => {\n  window.addEventListener(event, handler)\n  return () => window.removeEventListener(event, handler)\n}\n\n\nexport default function useResponsive(mobileWidth: number) {\n  const [isMobile, setIsMobile] = useState<boolean>(getSize().innerWidth <= mobileWidth)\n\n  useEffect(setEventListener('resize', () => {\n    const wasMobile = isMobile\n    const isNowMobile = getSize().innerWidth <= mobileWidth\n    if (wasMobile !== isNowMobile) {\n      setIsMobile(isNowMobile)\n    }\n  }))\n\n  return {\n    isMobile,\n    isDesktop: !isMobile\n  }\n}\n","import { useRef, useEffect } from 'react';\n\nexport default function useInterval(callback: Function, delay: number) {\n  const savedCallback = useRef<any>(null)\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n","import * as React from 'react';\nimport styles from './styles.module.scss';\n\ntype XProps = {\n  onClick?: any,\n  ring?: boolean\n}\n\nconst ringStyles = { border: '1px solid', borderRadius: '100%' }\nconst X: React.SFC<XProps> = ({ onClick, ring }) => (\n  <span\n    className={styles.x}\n    style={ring ? ringStyles : {}}\n    onClick={onClick}\n  >\n    x\n  </span>\n)\n\nexport default X\n","export const fastcash = [\n  \"fastcash\",\n  \"fastcashmoneyplus\",\n  \"fastcashmoneyplusbiz\",\n  \"fastcashmoneybiz\",\n  \"moneybucks\",\n  \"bucks\",\n  \"fast\",\n  \"cash\",\n  \"money\",\n  \"rich\",\n  \"wealth\",\n  \"saving\",\n  \"savings\",\n  \"crypto\",\n  \"cryptocurrency\",\n  \"bitcoin\",\n  \"btc\",\n  \"ethereum\",\n  \"eth\",\n  \"invest\",\n  \"investing\",\n  \"finance\",\n  \"ico\",\n  \"fortune\",\n  \"millionaire\",\n  \"billionaire\",\n  \"blockchain\",\n  \"economy\",\n  \"payment\",\n  \"trick\",\n  \"profit\",\n]\n\nexport const woo = [\n  \"woo\",\n  \"spirit\",\n  \"spirituality\",\n  \"god\",\n  \"chakra\",\n  \"chakras\",\n  \"sound\",\n  \"meditation\",\n  \"reality\",\n  \"dream\",\n  \"dreams\",\n  \"hypnosis\",\n  \"mantra\",\n  \"mantras\",\n  \"technique\",\n  \"energy\",\n  \"karma\",\n  \"cleanse\",\n  \"vegan\",\n  \"ascend\",\n  \"ascension\",\n  \"newage\",\n]\n\nexport const mentalHealth = [\n  \"sad\",\n  \"depressed\",\n  \"melencholy\",\n  \"anxious\",\n  \"anxiety\",\n  \"depression\",\n  \"anhedonia\",\n  \"motivation\",\n  \"happy\",\n  \"mental\",\n  \"brain\",\n  \"suicide\",\n  \"suicidal\",\n  \"ocd\",\n  \"obsessed\",\n  \"scared\",\n  \"fear\",\n  \"emptiness\",\n  \"cbd\",\n  \"antidepressant\"\n]\n\nexport const politics = [\n  \"politics\",\n  \"political\",\n  \"government\",\n  \"taxes\",\n  \"democrats\",\n  \"republicans\",\n  \"gop\",\n  \"liberal\",\n  \"liberals\",\n  \"conservative\",\n  \"conservatives\",\n  \"libtards\",\n  \"cucks\",\n  \"cuck\",\n  \"trump\",\n  \"clinton\",\n  \"jews\",\n  \"rockefellers\",\n  \"jfk\",\n  \"fascism\",\n  \"fascist\",\n  \"socialist\",\n  \"socialism\",\n  \"abortion\",\n  \"guns\",\n  \"shillary\",\n  \"sjw\",\n  \"sjws\",\n  \"social\",\n  \"justice\",\n  \"warriors\",\n  \"global\",\n  \"china\",\n  \"russia\",\n  \"fakebullshit\",\n  \"fakebullshitnews\",\n]\n\nexport const conspiracy = [\n  \"ti\",\n  \"targeted\",\n  \"target\",\n  \"tracking\",\n  \"conspiracy\",\n  \"nuclear\",\n  \"drone\",\n  \"5g\",\n  \"radiation\",\n  \"alien\",\n  \"aliens\",\n  \"ufo\",\n  \"ufos\",\n  \"roswell\",\n  \"brain\",\n  \"mind-control\",\n  \"chemtrails\",\n  \"tracking\",\n\n]\n\nexport const general = [\n  \"achieve\",\n  \"love\",\n  \"sex\",\n  \"greed\",\n  \"power\",\n  \"pizza\",\n  \"hammers\",\n  \"soap\",\n  \"puppies\",\n  \"cats\",\n  \"friendworld\",\n  \"friendworldsocial\",\n  \"trains\",\n  \"subway\",\n  \"food\",\n  \"candy\",\n  \"family\"\n\n]\n\nexport const gender = {\n  male: [\n    'man',\n    'male',\n    'm',\n    'boy',\n    'guy',\n    'b',\n    'dude',\n    'bro',\n    'penis',\n    'dick',\n    'cock',\n  ],\n  female: [\n    'woman',\n    'female',\n    'f',\n    'girl',\n    'g',\n    'gal',\n    'broad',\n    'bitch',\n    'vagina'\n  ],\n  other: [\n    'transgender',\n    'transexual',\n    'trans',\n    't',\n    'transmasculine',\n    'transfeminine',\n    'intergender',\n    'agender',\n    'androgynous'\n  ]\n}\n\nconst imFuckingLazy = [\"fastcash\",\"fastcashmoneyplus\",\"fastcashmoneyplusbiz\",\"fastcashmoneybiz\",\"moneybucks\",\"bucks\",\"fast\",\"cash\",\"money\",\"rich\",\"wealth\",\"saving\",\"savings\",\"crypto\",\"cryptocurrency\",\"bitcoin\",\"btc\",\"ethereum\",\"eth\",\"invest\",\"investing\",\"finance\",\"ico\",\"fortune\",\"millionaire\",\"billionaire\",\"blockchain\",\"economy\",\"payment\",\"trick\",\"profit\",\"throwing\",\"economic\",\"explosion\",\"market\",\"comfort\",\"home\",\"house\",\"apartment\",\"success\",\"food\",\"taste\",\"suit\",\"dream\",\"dreams\",\"sleep\",\"pillow\",\"weird\",\"family\",\"vortex\",\"hillary\",\"clinton\",\"politics\",\"political\",\"government\",\"democrats\",\"republicans\",\"gop\",\"liberal\",\"liberals\",\"conservative\",\"conservatives\",\"libtards\",\"cucks\",\"cuck\",\"socialist\",\"socialism\",\"shillary\",\"sjw\",\"sjws\",\"social\",\"justice\",\"warriors\",\"science\",\"chemicals\",\"chemtrails\",\"target\",\"targeted\",\"targeting\",\"woo\",\"cleanse\",\"spirit\",\"mental\",\"spirituality\",\"god\",\"chakra\",\"chakras\",\"sound\",\"meditation\",\"reality\",\"hypnosis\",\"mantra\",\"mantras\",\"technique\",\"energy\",\"karma\",\"vegan\",\"ascend\",\"ascension\",\"newage\",\"consciousness\",\"ti\",\"individual\",\"tracking\",\"conspiracy\",\"nuclear\",\"drone\",\"5g\",\"radiation\",\"alien\",\"aliens\",\"ufo\",\"ufos\",\"roswell\",\"brain\",\"mind-control\",\"sad\",\"depressed\",\"melencholy\",\"anxious\",\"anxiety\",\"depression\",\"anhedonia\",\"motivation\",\"happy\",\"suicide\",\"suicidal\",\"ocd\",\"obsessed\",\"scared\",\"fear\",\"emptiness\",\"cbd\",\"antidepressant\",\"addicted\",\"addicting\",\"addiction\",\"internet\",\"evacuate\",\"planet\",\"wrong\",\"psychology\",\"remember\",\"forget\",\"forgetting\",\"foot\",\"death\",\"toenail\",\"nail\",\"fungus\",\"feet\",\"elderly\",\"back\",\"pain\",\"organ\",\"organs\",\"accupuncture\",\"intestine\",\"liver\",\"heart\",\"male\",\"man\",\"testosterone\",\"hair\",\"loss\",\"bald\",\"balding\",\"woman\",\"female\",\"fat\",\"skinny\",\"pepper\",\"hot\",\"furnace\",\"drip\",\"cancer\",\"stop\",\"dead\",\"blood\",\"cells\",\"add\",\"indigo\",\"child\",\"children\",\"special\",\"collective\",\"illuminati\",\"holocaust\",\"internet-of-things\",\"iot\",\"vr\",\"virtual\",\"individuality\",\"jew\",\"jews\",\"jewish\",\"semetic\",\"subliminal\",\"astral\",\"projection\",\"light\",\"healing\",\"luck\",\"clover\",\"horseshoe\",\"sexy\",\"binaural\",\"beats\",\"music\",\"sperm\",\"seamen\",\"sex\",\"digital\",\"hologram\",\"simulation\",\"illusion\",\"numbers\",\"numeric\",\"dna\",\"information\",\"funny\",\"laugh\",\"laughing\",\"lol\",\"haha\",\"kitty\",\"kitten\",\"cat\",\"meow\",\"virus\",\"infected\",\"pleiadians\",\"space\",\"physics\",\"bunker\",\"atlas\",\"nuke\",\"war\",\"disaster\",\"apocalypse\",\"bomb\",\"survival\",\"shelter\",\"girl\",\"doctor\",\"bowels\",\"shit\",\"poop\",\"constipated\",\"octopus\",\"puzzle\",\"stimulation\",\"electrode\",\"dbs\",\"deep\",\"therapy\",\"scanners\",\"scanner\",\"tracker\",\"beauty\",\"ugly\",\"surgery\",\"plastic\",\"constipation\",\"constipate\",\"poo\",\"darpa\",\"mind\",\"control\",\"pot\",\"weed\",\"drugs\",\"marijuana\",\"seduction\",\"dating\",\"romance\",\"singles\",\"chess\",\"666\",\"2016\",\"freemasonry\",\"universal\",\"emperor\",\"42\",\"miracle\",\"hell\",\"genesis\",\"bread\",\"jesus\",\"christianity\",\"sandwich\",\"bible\",\"safe\",\"safety\",\"spyware\",\"malware\",\"security\",\"towers\",\"smartphone\",\"weaponized\",\"thoughts\",\"cognitive\",\"knowledge\",\"processing\",\"radio\",\"transmission\",\"nsa\",\"microwave\",\"frequency\",\"nwo\",\"new\",\"world\",\"order\",\"state\",\"corruption\",\"x-ray\",\"skull\",\"dopamine\",\"driving\",\"muscle\",\"work\",\"hate\",\"emf\",\"electromagnetic\",\"relationship\",\"cocreate\",\"relationships\",\"electo\",\"magnetic\",\"intuition\",\"soul\",\"dreaming\",\"lucid\",\"suffering\",\"jewelry\",\"electric\",\"buddha\",\"moon\",\"christ\",\"blessing\",\"buddhism\",\"harmony\",\"harmonics\",\"spiritual\",\"unarius\",\"venus\",\"mars\",\"water\",\"hydrogen\",\"ion\",\"acidic\",\"alkaline\",\"radicals\",\"health\",\"h20\",\"infinity\",\"oasis\",\"ph\",\"teeth\",\"tooth\",\"dental\",\"dentist\",\"implants\",\"implant\",\"cavity\",\"mouth\",\"gums\",\"dentures\",\"weight\",\"quantum\",\"motivaitonal\",\"phobia\"]\n\nexport default new Set([\n  ...fastcash,\n  ...woo,\n  ...mentalHealth,\n  ...politics,\n  ...general,\n  ...conspiracy,\n  ...gender.male,\n  ...gender.female,\n  ...gender.other,\n  ...imFuckingLazy,\n])\n","import keywords, { gender } from './keywords'\nimport intersection from 'lodash/intersection'\n\nconst externalLinkTest = /^(http|https):\\/\\/.+\\..+/\nconst imageTest = /(\\.jpg$)|(\\.jpeg$)|(\\.png$)|(\\.gif$)|(\\.svg$)/\nconst userTest = /^@.+/\nconst hashtagTest = /^#.+/\nconst postTest = /^\\/posts\\/.+/\nconst threadTest = /^\\/threads\\/.+/\n\nexport function isImage(str: string) {\n  str = cleanFragment(str)\n  return str.match(imageTest) && str.match(externalLinkTest)\n}\n\nexport function isExternalLink(str: string) {\n  str = cleanFragment(str)\n  return str.match(externalLinkTest)\n}\n\nexport function isUsername(str: string) {\n  str = cleanFragment(str)\n  return str.match(userTest);\n}\n\nexport function isHashtag(str: string) {\n  str = cleanFragment(str)\n  return str.match(hashtagTest)\n}\n\nexport function isPostRef(str: string) {\n  str = cleanFragment(str)\n  return str.match(postTest)\n}\n\nexport function isThreadRef(str: string) {\n  str = cleanFragment(str)\n  return str.match(threadTest)\n}\n\nexport function isKeyword(str: string) {\n  return keywords.has(cleanFragment(str.toLowerCase()))\n}\n\nexport function hasNewline(str: string) {\n  return str.match('\\n')\n}\n\nexport function getUsernames(str: string) {\n  return str\n    .split(' ')\n    .filter(isUsername)\n    .map(f => cleanFragment(f, /^@/))\n}\n\nexport function getHastags(str: string) {\n  return str\n    .split(' ')\n    .filter(isHashtag)\n    .map(f => cleanFragment(f, /^#/).toLowerCase())\n}\n\nexport function getKeywords(str: string) {\n  return str\n    .split(' ')\n    .map(f => cleanFragment(f).toLowerCase())\n    .filter(isKeyword)\n}\n\nexport function getGender(str: string) {\n  const genderWords = str\n    .split(' ')\n    .map(f => cleanFragment(f).toLowerCase())\n\n  if (intersection(genderWords, gender.male).length) return 'male'\n  else if (intersection(genderWords, gender.female).length) return 'female'\n  else return 'other'\n}\n\n\nexport function getTags(content: string) {\n  return {\n    tags: JSON.stringify(getHastags(content).concat(getKeywords(content))),\n    usernames: JSON.stringify(getUsernames(content))\n  }\n}\n\nexport function cleanFragment(fragment: string, test?: RegExp) {\n  return fragment\n    .replace(test ? new RegExp(test, 'g') : '', '')\n    .replace(/(\\.|\\?|!|:|;|,|'|\")+$/, '')\n}\n\n","import * as React from 'react'\nimport styles from './styles.module.scss'\n\ntype Props = {\n  url: string,\n  alt: string,\n  [props: string]: unknown\n}\nexport default function Img({ url, alt, ...props }: Props) {\n  return <img className={styles.img} src={url} alt={alt} {...props} />\n}\n","\nimport each from 'lodash/each'\n\nexport default function profanityFilter (input: string): string {\n  const swap: any = {\n    motherfucker: 'm0therf_cker',\n    fuck: 'f_ck',\n\n    shit: 'poo',\n    ' dick ': 'penis',\n    bitch: 'b!tch',\n\n    cunt: 'c%nt',\n    cocksuck: 'c*cks^ck',\n    cock: 'c*ck',\n\n    nigger: 'african-american',\n    nigga: 'pal',\n\n    ' fag ': 'homosexual',\n    faggot: 'homosexual',\n\n    tranny: 'transexual',\n    ' god ': 'g-d',\n    goddamn: 'goshdarn',\n\n    pussy: 'p#ssy'\n  }\n\n  each(swap, (replaceTo, replaceFrom) => {\n    input = input.replace(replaceFrom, replaceTo)\n  })\n\n\n  return input\n}\n","import * as React from 'react'\nimport { Link } from 'react-router-dom'\nimport {\n  isExternalLink,\n  isImage,\n  isHashtag,\n  isUsername,\n  isPostRef,\n  isThreadRef,\n  // hasNewline,\n  cleanFragment,\n} from 'utils/parsers'\nimport Img from './Img'\nimport profanityFilter from 'utils/profanityFilter'\n\n\ntype Fragment = string | React.ReactNode;\n\nconst last = (arr: Array<Fragment>): Fragment => arr[arr.length - 1]\n\nconst imgStyle = {\n  maxHeight: 300,\n}\nconst parseFragment = (fragment: string): Fragment => {\n  if (isImage(fragment)) {\n    return <Img url={fragment} style={imgStyle} alt=\"user posted content\"/>\n\n  } else if (isExternalLink(fragment)) {\n    return <a href={cleanFragment(fragment)} target=\"_blank\" rel=\"noopener noreferrer\">{fragment}</a>\n\n  } else if (isUsername(fragment)) {\n    const userId = cleanFragment(fragment, /^@/)\n    const dirt = fragment.replace(userId, '').replace(/^@/, '')\n    return <><Link to={`/users/${userId}`}>@{profanityFilter(userId)}</Link>{dirt}</>\n\n  } else if (isHashtag(fragment)) {\n    const hashtag = cleanFragment(fragment, /^#/)\n    const dirt = fragment.replace(hashtag, '').replace(/^#/, '')\n    return <><Link to={`/hashtag/${hashtag.toLowerCase()}`}>#{profanityFilter(hashtag)}</Link>{dirt}</>\n\n  } else if (isPostRef(fragment)) {\n    const postId = cleanFragment(fragment, /^\\/posts\\//)\n    const dirt = fragment.replace(postId, '').replace(/^\\/posts\\//, '')\n    return <><Link to={`/posts/${postId}`}>/posts/{postId}</Link>{dirt}</>\n\n  } else if (isThreadRef(fragment)) {\n    const threadId = cleanFragment(fragment, /^\\/threads\\//)\n    const dirt = fragment.replace(threadId, '').replace(/^\\/threads\\//, '')\n    return <><Link to={`/threads/${threadId}`}>/threads/{threadId}</Link>{dirt}</>\n\n  } else {\n    return profanityFilter(fragment)\n  }\n}\n\n\nconst combineFragments = (fragments: Array<Fragment>, fragment: Fragment): Array<Fragment> => {\n  if (!fragments.length) {\n    return [fragment]\n  }\n\n  const lastFragment = last(fragments)\n\n  if (typeof lastFragment === 'string' && typeof fragment === 'string') {\n    return [...fragments.slice(0, -1), lastFragment + ' ' + fragment]\n\n  } else if (typeof lastFragment === 'string') {\n    return [...fragments.slice(0, -1), lastFragment + ' ', fragment]\n\n  } else {\n    return [...fragments, ' ', fragment]\n  }\n}\n\nconst addIndex = (f: React.ReactNode, i: number) => (\n  <React.Fragment key={i}>\n    {f}\n  </React.Fragment>\n)\n\nconst parser = (content: string) => content\n  .split('\\n')\n  .map((paragraph, i) => (\n    <p key={i}>\n      {paragraph\n        .split(' ')\n        .map(parseFragment)\n        .reduce(combineFragments, [])\n        .map(addIndex)\n      }\n    </p>\n  ))\n\ntype Props = { content: string };\n\nexport default function ParsedText({ content }: Props) {\n  return (\n    <>\n      {parser(content)}\n    </>\n  )\n}\n","import React  from 'react'\nimport { Link } from 'react-router-dom'\nimport cx from 'classnames'\n\nimport X from 'components/X'\nimport ParsedText from 'components/ParsedText'\nimport styles from './styles.module.scss'\nimport { CurrentUser } from './index'\n\ntype AlertDropdownProps = {\n  alerts: CurrentUser['alerts'],\n  readAlert: (id: string) => unknown\n  onEmptyClick?: (a: any) => any\n}\n\nconst Alerts = ({ alerts, readAlert }: AlertDropdownProps) => {\n  return (<>\n    {alerts.map(alert =>\n      <div key={alert.id} className={styles.alert} onClick={() => readAlert(alert.id)}>\n        <X ring />\n        {alert.link\n          ? <Link to={alert.link}>{alert.content}</Link>\n          : <ParsedText content={alert.content} />\n        }\n      </div>\n    )}\n  </>)\n\n\n}\n\nexport const AlertDropdown: React.SFC<AlertDropdownProps> = ({ alerts, onEmptyClick, readAlert }) => (\n  <div className={styles.alertDropdown}>\n    {alerts.length\n      ? <Alerts alerts={alerts} readAlert={readAlert} />\n      : <div className={styles.noAlerts} onClick={onEmptyClick}>No Alerts!</div>\n    }\n  </div>\n)\n\nexport const AlertCircle: React.SFC<{ unread: number }> = ({ unread }) => (\n  <div className={cx(styles.circle, {\n    [styles.unread]: unread,\n    [styles.unread1]: unread > 0 && unread < 5,\n    [styles.unread2]: unread >= 5 && unread < 10,\n    [styles.unread3]: unread >= 10 && unread < 15,\n    [styles.unread4]: unread >= 15,\n  })}>\n    {unread || 0}\n  </div>\n)\n","const JWT = '__JWT__'\n\ntype JwtMap = {\n  __currentUser__: string,\n  [username: string]: string\n}\n\ntype JwtUser = {\n  username: string,\n  jwt: string\n}\n\nconst getMapping = (): JwtMap => {\n  const stored = localStorage.getItem(JWT)\n  return stored ? JSON.parse(stored) : { __currentUser__: '' }\n}\n\nconst mapping = getMapping()\nif (mapping.steve_p) {\n  delete mapping.steve_p\n  localStorage.setItem(JWT, JSON.stringify(mapping))\n}\nif (mapping.Steve_p) {\n  delete mapping.Steve_p\n  localStorage.setItem(JWT, JSON.stringify(mapping))\n}\n\nconst get = (): string| void => {\n  const mapping = getMapping()\n  return mapping[mapping.__currentUser__]\n}\n\nconst getInnactiveUserList = (): Array<JwtUser> => {\n  const mapping = getMapping()\n  return Object.keys(mapping)\n    .filter(username => (username !== '__currentUser__' && username !== mapping.__currentUser__))\n    .map(username => ({\n      username, jwt: mapping[username]\n    }))\n}\n\nconst getCurrentUser = (): JwtUser => {\n  const mapping = getMapping()\n  return {\n    username: mapping.__currentUser__,\n    jwt: mapping[mapping.__currentUser__]\n  }\n}\n\nconst set = (username: string, jwt: string): void => {\n  const mapping = getMapping()\n  mapping[username] = jwt\n  localStorage.setItem(JWT, JSON.stringify(mapping))\n}\n\nconst setCurrentUser = (username: string) => {\n  const mapping = getMapping()\n  mapping.__currentUser__ = username\n  localStorage.setItem(JWT, JSON.stringify(mapping))\n}\n\nconst clearCurrentUser = () => {\n  const mapping = getMapping()\n  mapping.__currentUser__ = ''\n  localStorage.setItem(JWT, JSON.stringify(mapping))\n}\n\nconst TRACKING_TOKEN = '__TRACKING_TOKEN__'\nconst setTrackingToken = () => {\n  try {\n    const existingToken = getTrackingToken()\n    if (!existingToken) {\n      const token = `${Date.now()}-${Math.random()}`\n      localStorage.setItem(TRACKING_TOKEN, token)\n      return token\n    } else {\n      return existingToken\n    }\n\n  } catch(e) {\n    console.log('could not set trakcing token: ', e)\n  }\n}\n\nconst getTrackingToken = (): string => localStorage.getItem(TRACKING_TOKEN) || ''\n\nexport default {\n  get,\n  getMapping,\n  getCurrentUser,\n  getInnactiveUserList,\n  getTrackingToken,\n  setTrackingToken,\n  set,\n  setCurrentUser,\n  clearCurrentUser\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport jwt from 'utils/jwt'\nimport styles from './styles.module.scss'\n\nconst switchUser = (username: string) => {\n  jwt.setCurrentUser(username)\n  window.location.reload()\n}\n\nconst logout = () => {\n  jwt.clearCurrentUser()\n  window.location.reload()\n}\n\nconst getCurrentUser = () => {\n  try {\n    return JSON.parse(localStorage.__JWT__).__currentUser__\n  } catch (e) {\n    console.log(e)\n    return ''\n  }\n\n}\n\nexport const UserDropdown: React.SFC<{}> = () => {\n  const alternativeUsers = jwt.getInnactiveUserList()\n  const currentUser = getCurrentUser()\n\n  return (\n    <ul className={styles.userDropdown}>\n      <Link to={`/users/${currentUser}`}>\n        <li>\n          <div>View Profile</div>\n        </li>\n      </Link>\n\n      <Link to=\"/profile\">\n        <li>\n          <div>Update Profile</div>\n        </li>\n      </Link>\n\n      <Link to=\"/messages\">\n        <li>\n          <div>Messages</div>\n        </li>\n      </Link>\n\n      <a href=\"#logout\" onClick={logout}>\n        <li>Logout</li>\n      </a>\n\n      <Link to=\"/login\">\n        <li>\n          <div>Login</div>\n        </li>\n      </Link>\n\n      <Link to=\"/signup\">\n        <li>\n          <div>Create Account</div>\n        </li>\n      </Link>\n\n      {!!alternativeUsers.length &&\n        <div className={styles.switchAccounts}>\n          <strong>Switch Account</strong>\n          <ul>\n            {alternativeUsers.map(({ username }) => (\n              <li\n                key={username}\n                onClick={() => switchUser(username)}\n              >\n                {username}\n              </li>\n             ))}\n          </ul>\n        </div>\n      }\n    </ul>\n  )\n}\n","import React, { useEffect } from 'react'\nimport cx from 'classnames'\nimport styles from './styles.module.scss'\n\n\ntype Props = {\n  hide: Function,\n  children: any\n}\n\nconst ELEMENT_ID = '__dropdown_component__'\n\nexport default function Dropdown({ children, hide }: Props) {\n  const hideDropdown = (e: any) => {\n    const dropdown = document.getElementById(ELEMENT_ID)\n    if (dropdown && e.target !== dropdown && !dropdown.contains(e.target)) {\n      hide()\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener('click', hideDropdown)\n    return () => document.removeEventListener('click', hideDropdown)\n  })\n\n  return (\n    <div id={ELEMENT_ID} className={cx(styles.dropdown, 'solid')}>\n      {children}\n    </div>\n  )\n}\n","import React, { useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport cx from 'classnames'\nimport { useQuery, useMutation } from 'urql'\nimport useResponsive from 'utils/useResponsive'\nimport useInterval from 'utils/useInterval'\n\n\nimport styles from './styles.module.scss'\nimport { Width } from 'components/Body'\n\nimport { AlertDropdown, AlertCircle } from './Alerts'\nimport { UserDropdown } from './User'\nimport Dropdown from './Dropdown'\n\nimport { RouteChildrenProps } from 'react-router'\n\nexport type CurrentUser = {\n    id: string,\n    username: string,\n    avatarUrl?: string\n    alerts: Array<{\n      id: string\n      content: string\n      link?: string\n    }>\n  }\nexport type CurrentUserQuery = {\n  currentUser?: CurrentUser\n}\n\nconst currentUserQuery = `{\n  currentUser {\n    id\n    username\n    avatarUrl\n    alerts: alertsList (condition: { read: false }) {\n      id\n      content\n      link\n    }\n  }\n}`\n\ntype ReadAlertInput = {\n  input: {\n    alertId: string\n  }\n}\n\ntype ReadAlertResponse = {\n  readAlert: {\n    alert: {\n      id: string,\n      read: boolean\n    }\n  }\n}\n\nconst readAlertMutation = `\nmutation readAlert($input: ReadAlertInput!) {\n  readAlert(input: $input) {\n    alert {\n      id\n      read\n    }\n  }\n}`\n\nexport type Props = RouteChildrenProps\n\nexport type State = {\n  dropdownState: null | 'users' | 'alerts'\n}\n\nfunction Nav(props: Props) {\n  const [dropdownState, setDropdownState] = useState<State['dropdownState']>(null)\n  const [{ data, fetching }, executeQuery] = useQuery<CurrentUserQuery>({ query: currentUserQuery })\n  const [response, executeReadAlert] = useMutation<ReadAlertResponse, ReadAlertInput>(readAlertMutation) // eslint-disable-line\n  const currentUser = (data && data.currentUser) || null\n\n  const readAlert = (alertId: string) => executeReadAlert({ input: { alertId } })\n\n  const hideDropdown = () => setDropdownState(null)\n  useEffect(() => props.history.listen(hideDropdown))\n  useInterval(() => {\n    if (!document.hidden) {\n      executeQuery({ requestPolicy: 'network-only' })\n    }\n  }, 10000)\n\n  return (\n    <nav className={cx(styles.container, 'solid')}>\n      <Width>\n        <NavBar\n          loading={fetching}\n          currentUser={currentUser}\n          toggleDropdownVisible={setDropdownState}\n        />\n        <div className={styles.dropdownPosition}>\n          {dropdownState &&\n            <Dropdown hide={hideDropdown}>\n              {dropdownState === 'users' && <UserDropdown />}\n              {dropdownState === 'alerts' && currentUser && <AlertDropdown\n                alerts={currentUser.alerts}\n                onEmptyClick={hideDropdown}\n                readAlert={readAlert}\n              />}\n            </Dropdown>\n          }\n        </div>\n      </Width>\n    </nav>\n  )\n}\n\n\n\ntype NavBarProps = {\n  loading: boolean,\n  currentUser: CurrentUserQuery['currentUser'] | null,\n  toggleDropdownVisible: (state: State['dropdownState']) => void,\n}\n\nconst NavBar: React.SFC<NavBarProps> = ({ toggleDropdownVisible, currentUser, loading }) => {\n  return (\n    <div className={styles.content}>\n      <Link to=\"/\">\n        <div className={styles.title}>FriendWorld</div>\n      </Link>\n\n      <div className={styles.links}>\n        {currentUser\n          ? <SignedInMenu currentUser={currentUser} toggleDropdownVisible={toggleDropdownVisible} />\n          : loading ? false : <SignedOutMenu />\n        }\n      </div>\n    </div>\n  )\n}\n\ntype SignedInMenuProps = {\n  currentUser: CurrentUser\n  toggleDropdownVisible: NavBarProps['toggleDropdownVisible']\n}\n\nconst SignedInMenu = ({ currentUser, toggleDropdownVisible }: SignedInMenuProps) => {\n  const { isDesktop, isMobile } = useResponsive(540)\n\n  return (\n    <>\n      <div\n        className={styles.link}\n        onClick={() => toggleDropdownVisible('users')}\n        style={{ maxWidth: '180px', overflow: 'auto' }}\n      >\n        {currentUser.username}\n        <div\n          className={cx(styles.circle, styles.user)}\n          style={{ backgroundImage: `url(${currentUser.avatarUrl})` }}\n        />\n      </div>\n\n      {isDesktop && (\n        <div className={styles.link} onClick={() => toggleDropdownVisible('alerts')}>\n          Alerts\n          <AlertCircle unread={currentUser.alerts.length} />\n        </div>\n      )}\n\n      {isMobile && (\n        <div className={styles.link} onClick={() => toggleDropdownVisible('alerts')}>\n          <AlertCircle unread={currentUser.alerts.length} />\n        </div>\n      )}\n      {/*\n      <Link to=\"/signup\" className={styles.link}>Signup</Link>\n      <Link to=\"/login\" className={styles.link}>Login</Link>\n    */}\n    </>\n  )\n}\n\nconst SignedOutMenu = () => (\n  <>\n    <Link to=\"/login\" className={styles.link}>Login</Link>\n    <Link to=\"/signup\" className={styles.link}>Signup</Link>\n  </>\n)\n\nexport default Nav\n","import * as React from 'react'\nimport styles from './styles.module.scss'\n\ntype Props = {\n  error: Error | string\n}\n\nconst DisplayError: React.SFC<Props> = ({ error }) => (\n  <div className={styles.error}>\n    An Error Occurred: {JSON.stringify(error, null, 3)}\n  </div>\n)\n\nexport default DisplayError\n","import React, { useState, useEffect } from 'react'\nimport styles from './styles.module.scss'\n\n\nconst Loading: React.SFC<{}> = () => {\n  const [dots, setDots] = useState<string>('')\n\n  useEffect(() => {\n    const interval = setInterval(() => setDots(dots + '.'), 350)\n    return () => clearInterval(interval)\n  })\n\n  return (\n    <div className={styles.loading}>\n      loading{dots}\n    </div>\n)\n}\n\nexport default Loading\n","import React, { useState, useMemo } from 'react';\nimport { useMutation } from 'urql'\nimport jwt from 'utils/jwt'\nimport DisplayError from 'components/DisplayError'\nimport Loading from 'components/Loading'\nimport styles from './styles.module.scss'\n\n\nconst loginMutation = `\nmutation($input: LoginInput!) {\n  login(input: $input) {\n    jwtToken\n    query {\n      currentUser {\n        id\n        username\n      }\n    }\n  }\n}`\n\n\ntype LoginInput = {\n  input: {\n    username: string,\n    password: string\n  }\n}\ntype LoginResponse = { login: { jwtToken: string }}\ntype Props = {}\n\ntype State = {\n  username: string,\n  password: string\n}\n\nfunction Login() {\n  const [username, setUsername] = useState<string>('')\n  const [password, setPassword] = useState<string>('')\n  const [errorText, setErrorText] = useState<string>('')\n\n\n  const [{ error, fetching, data }, executeLogin] = useMutation<LoginResponse, LoginInput>(loginMutation)\n\n  useMemo(() => {\n    if (data && data.login) {\n      if (data.login.jwtToken) {\n        jwt.set(username, data.login.jwtToken)\n        jwt.setCurrentUser(username)\n        window.location.href = '/'\n      } else {\n        setErrorText('Incorrect username/password combination')\n      }\n    }\n  }, [username, data])\n\n  return (\n    <section className={styles.login}>\n      <div className={styles.card}>\n        <h1>Login</h1>\n        {error && <DisplayError error={error} />}\n        {fetching && <Loading />}\n        {!error && !fetching && (\n          <form>\n            <input\n              name=\"fw_username\"\n              placeholder=\"username\"\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n            />\n            <input\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n            <button\n              className={styles.submitButton}\n              onClick={(e) => {\n                e.preventDefault()\n                if (username && password) {\n                  setErrorText('')\n                  executeLogin({ input: { username, password } })\n                }\n              }}\n            >\n              Submit\n            </button>\n            {errorText && <DisplayError error={errorText} />}\n\n          </form>\n        )}\n      </div>\n    </section>\n  )\n}\n\nexport default Login\n","import React, { useState } from 'react';\nimport { useMutation } from 'urql'\nimport jwt from 'utils/jwt'\nimport DisplayError from 'components/DisplayError'\nimport Loading from 'components/Loading'\nimport styles from './styles.module.scss'\n\nconst signupMutation = `\nmutation($input: SignupInput!) {\n  signup(input: $input) {\n    jwtToken\n  }\n}`\n\n\ntype SignupInput = {\n  input: {\n    username: string,\n    password: string\n  }\n}\n\ntype SignupResponse = { signup: { jwtToken: string }}\n\ntype Props = {}\n\ntype State = {\n  username: string,\n  password: string\n}\n\nfunction Signup() {\n  const [username, setUsername] = useState<string>('')\n  const [password, setPassword] = useState<string>('')\n  const [passwordConfirm, setPasswordConfirm] = useState<string>('')\n  const [errorText, setErrorText] = useState<string>('')\n  const [{ error, fetching, data }, executeSignup] = useMutation<SignupResponse, SignupInput>(signupMutation)\n\n  const signup = () => {\n    if (!username || !password) {\n      setErrorText('Must include username and password.')\n      return\n    }\n    if (password !== passwordConfirm) {\n      setErrorText('Password must match Password Confirmation')\n      return\n    }\n    executeSignup({ input: { username, password } })\n  }\n\n  const displayErrorText = error\n    ? error.message.includes('violates unique constraint')\n      ? 'That username is already taken. Please try again'\n      : error.message\n    : errorText\n      ? errorText\n      : ''\n\n  if (data && !error) {\n    jwt.set(username, data.signup.jwtToken)\n    jwt.setCurrentUser(username)\n    window.location.href = '/onboarding'\n  }\n\n  return (\n    <section className={styles.signup}>\n      <div className={styles.card}>\n        <h1>Create Account</h1>\n        <form>\n          <div className={styles.inputs}>\n            <input\n              name=\"fw_username\"\n              placeholder=\"Username\"\n              value={username}\n              onChange={(e) => {\n                setUsername(e.target.value)\n                if (e.target.value.length > 18) setErrorText('Username must be 18 characters or less')\n              }}\n            />\n            <input\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n            <input\n              type=\"password\"\n              name=\"password_confirm\"\n              placeholder=\"Password Confirmation\"\n              value={passwordConfirm}\n              onChange={(e) => setPasswordConfirm(e.target.value)}\n            />\n          </div>\n\n          {displayErrorText && <DisplayError error={displayErrorText} />}\n          {fetching && <Loading />}\n          {!fetching && (\n            <button\n              className={styles.submitButton}\n              onClick={(e) => {\n                e.preventDefault()\n                signup()\n              }}\n            >\n              Submit\n            </button>\n          )}\n        </form>\n      </div>\n    </section>\n  )\n}\n\n\n\nexport default Signup\n\n","import * as React from 'react';\nimport { Link } from 'react-router-dom'\nimport cx from 'classnames'\nimport ParsedText from '../ParsedText'\nimport profanityFilter from 'utils/profanityFilter'\nimport styles from './styles.module.scss';\n\n\nexport type PostType = {\n  id: string,\n  createdAt: string,\n  content: string,\n  author?: {\n    id: string,\n    username: string\n    avatarUrl?: string\n    postStats?: {\n      totalCount: number\n    }\n  } | null,\n  thread?: {\n    id: string,\n    title: string\n  }\n}\n\ntype Props = {\n  post: PostType\n}\n\nconst Post: React.SFC<Props> = ({ post }) => (\n  <article className={styles.post}>\n    <div className={styles.main}>\n      {!!post.author &&\n        <Link to={`/users/${post.author.username}`} className={styles.panel}>\n          <aside className={styles.panelContainer}>\n            <div className={styles.avatar} style={{ backgroundImage: `url(${post.author.avatarUrl})` }} />\n            <div className={styles.userInfo}>\n              <div className={styles.username}>{post.author.username}</div>\n              {post.author.postStats &&\n                <div className={styles.totalPosts}><strong>Posts:</strong> {post.author.postStats.totalCount}</div>\n              }\n            </div>\n          </aside>\n        </Link>\n      }\n\n\n      <div className={styles.content}>\n        <ParsedText content={post.content} />\n      </div>\n\n    </div>\n    <div className={cx(styles.footer, 'offWhite')}>\n      <div className={styles.postedAt}>\n        <time>Posted at: {new Date(post.createdAt).toISOString()}</time>\n        <span><Link to={`/posts/${post.id}`}>/posts/{post.id}</Link></span>\n      </div>\n      {!!post.thread && (\n        <div className={styles.threadLink}>\n          In thread: <Link to={`/threads/${post.thread.id}`}>{profanityFilter(post.thread.title)}</Link>\n        </div>\n      )}\n    </div>\n  </article>\n)\n\nexport default Post\n","import * as React from 'react';\nimport { useQuery } from 'urql'\nimport { Link } from 'react-router-dom'\nimport styles from './styles.module.scss'\nimport Post, { PostType } from 'components/Post'\nimport DisplayError from 'components/DisplayError'\nimport Loading from 'components/Loading'\n\n\ntype PostQuery = {\n  post?: PostType\n}\n\nconst queryType = process.env.NODE_ENV === 'production' ? 'post' : 'postById'\n\nconst postQuery = `\nquery ${queryType} ($id: Int!){\n  post: ${queryType} (id: $id) {\n    id\n    createdAt\n    content\n    author {\n      id\n      username\n      avatarUrl\n      postStats: authoredPosts {\n        totalCount\n      }\n    }\n    thread {\n      id\n      title\n    }\n  }\n}`\n\n\nconst Posts: React.SFC<{ id: number }> = ({ id }) => {\n  const [{ error, fetching, data }] = useQuery<PostQuery>({ query: postQuery, variables: { id } })\n\n  return (\n    <section>\n      <div className={styles.back}>\n        <Link to=\"/\">{'< Back to forum'}</Link>\n      </div>\n\n      <div className={styles.left}>\n        {error && <DisplayError error={error} />}\n        {fetching && <Loading />}\n        {data && (\n          data.post\n            ? <Post post={data.post}/>\n            : 'This post does not exist!'\n        )}\n      </div>\n    </section>\n\n  )\n}\n\nexport default Posts\n","import * as React from 'react';\nimport noop from 'lodash/noop'\nimport styles from './styles.module.scss';\nimport Img from '../Img'\n\ntype Props = {\n  url: string\n  content: string\n  img?: string\n  onClick?: () => unknown\n}\n\nconst Ad: React.SFC<Props> = ({ url, img, content, onClick }) => (\n  <div className={styles.ad}>\n    <a\n      href={url}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      onClick={onClick || noop}\n    >\n      {img &&\n        <Img url={img} alt={content} />\n      }\n      {content &&\n        <div className={styles.content}>{content}</div>\n      }\n    </a>\n  </div>\n)\n\nexport default Ad\n","import React, { useMemo } from 'react'\nimport { sampleSize, shuffle, isObject } from 'lodash'\nimport { useQuery, useMutation } from 'urql'\nimport Ad from 'components/Ad'\nimport styles from './styles.module.scss'\n\nconst safeParse = (str?: any) => {\n  try {\n    const obj = JSON.parse(str)\n    return isObject(obj) ? obj : {}\n  } catch(e) {\n    return {}\n  }\n}\nconst adQuery = `{\n  currentUser {\n    id\n    trackingInfo\n  }\n  ads: adsList {\n    id\n    url\n    img\n    content\n    tags\n    isGeneric\n    weight\n    targetTags\n    primaryTags\n  }\n}`\n\n// , weight        int default 1\n// , target_tags   jsonb default '[]'\n// , primary_tags  jsonb default '[]'\n// , tags          jsonb default '[]'\n\n\ntype AdQuery = {\n  ads: Array<{\n    id: string\n    url: string\n    img: string\n    content: string\n    isGeneric: boolean\n    weight: number\n    tags: string\n    targetTags: string\n    primaryTags: string\n  }>\n  currentUser?: {\n    id: string\n    trackingInfo: string\n  }\n}\n\ntype Ad = {\n  id: string\n  url: string\n  img: string\n  content: string,\n  isGeneric: boolean\n  weight: number\n  tags: Array<string>\n  primaryTags: Array<string>\n  targetTags: Array<string>\n}\n\n\nconst logAdClickMutation = `\nmutation logAdClick($input: LogAdClickInput!) {\n  logAdClick(input: $input) {\n    adClick {\n      adId\n      userId\n      clickCount\n    }\n  }\n}`\n\ntype LogAdClickInput = {\n  input: {\n    ad: string\n  }\n}\n\ntype LogAdClickResponse = {\n  logAdClick: {\n    adClick: {\n      adId: string\n      userId: string\n      clickCount: number\n    }\n  }\n}\n\ntype Filter = {\n  tags?: Array<string>,\n  targetTags?: Array<string>,\n}\n\nfunction filterAds(\n  allAds: Array<Ad>,\n  filter: Filter = {},\n  n: number = 1,\n): Array<Ad> {\n  const tags = new Set(filter.tags || [])\n  const targetTags = new Set(filter.targetTags || [])\n  const viableAds = allAds.filter(ad => ad.isGeneric)\n\n  const primaryAds = allAds.filter(ad => ad.primaryTags.some(a => tags.has(a)))\n\n  if (primaryAds.length >= n) {\n    return sampleSize(primaryAds, n)\n  }\n  const secondaryAds = allAds.filter(ad =>\n    ad.tags.some(a => tags.has(a))\n    && !primaryAds.includes(ad)\n  )\n\n  if (primaryAds.length + secondaryAds.length >= n) {\n    return [...shuffle(primaryAds), ...sampleSize(secondaryAds, n - primaryAds.length)]\n  }\n\n  const taggedAds = [...shuffle(primaryAds), ...shuffle(secondaryAds)]\n\n  const targetAds = allAds.filter(ad =>\n    ad.targetTags.some(a => targetTags.has(a))\n    && !taggedAds.includes(ad)\n  )\n\n  const remainingAds = [\n    ...targetAds,\n    ...viableAds.filter(ad => !taggedAds.includes(ad))\n  ]\n\n  return [...taggedAds, ...sampleSize(remainingAds, n - taggedAds.length)]\n}\n\nexport function useAds(n: number = 1, filter: Filter = {}) {\n  const [{ data, fetching }] = useQuery<AdQuery>({ query: adQuery })\n\n  const ads = useMemo(() => {\n    if (!data) return []\n    const parsedAds = data.ads.map(ad => ({\n      ...ad,\n      tags: JSON.parse(ad.tags),\n      primaryTags: JSON.parse(ad.primaryTags),\n      targetTags: JSON.parse(ad.targetTags),\n    }))\n    const trackingInfo = data.currentUser ? safeParse(data.currentUser.trackingInfo) : {}\n    const targetTags = [\n      trackingInfo.gender,\n      ...(trackingInfo.profileTags || [])\n    ]\n\n    return filterAds(parsedAds, {...filter, targetTags}, n)\n  }, [n, filter, data])\n\n  return { ads, fetchingAds: fetching }\n}\n\ntype Props = {\n  ads: Array<Ad>,\n  fetching?: boolean,\n}\nconst AdContainer = ({ ads, fetching }: Props) => {\n  const [response, executeLogAdClick] = useMutation<LogAdClickResponse, LogAdClickInput>(logAdClickMutation) // eslint-disable-line\n\n  if (fetching) return <>loading...</>\n  if (!ads) return null\n\n  const logAdClick = (id: string) =>\n    setTimeout(() =>\n      executeLogAdClick({ input: { ad: id }\n    }), 200)\n\n  return (\n    <section className={styles.adContainer}>\n      <div className={styles.label}>SPONSORED CONTENT</div>\n      {ads.map((ad, i) => (\n        <div className={styles.adWrapper} key={i}>\n          <Ad {...ad} onClick={() => logAdClick(ad.id)} />\n        </div>\n      ))}\n    </section>\n  )\n}\n\n\nexport default AdContainer\n","import React, { useState } from 'react'\nimport styles from './styles.module.scss'\n\nconst defaultPlaceholder = \"Join the conversation...\"\n\ntype Props = {\n  onSubmit: (content: string) => unknown,\n  onChange?: (content: string) => unknown,\n  buttonContent?: string,\n  placeholder?: string,\n  inputStyle?: Object\n}\n\nfunction TextInput ({\n  placeholder,\n  buttonContent,\n  inputStyle,\n  onSubmit,\n  onChange,\n}: Props) {\n  const [content, setContent] = useState('')\n\n  const submit = () => {\n    onSubmit(content)\n    setContent('')\n  }\n  const submitOnCommandEnter = (e: any) => {\n    if (e.keyCode === 13 && e.metaKey) {\n      submit()\n    }\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.inner}>\n      <textarea\n        className={styles.contentInput}\n        placeholder={placeholder || defaultPlaceholder}\n        onChange={e => {\n          setContent(e.target.value)\n          onChange && onChange(e.target.value)\n        }}\n        value={content}\n        style={inputStyle}\n        onKeyDown={submitOnCommandEnter}\n      />\n      <button\n        className={styles.submitButton}\n        onClick={submit}\n      >\n        {buttonContent || 'Submit'}\n      </button>\n      </div>\n    </div>\n  )\n}\n\nexport default TextInput\n","import React, { Fragment } from 'react';\nimport { useMutation, useQuery } from 'urql'\nimport { Link } from 'react-router-dom'\nimport cx from 'classnames'\nimport styles from './styles.module.scss'\nimport AdContainer, { useAds } from '../AdContainer'\nimport Post, { PostType } from 'components/Post'\nimport TextInput from 'components/TextInput'\nimport DisplayError from 'components/DisplayError'\nimport Loading from 'components/Loading'\nimport { getTags } from 'utils/parsers'\nimport useResponsive from 'utils/useResponsive'\nimport profanityFilter from 'utils/profanityFilter'\n\n\n\ntype ThreadQuery = {\n  thread?: {\n    id: number\n    title: string\n    posts: Array<PostType & { tags: string }>\n  }\n  currentUser?: {\n    id: string\n  }\n}\n\nconst queryType = process.env.NODE_ENV === 'production' ? 'thread' : 'threadById'\nconst threadQuery = `\nquery ${queryType} ($id: Int!) {\n  thread: ${queryType} (id: $id) {\n    id\n    title\n    posts: postsList {\n      id\n      content\n      createdAt\n      tags\n      author {\n        id\n        username\n        avatarUrl\n        postStats: authoredPosts {\n          totalCount\n        }\n      }\n    }\n  }\n  currentUser {\n    id\n  }\n}`\n\n\nconst createPostMutation = `\nmutation createPost($input: CreatePostInput!) {\n  createPost(input: $input) {\n    post {\n      id\n      content\n      createdAt\n      author {\n        id\n        avatarUrl\n        username\n      }\n    }\n  }\n}`\n\ntype CreatePostInput = {\n  input: {\n    content: string,\n    threadId: number,\n    tags: string, // Array<string>,\n    usernames: string, // Array<string>\n  }\n}\n\ntype CreatePostResponse = { createPost: { post: PostType } }\n\ntype AddPostProps = {\n  threadId: number,\n  disabled?: boolean\n}\nconst AddPost: React.SFC<AddPostProps> = ({ threadId, disabled }) => {\n  const [response, executeCreatePost] = useMutation<CreatePostResponse, CreatePostInput>(createPostMutation) // eslint-disable-line\n\n  const submit = (content: string) => {\n    if (!content) return\n    const { tags, usernames } = getTags(content)\n    executeCreatePost({\n      input: {\n        threadId,\n        content,\n        tags,\n        usernames,\n      }\n    })\n  }\n\n  return (\n    <>\n      {disabled && (\n        <Link to=\"/signup\">\n          <h2 className={styles.signup}>Create An Account To Join The Conversation!</h2>\n        </Link>\n      )}\n      <div className={cx(styles.addPost, disabled && styles.disabled)}>\n        <TextInput onSubmit={submit} />\n      </div>\n    </>\n  )\n}\n\nconst stickiedThreads = [1]\nconst Threads: React.SFC<{ id: number }> = ({ id }) => {\n  const { isMobile, isDesktop } = useResponsive(820)\n  const [{ data, error, fetching }] = useQuery<ThreadQuery>({ query: threadQuery, variables: { id } })\n\n  const tags = (\n    !stickiedThreads.includes(id) && data && data.thread\n      ? data.thread.posts.flatMap(p => JSON.parse(p.tags))\n      : []\n  )\n  const { ads, fetchingAds } = useAds(4, { tags })\n\n  const showMobileAd = (i: number) => {\n    if (!isMobile) return false\n    if ((i + 1) % 4) return false\n\n    const adIx = (((i + 1) / 4) - 1) % ads.length\n\n    return (\n      <div className={styles.ad}>\n        <AdContainer ads={[ads[adIx]]} fetching={fetchingAds} />\n      </div>\n    )\n  }\n\n  const isError = error && <DisplayError error={error} />\n  const isLoading = fetching && <Loading />\n\n\n  const isData = data && (data.thread ? (\n    <div className={styles.container}>\n      <header className={styles.threadTitle}>\n        <h2 >{profanityFilter(data.thread.title)}</h2>\n      </header>\n      <div>\n        <Link to={`/threads/${data.thread.id}`}>\n          <div className={styles.threadLink}>\n            /threads/{data.thread.id}\n          </div>\n        </Link>\n        <>\n          {data.thread.posts.map((post, i) =>\n            <Fragment key={post.id}>\n              {showMobileAd(i)}\n              <Post post={post} />\n            </Fragment>\n          )}\n        </>\n        <AddPost\n          threadId={data.thread.id}\n          disabled={!data.currentUser}\n        />\n      </div>\n    </div>\n  ) : 'This thread does not exist!')\n\n  return (\n    <section>\n      <div className={styles.back}>\n        <Link to=\"/\">{'< Back to forum'}</Link>\n      </div>\n\n      <div className={styles.threadContainer}>\n        <div className={styles.left}>\n          {isError}\n          {isLoading}\n          {isData}\n        </div>\n\n        {isDesktop && (\n          <div className={styles.adContainer}>\n            <AdContainer ads={ads} fetching={fetchingAds} />\n          </div>\n        )}\n      </div>\n    </section>\n  )\n}\n\nexport default Threads\n\n","import React, { useState } from 'react';\nimport { useQuery, useMutation } from 'urql'\nimport { Link } from 'react-router-dom'\nimport cx from 'classnames'\n\n\nimport styles from './styles.module.scss';\nimport { getTags } from 'utils/parsers'\nimport profanityFilter from 'utils/profanityFilter'\nimport TextInput from 'components/TextInput'\nimport Post from 'components/Post'\n\n\n\ntype UserQuery = {\n  currentUser?: {\n    id: string\n    username: string\n    avatarUrl: string\n    postStats: {\n      totalCount: number\n    }\n  }\n}\n\nconst userQuery = `{\n  currentUser {\n    id\n    username\n    avatarUrl\n    postStats: authoredPosts {\n      totalCount\n    }\n  }\n}`\n\ntype CreateThreadInput = {\n  input: {\n    title: string,\n    content: string,\n    tags: string, // Array<string>,\n    usernames: string, // Array<string>,\n  }\n}\ntype CreateThreadResponse = { createThread: { thread: { id: string, title: string } } }\n\nconst createThreadMutation = `\nmutation createThread($input: CreateThreadInput!) {\n  createThread(input: $input) {\n    thread {\n      id\n      title\n    }\n  }\n}`\n\n\nconst NewThread: React.SFC<{}> = () => {\n  const [title, setTitle] = useState<string>('')\n  const [content, setContent] = useState<string>('')\n  const [query] = useQuery<UserQuery>({ query: userQuery })\n  const [response, executeCreateThread] = useMutation<CreateThreadResponse, CreateThreadInput>(createThreadMutation)\n\n  const createThread = () => {\n    if (!title || !content) return\n    const { tags, usernames } = getTags(title + ' ' + content)\n    executeCreateThread({\n      input: {\n        title,\n        content,\n        tags,\n        usernames,\n      }\n    })\n  }\n\n  if (response.data) {\n    window.location.href = `/threads/${response.data.createThread.thread.id}`\n    return <div />\n  }\n  if (query.fetching || response.fetching) return <span>loading...</span>\n\n  const disabled = query.data && !query.data.currentUser\n  const author = query.data && query.data.currentUser && {\n    ...query.data.currentUser,\n    postStats: {\n      totalCount: query.data.currentUser.postStats.totalCount + 1\n    }\n  }\n\n  return (\n    <section className={styles.newThread}>\n      <div className={styles.back}>\n        <Link to=\"/\">{'< Back to forum'}</Link>\n      </div>\n      {!disabled && <h1 className={styles.sectionTitle}>New Thread</h1>}\n      {disabled && (\n        <Link to=\"/signup\">\n          <h2 className={styles.signup}>Create An Account To Join The Conversation!</h2>\n        </Link>\n      )}\n\n      <div className={cx({ [styles.disabled]: disabled })}>\n        <h2 className={styles.label}>Title</h2>\n        <input\n          className={styles.input}\n          onChange={e => setTitle(e.target.value)}\n          value={title}\n        />\n        <h2 className={styles.label}>Content</h2>\n        <TextInput\n          onSubmit={createThread}\n          onChange={setContent}\n          buttonContent=\"Start Thread\"\n          placeholder=\"\"\n          inputStyle={{ height: '200px' }}\n        />\n        {(title || content) && (\n          <>\n            <h2 className={styles.label}>[PREVIEW] {profanityFilter(title)}</h2>\n            <Post\n              post={{\n                id: 'XX',\n                createdAt: new Date().toString(),\n                content,\n                author,\n              }}\n            />\n          </>\n        )}\n      </div>\n    </section>\n  )\n}\n\nexport default NewThread\n","import React, { useState } from 'react';\nimport { useQuery, useMutation } from 'urql'\nimport { Link, Redirect } from 'react-router-dom'\nimport { RouteComponentProps } from 'react-router'\n\nimport styles from './styles.module.scss'\nimport DisplayError from 'components/DisplayError'\nimport Loading from 'components/Loading'\nimport useResponsive from 'utils/useResponsive'\nimport { getGender, getKeywords } from 'utils/parsers'\n\ntype CurrentUser = {\n  id: string\n  createdAt: string\n  username: string\n  avatarUrl: string\n  email: string | null\n  gender: string\n  birthday: string | null\n  bio: string\n  job: string\n  interests: string\n  websites: string\n  media: string\n  religion: string\n  politics: string\n  trackingInfo: string\n  postStats: {\n    totalCount: number\n  }\n}\ntype CurrentUserQuery = {\n  currentUser?: CurrentUser\n}\n\nconst userProps = `\n  id\n  createdAt\n  username\n  avatarUrl\n  email\n  gender\n  birthday\n  bio\n  job\n  interests\n  websites\n  media\n  religion\n  politics\n  trackingInfo\n`\n\nconst currentUserQuery = `{\n  currentUser {\n    ${userProps}\n    trackingInfo\n    postStats: authoredPosts {\n      totalCount\n    }\n  }\n}`\n\n\nconst updateUserMutation = `mutation UpdateUser($input: UpdateUserInput!) {\n  updateUser(input: $input) {\n    user {\n      ${userProps}\n    }\n  }\n}`\n\ntype UpdateUserInput = {\n  input: {\n    avatarUrl?: string\n    email?: string | null\n    gender?: string\n    birthday?: string | null\n    bio?: string\n    job?: string\n    interests?: string\n    websites?: string\n    media?: string\n    religion?: string\n    politics?: string\n    trackingInfo?: string\n  }\n}\n\ntype UpdateUserPayload = {\n  user: UpdateUserInput['input']\n}\n\n// const formatDate = (date: string) => new Date(date).toLocaleString('en-US', {\n//   weekday: 'long',\n//   year: 'numeric',\n//   month: 'long',\n//   day: 'numeric',\n//   hour: 'numeric',\n//   minute: 'numeric',\n//   second: 'numeric'\n// })\n\ntype Props = RouteComponentProps\n\nexport default function Profile({ history }: Props) {\n  const [{ data, error, fetching }] = useQuery<CurrentUserQuery>({ query: currentUserQuery })\n  const goto = (url: string) => history.push(url)\n\n  if (error) return <DisplayError error={error} />\n  if (fetching) return <Loading />\n  if (!data) return null\n  if (!data.currentUser) return <Redirect to=\"/signup\" />\n\n\n  return <ProfileContent currentUser={data.currentUser} goto={goto} />\n}\n\nfunction getTrackingInfo(fields: UpdateUserInput['input']) {\n  const trackingInfo = fields.trackingInfo ? JSON.parse(fields.trackingInfo) : {}\n  const gender = fields.gender ? getGender(fields.gender) : undefined\n  const profileTags = getKeywords([\n    fields.bio,\n    fields.job,\n    fields.interests,\n    fields.media,\n    fields.religion,\n    fields.politics,\n  ].join(' '))\n\n  return JSON.stringify({ ...trackingInfo, gender, profileTags })\n}\n\nconst validDate = (dateStr: string) => Date.parse(dateStr) ? new Date(dateStr).toISOString() : null\nconst validEmail = (emailStr: string) => emailStr.match(/^.+@.+\\..+$/) ? emailStr : null\nconst wait = (ms: number) => new Promise(res => setTimeout(res, ms))\ntype ContentProps = {\n  currentUser: CurrentUser,\n  goto: (url: string) => unknown\n}\n\nfunction ProfileContent ({ currentUser, goto }: ContentProps) {\n  const [avatarUrl, setAvatarUrl] = useState<string>(currentUser.avatarUrl)\n  const [email, setEmail] = useState<string>(currentUser.email || '')\n  const [gender, setGender] = useState<string>(currentUser.gender)\n  const [birthday, setBirthday] = useState<string>(currentUser.birthday || '')\n  const [bio, setBio] = useState<string>(currentUser.bio)\n  const [job, setJob] = useState<string>(currentUser.job)\n  const [interests, setInterests] = useState<string>(currentUser.interests)\n  const [websites, setWebsites] = useState<string>(currentUser.websites)\n  const [media, setMedia] = useState<string>(currentUser.media)\n  const [religion, setReligion] = useState<string>(currentUser.religion)\n  const [politics, setPolitics] = useState<string>(currentUser.politics)\n\n  const [submitted, setSubmitted] = useState<boolean>(false)\n  const { isMobile, isDesktop } = useResponsive(540)\n\n\n  const [isFakeLoading, setIsFakeLoading] = useState<boolean>(false)\n  const [response, executeUpdateUser] = useMutation<UpdateUserPayload, UpdateUserInput>(updateUserMutation)\n\n  const bdayError = submitted && birthday && !validDate(birthday) ? 'Birthday must be a valid date' : ''\n  const emailError = submitted && email && !validEmail(email) ? 'Email must be in correct format' : ''\n\n  const header = (\n    <header className={styles.header}>\n      <h1>Update Profile: {currentUser.username}</h1>\n      <div className={styles.subheader}>uuid: {currentUser.id}</div>\n      <div className={styles.subheader}><Link to={`/users/${currentUser.username}`}>View Profile</Link></div>\n    </header>\n  )\n\n  const updateUser = async () => {\n    setSubmitted(true)\n    setIsFakeLoading(true)\n    const fields = {\n        email: validEmail(email),\n        birthday: validDate(birthday),\n        avatarUrl,\n        gender,\n        bio,\n        job,\n        interests,\n        websites,\n        media,\n        religion,\n        politics,\n      }\n    const trackingInfo = getTrackingInfo({ ...fields, trackingInfo: currentUser.trackingInfo })\n    await Promise.all([\n      executeUpdateUser({\n        input: { ...fields, trackingInfo }\n      }),\n      wait(1000)\n    ])\n    setIsFakeLoading(false)\n    // goto(`/users/${currentUser.username}`)\n  }\n\n  return (\n    <div className={styles.profile}>\n      {isMobile && header}\n      <div className={styles.content}>\n        <div className={styles.left}>\n          <div>\n            <div className={styles.avatar} style={{ backgroundImage: `url(${avatarUrl})` }} />\n            <div><strong>Posts:</strong> {currentUser.postStats.totalCount}</div>\n          </div>\n        </div>\n\n        <div className={styles.right}>\n          {response.fetching || isFakeLoading\n            ? <Loading />\n            :\n            <>\n              {isDesktop && header}\n              <div className={styles.buttonContainer}>\n                <button className={styles.submitButton} onClick={updateUser}>Update Profile</button>\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>Avatar Url</h3>\n                <input\n                  className={styles.contentInput}\n                  value={avatarUrl}\n                  placeholder=\"http://www.website.com/image.jpeg\"\n                  onChange={e => setAvatarUrl(e.target.value)}\n                />\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>Email</h3>\n                <input\n                  className={styles.contentInput}\n                  value={email}\n                  placeholder=\"email@website.com\"\n                  onChange={e => setEmail(e.target.value)}\n                />\n                {!!emailError && <div>{emailError}</div>}\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>Gender</h3>\n                <input\n                  className={styles.contentInput}\n                  value={gender}\n                  placeholder=\"Gender\"\n                  onChange={e => setGender(e.target.value)}\n                />\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>Birthday</h3>\n                <input\n                  className={styles.contentInput}\n                  value={birthday}\n                  placeholder=\"03/11/19\"\n                  onChange={e => setBirthday(e.target.value)}\n                />\n                {!!bdayError && <div>{bdayError}</div>}\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>About Me</h3>\n                <textarea\n                  className={styles.contentInput}\n                  value={bio}\n                  placeholder=\"Tell us about yourself!\"\n                  onChange={e => setBio(e.target.value)}\n                />\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>Occupation</h3>\n                <input\n                  className={styles.contentInput}\n                  value={job}\n                  placeholder=\"Accountant\"\n                  onChange={e => setJob(e.target.value)}\n                />\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>Interestes</h3>\n                <input\n                  className={styles.contentInput}\n                  value={interests}\n                  placeholder=\"Bowling, Stamp Collecting, Family\"\n                  onChange={e => setInterests(e.target.value)}\n                />\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>Favorite Websites</h3>\n                <input\n                  className={styles.contentInput}\n                  value={websites}\n                  placeholder=\"friendworld.social, fastcashmoneyplus.biz\"\n                  onChange={e => setWebsites(e.target.value)}\n                />\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>Favorite Movies, TV shows, and Music</h3>\n                <input\n                  className={styles.contentInput}\n                  value={media}\n                  placeholder=\"The Godfather, Citizen Kane, Casablanca\"\n                  onChange={e => setMedia(e.target.value)}\n                />\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>Religious Views</h3>\n                <input\n                  className={styles.contentInput}\n                  value={religion}\n                  placeholder=\"God\"\n                  onChange={e => setReligion(e.target.value)}\n                />\n              </div>\n\n              <div className={styles.inputSection}>\n                <h3>Political Views</h3>\n                <input\n                  className={styles.contentInput}\n                  value={politics}\n                  placeholder=\"Liberal/Conservative\"\n                  onChange={e => setPolitics(e.target.value)}\n                />\n              </div>\n\n              <div className={styles.buttonContainer}>\n                <button className={styles.submitButton} onClick={updateUser}>Update Profile</button>\n              </div>\n            </>\n          }\n        </div>\n      </div>\n    </div>\n  )\n}\n\n","import React from 'react';\nimport { useQuery } from 'urql'\nimport styles from './styles.module.scss'\nimport { Link } from 'react-router-dom'\nimport Post from 'components/Post'\nimport DisplayError from 'components/DisplayError'\nimport ParsedText from 'components/ParsedText'\nimport Loading from 'components/Loading'\nimport useResponsive from 'utils/useResponsive'\n\n\nconst userQuery = `\nquery userByUsername ($username: UsernameDomain!) {\n  ads {\n    totalCount\n  }\n  user: userByUsername (username: $username) {\n    id\n    createdAt\n    username\n    avatarUrl\n    email\n    gender\n    birthday\n    bio\n    job\n    interests\n    websites\n    media\n    religion\n    politics\n    trackingInfo\n    postStats: authoredPosts {\n      totalCount\n    }\n    adClicks {\n      totalCount\n    }\n    posts: authoredPostsList (orderBy: [CREATED_AT_DESC]) {\n      id\n      content\n      createdAt\n      thread {\n        id\n        title\n      }\n    }\n  }\n}`\n\ntype UserQuery = {\n  ads: {\n    totalCount: number\n  }\n  user: {\n    id: string\n    createdAt: string\n    username: string\n    avatarUrl: string | null\n    email: string | null\n    gender: string | null\n    birthday: string | null\n    bio: string | null\n    job: string | null\n    interests: string | null\n    websites: string | null\n    media: string | null\n    religion: string | null\n    politics: string | null\n    postStats: {\n      totalCount: number\n    }\n    adClicks: {\n      totalCount: number\n    }\n    posts: Array<{\n      id: string\n      content: string\n      createdAt: string\n      thread: {\n        id: string\n        title: string\n      }\n\n    }>\n  } | null\n}\n\nconst InfoSection = ({ title, info }: { title: string, info: any }) => (\n  info && (\n    <div className={styles.infoSection}>\n      <h3>{title}</h3>\n      <ParsedText content={info} />\n    </div>\n  )\n)\n\ntype Props = {\n  username: string\n}\n\nconst formatDate = (date: string) => new Date(date).toLocaleString('en-US', {\n  weekday: 'long',\n  year: 'numeric',\n  month: 'long',\n  day: 'numeric',\n  hour: 'numeric',\n  minute: 'numeric',\n  second: 'numeric'\n})\n\nconst User: React.SFC<Props> = ({ username }) => {\n  const [{ error, fetching, data }] = useQuery<UserQuery>({ query: userQuery, variables: { username } })\n  const { isMobile, isDesktop } = useResponsive(540)\n\n  if (error) return <DisplayError error={error} />\n  if (fetching) return <Loading />\n  if (!data || !data.user) return (\n    <div style={{ margin: '20px 0', textAlign: 'center' }}>\n      {username} is not an active Friendworld user!\n    </div>\n  )\n\n  const { user, ads } = data\n\n  const header = (\n    <header className={styles.header}>\n      <h1 className={styles.intro}>Welcome to {user.username}'s Profile!</h1>\n      <h4 className={styles.memberSince}>{user.username} has been a member since {formatDate(user.createdAt)}</h4>\n      <h4 className={styles.memberSince}>{user.username} has engaged with {user.adClicks.totalCount}/{ads.totalCount} pieces of sponsored content!</h4>\n    </header>\n  )\n\n  return (\n    <div className={styles.profile}>\n      {isMobile && header}\n      <div className={styles.content}>\n        <div className={styles.left}>\n          <div>\n            <div className={styles.avatar} style={{ backgroundImage: `url(${user.avatarUrl})` }} />\n            <div><strong>Posts:</strong> {user.postStats.totalCount}</div>\n            <div className={styles.sendMessage}>\n              <Link to={`/messages/${user.username}`}>Message {user.username}</Link>\n            </div>\n          </div>\n        </div>\n\n        <div className={styles.right}>\n          {isDesktop && header}\n          <div className={styles.userInfo}>\n\n          <InfoSection title=\"Gender\" info={user.gender} />\n          <InfoSection title=\"Birthday\" info={user.birthday} />\n          <InfoSection title=\"About Me\" info={user.bio} />\n          <InfoSection title=\"Occupation\" info={user.job} />\n          <InfoSection title=\"Interests\" info={user.interests} />\n          <InfoSection title=\"Favorite Websites\" info={user.websites} />\n          <InfoSection title=\"Favorite Movies, TV shows, and Music\" info={user.media} />\n          <InfoSection title=\"Religious Views\" info={user.religion} />\n          <InfoSection title=\"Political Views\" info={user.politics} />\n\n          </div>\n          <div className={styles.recentPosts}>\n            {user.posts.length ? (<>\n              <h2>Recent posts by {user.username}:</h2>\n              {user.posts.map(post => (\n                <div className={styles.postContainer} key={post.id}>\n                  <Post post={post} />\n                </div>\n              ))}\n            </>) : (\n              <h3>This user has not made any posts yet!</h3>\n            )}\n          </div>\n\n          <div className={styles.uuid}>user uuid: {user.id}</div>\n        </div>\n\n      </div>\n    </div>\n  )\n}\n\nexport default User\n","import React, { Fragment } from 'react';\nimport { Link } from 'react-router-dom'\nimport { useQuery } from 'urql'\nimport orderBy from 'lodash/orderBy'\nimport DisplayError from 'components/DisplayError'\nimport Loading from 'components/Loading'\nimport styles from './styles.module.scss'\n\nconst messagesDataQuery = `{\n  messageData: currentUser {\n    username\n    sent: messagesSentList {\n      createdAt\n      user: to {\n        username\n      }\n    }\n    received: messagesReceivedList {\n      createdAt\n      user: from {\n        username\n      }\n    }\n  }\n}`\n\ntype MessageData = {\n  createdAt: string\n  user: {\n    username: string\n  }\n}\ntype MessagesDataQuery = {\n  messageData: null | {\n    username: string\n    sent: Array<MessageData>\n    received: Array<MessageData>\n  }\n}\n\nconst collectMessages = (\n  messages: Map<string, Date>,\n  { createdAt, user: { username } }: MessageData\n) => {\n  const _createdAt = new Date(createdAt)\n  // @ts-ignore\n  if (!messages.has(username) || (messages.get(username) < _createdAt)) {\n    messages.set(username, _createdAt)\n  }\n  return messages\n}\n\nconst uniqueSortedUsers = (messageData: MessagesDataQuery['messageData']) => {\n  if (!messageData) return []\n\n  const allMessages = [...messageData.sent, ...messageData.received]\n  const messages = allMessages.reduce(collectMessages, new Map())\n\n  const values = Array.from(messages.entries())\n  return orderBy(values, [1]).reverse().map(m => m[0])\n}\n\nexport default function SidePanel() {\n  const [{ error, fetching, data }] = useQuery<MessagesDataQuery>({\n    query: messagesDataQuery\n  })\n\n  if (error) return <DisplayError error={error} />\n  if (fetching) return <Loading />\n  if (!data || !data.messageData) return null\n\n  const messageNames = uniqueSortedUsers(data.messageData)\n\n\n  return (\n    <aside className={styles.sidePanelContainer}>\n      <div className={styles.sidePanel}>\n        {messageNames.length ?\n          messageNames.map(username => (\n            <Fragment key={username}>\n              <Link to={`/messages/${username}`}>\n                <div className={styles.user}>{username}</div>\n              </Link>\n            </Fragment>\n          ))\n          : <div className={styles.emptyUsers}>You have no conversations.</div>\n        }\n      </div>\n    </aside>\n  )\n}\n","import React, { useState, useRef, useEffect } from 'react';\nimport { useQuery, useMutation } from 'urql'\nimport { Link, Redirect } from 'react-router-dom'\nimport orderBy from 'lodash/orderBy'\nimport DisplayError from 'components/DisplayError'\n// import Loading from 'components/Loading'\nimport ParsedText from 'components/ParsedText'\nimport styles from './styles.module.scss'\nimport useInterval from 'utils/useInterval'\n\nconst requestedUserQuery = `query messagesByUsername ($username: UsernameDomain!) {\n  currentUser {\n    username\n  }\n  requestedUser: userByUsername(username: $username) {\n    sent: messagesSentList {\n      id\n      content\n      createdAt\n      to {\n        username\n      }\n      from {\n        username\n      }\n    }\n    received: messagesReceivedList {\n      id\n      content\n      createdAt\n      to {\n        id\n        username\n      }\n      from {\n        id\n        username\n      }\n    }\n  }\n}`\n\nconst createMessageMutation = `mutation createMessage ($input: CreateMessageInput!) {\n  createMessage (input: $input) {\n    message {\n      id\n      content\n      from {\n        id\n        username\n      }\n    }\n  }\n}`\n\ntype Message = {\n  id: string\n  content: string\n  createdAt: string\n  to: {\n    id: string\n    username: string\n  }\n  from: {\n    id: string\n    username: string\n  }\n}\n\ntype RequestedUserQuery = {\n  currentUser?: {\n    username: string\n  }\n  requestedUser: {\n    sent: Array<Message>\n    received: Array<Message>\n  }\n}\n\ntype CreateMessageInput = {\n  input: {\n    toUsername: string\n    content: string\n  }\n}\n\ntype CreateMessagePayload = {\n  createMessage: {\n    message: Message\n  }\n}\n\ntype Props = {\n  username?: string | null\n}\n\n\n\nexport default function MessagePanel ({ username }: Props) {\n  const $sentMessages = useRef<any>(null)\n  const [messageToSend, setMessageToSend] = useState<string>('')\n  const [{ error, data }, executeQuery] = useQuery<RequestedUserQuery>({\n    query: requestedUserQuery,\n    variables: { username: username || '' }\n  })\n  const [\n    response, // eslint-disable-line\n    executeCreateMessage\n  ] = useMutation<CreateMessagePayload, CreateMessageInput>(createMessageMutation)\n\n  useInterval(() => {\n    if (!document.hidden) {\n      executeQuery({ requestPolicy: 'network-only' })\n    }\n  }, 1000)\n\n  const memoized = [\n    data\n    && data.requestedUser\n    && data.requestedUser.received && data.requestedUser.sent\n    && data.requestedUser.received.length + data.requestedUser.sent.length\n  ]\n\n  useEffect(() => {\n    if ($sentMessages.current) {\n      $sentMessages.current.scrollTop = $sentMessages.current.scrollHeight\n    }\n  }, memoized) // eslint-disable-line\n\n\n  const sendMessage = (keyPressed?: string) => {\n    if (keyPressed === 'Enter' && !!messageToSend) {\n      executeCreateMessage({\n        input: {\n          content: messageToSend,\n          toUsername: username || ''\n        }\n      })\n      setMessageToSend('')\n    }\n  }\n\n  if (error) return <DisplayError error={error} />\n  // if (fetching && !stopLoadDisplay) return <Loading />\n  if (!data || !data.currentUser) return null\n\n\n  if (data.currentUser.username === username) return <Redirect to=\"/messages\" />\n\n  const collectedMessages = data.requestedUser ? collectMessages(data.requestedUser) : []\n  const sentMessages = collectedMessages.map(message => (\n    <div className={styles.message} key={message.id}>\n      <div className={styles.sender}>\n        <Link to={`/users/${message.from.username}`}>\n          <strong>\n            {message.from.username}\n          </strong>\n        </Link>\n        <time>[{message.createdAt}]</time>\n      </div>\n      <div className={styles.content}>\n        <ParsedText content={message.content} />\n      </div>\n    </div>\n  ))\n\n  return (\n    <section className={styles.messagePanel}>\n      {!data.requestedUser && `${username} is not an active FriendWorld user`}\n      {data.requestedUser && <>\n        <div ref={$sentMessages} className={styles.sentMessages}>\n          {data.requestedUser && (collectedMessages.length\n            ? sentMessages\n            : `Send ${username} a message!`\n          )}\n        </div>\n\n        <input\n          className={styles.sendBox}\n          value={messageToSend}\n          onChange={e => setMessageToSend(e.target.value)}\n          onKeyPress={e => sendMessage(e.key)}\n          placeholder=\"Press ENTER to send message\"\n        />\n      </>}\n\n    </section>\n  )\n}\n\nconst collectMessages = (requestedUser: RequestedUserQuery['requestedUser']) => orderBy([\n  ...requestedUser.received,\n  ...requestedUser.sent\n], 'createdAt')\n","import React, { useState } from 'react'\nimport { useMutation } from 'urql'\nimport cx from 'classnames'\n\nimport styles from './styles.module.scss'\n\nconst createMessageMutation = `mutation createMessage ($input: CreateMessageInput!) {\n  createMessage (input: $input) {\n    message {\n      id\n      content\n      from {\n        id\n        username\n      }\n    }\n  }\n}`\n\ntype Message = {\n  id: string\n  content: string\n  createdAt: string\n  to: {\n    id: string\n    username: string\n  }\n  from: {\n    id: string\n    username: string\n  }\n}\n\ntype CreateMessageInput = {\n  input: {\n    toUsername: string\n    content: string\n  }\n}\n\ntype CreateMessagePayload = {\n  createMessage: {\n    message: Message\n  }\n}\n\nexport default function NewMessagePanel() {\n  const [messageToSend, setMessageToSend] = useState<string>('')\n  const [newUser, setNewUser] = useState<string>('')\n  const [\n    response, // eslint-disable-line\n    executeCreateMessage\n  ] = useMutation<CreateMessagePayload, CreateMessageInput>(createMessageMutation)\n\n  const sendMessage = () => {\n    if (!!messageToSend && !!newUser) {\n      executeCreateMessage({\n        input: {\n          content: messageToSend,\n          toUsername: newUser\n        }\n      }).then(() => {\n        window.location.href = `messages/${newUser}`\n      })\n    }\n  }\n\n  const submitOnCommandEnter = (e: any) => {\n    if (e.keyCode === 13 && e.metaKey) {\n      sendMessage()\n    }\n  }\n\n  return (\n    <section className={styles.messagePanel}>\n      <div>\n        Send a new message to:\n        <div>\n          <input\n            className={styles.sendBox}\n            placeholder=\"Enter username here\"\n            value={newUser}\n            onChange={e => setNewUser(e.target.value)}\n          />\n          <textarea\n            className={cx(styles.sendBox, styles.newMessageBox)}\n            value={messageToSend}\n            onChange={e => setMessageToSend(e.target.value)}\n            placeholder=\"Enter message here\"\n            onKeyDown={submitOnCommandEnter}\n          />\n        </div>\n        <button className={styles.submitButton} onClick={sendMessage}>Send</button>\n      </div>\n    </section>\n  )\n}\n","import React, { useState } from 'react';\nimport { Link, Redirect } from 'react-router-dom'\n\nimport { useQuery } from 'urql'\nimport styles from './styles.module.scss'\nimport useResponsive from 'utils/useResponsive'\nimport DisplayError from 'components/DisplayError'\nimport Loading from 'components/Loading'\nimport SidePanel from './SidePanel'\nimport MessagePanel from './MessagePanel'\nimport NewMessagePanel from './NewMessagePanel'\n\n\nconst currentUserQuery = `{\n  currentUser {\n    username\n  }\n}`\n\ntype CurrentUserQuery = {\n  currentUser?: {\n    username: string\n  }\n}\n\ntype Props = {\n  username?: string | null\n}\n\ntype State = {\n  newMessage: boolean\n}\n\nconst Messages: React.SFC<Props> = ({ username }) => {\n  const { isMobile, isDesktop } = useResponsive(450)\n  const [newMessage, setNewMessage] = useState<State['newMessage']>(false)\n  const [{ data, error, fetching }] = useQuery<CurrentUserQuery>({ query: currentUserQuery })\n\n  if (error) return <DisplayError error={error} />\n  if (fetching) return <Loading />\n\n  if (data && !data.currentUser) {\n    return <Redirect to=\"/signup\" />\n  } else if (data && data.currentUser && data.currentUser.username === username) {\n    return <Redirect to=\"/messages\" />\n  }\n\n  return (\n    <div className={styles.messages}>\n      <header className={styles.header}>\n        <h1>Message Console</h1>\n        {isMobile && (newMessage || username)\n          ? <Link to=\"/messages\" onClick={() => setNewMessage(false)}>{'< All Messages'}</Link>\n          : <Link to=\"/messages\" onClick={() => setNewMessage(true)}>New Message</Link>\n        }\n      </header>\n\n      <section className={styles.messagesSection}>\n        {isMobile && (\n          <div className={styles.mobileContainer}>\n            {username && <MessagePanel username={username} />}\n            {!username && newMessage && <NewMessagePanel />}\n            {!username && !newMessage && <SidePanel />}\n          </div>\n        )}\n\n        {isDesktop && (\n          <div className={styles.desktopContainer}>\n            <SidePanel />\n\n            {username && <MessagePanel username={username} />}\n            {!username && <NewMessagePanel />}\n\n          </div>\n        )}\n      </section>\n    </div>\n  )\n}\n\nexport default Messages\n","import * as React from 'react';\nimport { useQuery } from 'urql'\nimport { Link } from 'react-router-dom'\nimport styles from './styles.module.scss'\nimport useResponsive from 'utils/useResponsive'\nimport profanityFilter from 'utils/profanityFilter'\nimport partition from 'lodash/partition'\n\nimport DisplayError from 'components/DisplayError'\nimport Loading from 'components/Loading'\nimport AdContainer, { useAds } from '../AdContainer'\n\n\nconst threadQuery = `{\n  currentUser {\n    id\n  }\n  threads: threadsList (orderBy: [LATEST_POST_TIME_DESC]) {\n    id\n    title\n    hidden\n    latestPostTime\n    postStats: posts {\n      totalCount\n    }\n    posts: postsList (first: 1, orderBy: [CREATED_AT_DESC]) {\n      author {\n        username\n      }\n    }\n  }\n}`\n\ntype Thread = {\n  id: number,\n  title: string,\n  hidden: boolean\n  latestPostTime: string,\n  posts: Array<{ author: { username: string } }>\n  postStats: {\n    totalCount: number\n  }\n}\ntype ThreadQuery = {\n  threads: Array<Thread>\n  currentUser: null | {\n    id: string\n  }\n}\n\nconst ThreadPost = ({ thread }: { thread: Thread }) => {\n  const userName = thread.posts[0] && thread.posts[0].author.username\n  const title = profanityFilter(\n    thread.title.length > 297\n      ? thread.title.substring(0, 297) + '...'\n      : thread.title\n  )\n\n  return (\n    <article key={thread.id} className={styles.threadPost}>\n      <Link className={styles.postLink} to={`/threads/${thread.id}`}>{title}</Link>\n      <div className={styles.info}><strong>LAST POST:</strong> <time>[{thread.latestPostTime}]</time></div>\n      <div className={styles.info}><strong>by: </strong>\n        <Link to={`/users/${userName}`}>{userName}</Link>\n      </div>\n      <div className={styles.info}><strong>POSTS:</strong> {thread.postStats.totalCount}</div>\n    </article>\n  )\n}\n\nconst stickiedThreads = [1]\n\nconst Forum: React.SFC<{}> = () => {\n  const { isMobile, isDesktop } = useResponsive(540)\n  const [{ fetching, error, data }] = useQuery<ThreadQuery>({ query: threadQuery })\n  const { ads, fetchingAds } = useAds(6)\n  const showMobileAd = (i: number) => {\n    const adFreq = 4\n    if (!isMobile) return false\n    if ((i + 1) % adFreq) return false\n\n    const adIx = (((i + 1) / adFreq) - 1) % ads.length\n\n    return (\n      <div className={styles.adContainer}>\n        <AdContainer ads={[ads[adIx]]} fetching={fetchingAds} />\n      </div>\n    )\n  }\n\n  const partitioned:[Array<Thread>, Array<Thread>] = data && data.threads\n    ? partition(data.threads, thread => stickiedThreads.includes(thread.id))\n    : [[], []]\n\n\n  return (\n    <section className={styles.forum}>\n      <section className={styles.left}>\n        {fetching && <Loading />}\n        {error && <DisplayError error={error} />}\n        {data && (\n          <>\n            {data.currentUser &&\n              <div className={styles.quickLinks}>\n                <strong>quick links:</strong>{' '}\n                <Link to=\"/messages\">Messages</Link>{', '}\n                <Link to=\"/profile\">Update Profile</Link>{', '}\n                <Link to=\"/stats\">Stats</Link>\n              </div>\n            }\n            <header className={styles.header}>\n              <h1>Forum</h1>\n              <Link to=\"/threads/new\" className={styles.startThread}>\n                Start A Thread!\n              </Link>\n            </header>\n            <div style={{ border: '1px dashed', padding: '3px', paddingBottom: 0, marginBottom: '10px'}}>\n              <ThreadPost thread={partitioned[0][0]} />\n            </div>\n            {partitioned[1].length && partitioned[1].map((thread, i) =>\n              <React.Fragment key={thread.id}>\n                {showMobileAd(i)}\n                {!thread.hidden &&\n                  <ThreadPost thread={thread} />\n                }\n              </React.Fragment>\n            )}\n          </>\n        )}\n      </section>\n      {isDesktop && <AdContainer ads={ads} fetching={fetchingAds}/>}\n    </section>\n\n  )\n}\n\nexport default Forum\n","import React from 'react';\nimport { useQuery } from 'urql'\nimport { Link } from 'react-router-dom'\n\nimport DisplayError from 'components/DisplayError'\nimport Loading from 'components/Loading'\nimport styles from './styles.module.scss'\n\n\nconst statsQuery = `{\n  userStatsList {\n    username\n    postCount\n  }\n  userAdClicksList {\n    username\n    adClicks\n  }\n}`\n\ntype StatsQuery = {\n  userStatsList: Array<{\n    username: string\n    postCount: string\n  }>\n  userAdClicksList: Array<{\n    username: string\n    adClicks: string\n  }>\n}\n\n\n\nfunction Stats() {\n  const [{ error, fetching, data }] = useQuery<StatsQuery>({ query: statsQuery })\n\n  if (error) {\n    debugger\n    return <DisplayError error={error} />\n  }\n  if (fetching) return <Loading />\n  if (!data) return null\n\n  return (\n    <section className={styles.stats}>\n      <h1>User Stats</h1>\n      <div className={styles.sectionContainer}>\n        <div className={styles.statSection}>\n          <h2>Top Posters:</h2>\n          <table>\n            <thead>\n              <tr>\n                <th></th>\n                <th>Username</th>\n                <th>Posts</th>\n              </tr>\n            </thead>\n            <tbody>\n              {data.userStatsList.map((stat, i) => (\n                <tr key={i}>\n                  <td>{i + 1}.</td>\n                  <td>\n                    <Link to={`/users/${stat.username}`}>{stat.username}</Link>\n                  </td>\n                  <td>{stat.postCount}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n        <div className={styles.statSection}>\n          <h2>Sponsored Content Engagements:</h2>\n          <table>\n            <thead>\n              <tr>\n                <th></th>\n                <th>Username</th>\n                <th>Engagements</th>\n              </tr>\n            </thead>\n            <tbody>\n              {data.userAdClicksList.map((stat, i) => (\n                <tr key={i}>\n                  <td>{i + 1}.</td>\n                  <td>\n                    <Link to={`/users/${stat.username}`}>{stat.username}</Link>\n                  </td>\n                  <td>{stat.adClicks}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </section>\n  )\n}\n\nexport default Stats\n","import React from 'react';\nimport { Link } from 'react-router-dom'\nimport styles from './styles.module.scss'\n\n\nfunction Onboarding() {\n  return (\n    <section className={styles.onboarding}>\n      <div className={styles.card}>\n        <h1>Welcome to Friendworld!</h1>\n        <p>Thanks for signing up! Please fill out your profile so everyone knows what you're all about!</p>\n        <Link to=\"/profile\">Click here to update your profile</Link>\n        <p>Or, hit the forums now and fill out your profile later :)</p>\n        <Link to=\"/\">Click here to go to the forum</Link>\n      </div>\n    </section>\n  )\n}\n\nexport default Onboarding\n","import React from 'react'\n\nimport { useQuery } from 'urql'\nimport Ad from 'components/Ad'\nimport DisplayError from 'components/DisplayError'\nimport Loading from 'components/Loading'\n\nconst adQuery = `{\n  stats: ads {\n    totalCount\n  }\n  ads: adsList {\n    id\n    url\n    img\n    content\n    tags\n    isGeneric\n    weight\n    targetTags\n    primaryTags\n  }\n}`\n\nfunction DevAds() {\n  const [{ data, fetching, error }] = useQuery({ query: adQuery })\n  if (process.env.NODE_ENV !== 'development') return 'ads'\n  if (error) return <DisplayError error={error} />\n  if (fetching) return <Loading />\n  if (!data) return 'no data'\n\n  return (\n    <div>\n      <h1>Total Ads: {data.stats.totalCount}</h1>\n      {data.ads.map((ad: any) =>\n        <div key={ad.id} style={{ border: '1px solid', padding: '5px', margin: '10px' }}>\n          <div style={{ maxWidth: '400px' }}>\n            <Ad {...ad} />\n          </div>\n          <pre>{JSON.stringify(ad, null, 3)}</pre>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default DevAds\n","import * as React from 'react'\nimport { withRouter, Route, Switch } from 'react-router-dom'\nimport { RouteComponentProps } from 'react-router'\n\nimport Body, { Width } from 'components/Body'\nimport Nav from 'containers/Nav'\nimport Login from 'containers/Login'\nimport Signup from 'containers/Signup'\nimport Posts from 'containers/Posts'\nimport Threads from 'containers/Threads'\nimport NewThread from 'containers/NewThread'\n\nimport Profile from 'containers/Profile'\nimport User from 'containers/User'\nimport Messages from 'containers/Messages'\nimport Forum from 'containers/Forum'\nimport Stats from 'containers/Stats'\nimport Onboarding from 'containers/Onboarding'\nimport DevAds from 'containers/DevAds'\n\n\nclass App extends React.Component<RouteComponentProps> {\n  componentDidUpdate(prevProps: RouteComponentProps) {\n    if (this.props.location !== prevProps.location) {\n      window.scrollTo(0, 0)\n    }\n  }\n\n  render() {\n    return (\n      <main className=\"App\">\n        <Route path=\"/\" component={Nav} />\n\n        <Body>\n          <Switch>\n            <Route exact path=\"/\" component={Forum} />\n            <Route exact path=\"/threads/new\" component={NewThread} />\n\n            <Route exact path=\"/threads/:id\" render={({ match }) =>\n              <Threads id={Number(match.params.id)} />\n            }/>\n\n            <Route exact path=\"/messages\" render={({ match }) =>\n              <Messages />\n            }/>\n\n            <Route path=\"/messages/:username\" render={({ match }) =>\n              <Messages username={match.params.username} />\n            }/>\n\n\n            <Route path=\"/posts/:id\" render={({ match }) =>\n              <Posts id={Number(match.params.id)} />\n            }/>\n\n            <Route path=\"/users/:username\" render={({ match }) =>\n              <User username={match.params.username} />\n            }/>\n\n            <Route exact path=\"/login\" component={Login} />\n            <Route exact path=\"/signup\" component={Signup} />\n            <Route exact path=\"/profile\" component={Profile} />\n            <Route exact path=\"/stats\" component={Stats} />\n            <Route exact path=\"/onboarding\" component={Onboarding} />\n            <Route exact path=\"/dev/ads\" component={(DevAds as any)} />\n\n          </Switch>\n        </Body>\n\n        <footer style={{ fontSize: '11px', padding: '10px 0'}}>\n          <Width>(c) 2019 FriendWorld.social</Width>\n        </footer>\n      </main>\n    )\n  }\n}\n\n\n\n\nexport default withRouter(App)\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { Provider, createClient } from 'urql';\nimport App from './App';\nimport jwt from './utils/jwt'\n\njwt.setTrackingToken()\n\nconst isProd = process.env.NODE_ENV === 'production'\nconst client = createClient({\n  url: isProd\n    ? 'https://friendworld.appspot.com/graphql'\n    : 'http://localhost:5000/graphql',\n  fetchOptions: () => {\n    const jwtToken = jwt.get()\n    if (jwtToken) {\n      return {\n        headers: {\n          Authorization: `Bearer ${jwtToken}`,\n          trackingToken: jwt.getTrackingToken() || ''\n        }\n      }\n    } else {\n      return {\n        headers: {\n          trackingToken: jwt.getTrackingToken() || ''\n        } as any\n      }\n    }\n  }\n})\n\nconst hours = new Date().getHours();\nif (hours < 5 || hours >= 22) document.body.className = 'nightmode';\n\nReactDOM.render(\n  (\n    <Provider value={client}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>\n  ),\n  document.getElementById('root')\n );\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"signup\":\"styles_signup__1TBgB\",\"card\":\"styles_card__2i6Va\",\"inputs\":\"styles_inputs__2-zI-\",\"submitButton\":\"styles_submitButton__1RQ0F\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1c7gy\",\"inner\":\"styles_inner__2Y1v5\",\"contentInput\":\"styles_contentInput__1FYQK\",\"submitButton\":\"styles_submitButton__F4S4o\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"stats\":\"styles_stats__AKzjd\",\"statSection\":\"styles_statSection__2sbUJ\",\"sectionContainer\":\"styles_sectionContainer__2Iauo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"styles_header__kQFtS\",\"memberSince\":\"styles_memberSince__6_eN_\",\"content\":\"styles_content__2k8HI\",\"left\":\"styles_left__3RLgw\",\"right\":\"styles_right__1wvr3\",\"avatar\":\"styles_avatar__up-xt\",\"subheader\":\"styles_subheader__2yCNY\",\"postContainer\":\"styles_postContainer__8sWw_\",\"recentPosts\":\"styles_recentPosts__2pfm9\",\"inputSection\":\"styles_inputSection__3flum\",\"contentInput\":\"styles_contentInput__1yKr9\",\"submitButton\":\"styles_submitButton__qntJH\",\"profile\":\"styles_profile__CnGcI\",\"buttonContainer\":\"styles_buttonContainer__21qge\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"styles_login__1bddG\",\"card\":\"styles_card__342W-\",\"submitButton\":\"styles_submitButton__3gLIc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"adContainer\":\"styles_adContainer__lMNuW\",\"label\":\"styles_label__2MmNX\",\"adWrapper\":\"styles_adWrapper__7ikg8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3ZrW4\",\"content\":\"styles_content__mkpSL\",\"title\":\"styles_title__g_H6k\",\"links\":\"styles_links__1lT-N\",\"link\":\"styles_link__2r07p\",\"user\":\"styles_user__KXrwW\",\"circle\":\"styles_circle__3a6lQ\",\"label\":\"styles_label__3nbc0\",\"unread\":\"styles_unread__39lvg\",\"unread1\":\"styles_unread1__1t29L\",\"Unread\":\"styles_Unread__20_Xf\",\"unread2\":\"styles_unread2__1gjma\",\"unread3\":\"styles_unread3__2odvK\",\"Rotate\":\"styles_Rotate__Jr-hj\",\"unread4\":\"styles_unread4__2qCGs\",\"Breathe\":\"styles_Breathe__TeGmQ\",\"dropdownPosition\":\"styles_dropdownPosition__RvAKI\",\"dropdown\":\"styles_dropdown__3tTva\",\"alert\":\"styles_alert__2nkwt\",\"alertDropdown\":\"styles_alertDropdown__28W3J\",\"noAlerts\":\"styles_noAlerts__aWfQ5\",\"userDropdown\":\"styles_userDropdown__3RMMv\",\"switchAccounts\":\"styles_switchAccounts__3Okr5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"width\":\"styles_width__2uPjX\",\"body\":\"styles_body__3rj8V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"back\":\"styles_back__3PY0I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ad\":\"styles_ad__tC5Qg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"onboarding\":\"styles_onboarding__3XU1K\",\"card\":\"styles_card__PWU0O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"styles_header__hU_hQ\",\"messagesSection\":\"styles_messagesSection__2TjQW\",\"mobileContainer\":\"styles_mobileContainer__2EvvN\",\"desktopContainer\":\"styles_desktopContainer__hT0b1\",\"messagePanel\":\"styles_messagePanel__3ea8x\",\"sentMessages\":\"styles_sentMessages__-5hBn\",\"newMessageBox\":\"styles_newMessageBox__151Oc\",\"sendBox\":\"styles_sendBox__2qRGc\",\"submitButton\":\"styles_submitButton__3lvS8\",\"message\":\"styles_message__Ok6NK\",\"sender\":\"styles_sender__2ZGF9\",\"sidePanelContainer\":\"styles_sidePanelContainer__3Z_GC\",\"emptyUsers\":\"styles_emptyUsers__2F5wl\",\"sidePanel\":\"styles_sidePanel__2cb8A\",\"user\":\"styles_user__3s6J6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"x\":\"styles_x__2XNkA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"img\":\"styles_img__2wl0K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"styles_error__30xW5\"};"],"sourceRoot":""}