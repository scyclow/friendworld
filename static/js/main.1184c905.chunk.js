(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports={header:"styles_header__2wLxh",profile:"styles_profile__31rzl",intro:"styles_intro__1X3Y3",memberSince:"styles_memberSince__1jhAK",sendMessage:"styles_sendMessage__3284j",content:"styles_content__1_9jW",left:"styles_left__vhBr7",right:"styles_right__1-xIl",avatar:"styles_avatar__1sUtC",postContainer:"styles_postContainer__35feo",recentPosts:"styles_recentPosts__1aAFm",infoSection:"styles_infoSection__2k3k7",uuid:"styles_uuid__36WGZ"}},104:function(e,t,a){},14:function(e,t,a){e.exports={post:"styles_post__2wjTj",avatar:"styles_avatar__2GJc8",header:"styles_header__19BhD",threadLink:"styles_threadLink__3x7tb",username:"styles_username__2fJ1r",totalPosts:"styles_totalPosts__1YOIB",main:"styles_main__TKFmC",panel:"styles_panel__3ULdb",panelContainer:"styles_panelContainer__2nRTc",userInfo:"styles_userInfo__3SK-L",content:"styles_content__2Ru5-",footer:"styles_footer__dMb2p",postedAt:"styles_postedAt__9cLJi"}},15:function(e,t,a){e.exports={threadTitle:"styles_threadTitle__nzF4M",signup:"styles_signup__2AxnY",disabled:"styles_disabled__1TmJj",left:"styles_left__1P-Yx",back:"styles_back__2jFxT",threadLink:"styles_threadLink__1hkCr",addPost:"styles_addPost__1-izz",adContainer:"styles_adContainer__2ZcDv",ad:"styles_ad__36g-4",threadContainer:"styles_threadContainer__22gH-"}},16:function(e,t,a){e.exports={header:"styles_header__VUeZN",startThread:"styles_startThread__2DdKA",quickLinks:"styles_quickLinks__cJQge",info:"styles_info__2f1QB",threadPost:"styles_threadPost__3SWHg",postLink:"styles_postLink__2yHjb",forum:"styles_forum__AVThT",adContainer:"styles_adContainer__3zUCc",left:"styles_left__2_RIC"}},19:function(e,t,a){e.exports={back:"styles_back__3iTuS",input:"styles_input__rHUWj",sectionTitle:"styles_sectionTitle__2wqKD",label:"styles_label___0hEN",signup:"styles_signup__34diQ",disabled:"styles_disabled__3WJTC"}},219:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(82),c=a.n(s),l=(a(104),a(223)),i=a(3),o=a(83),u=a(84),m=a(96),d=a(85),p=a(97),g=a(222),f=a(226),h=a(225),_=a(45),E=a(57),v=a.n(E),b=function(e){var t=e.children,a=Object(_.a)(e,["children"]);return n.createElement("div",Object.assign({className:v.a.width},a),t)},y=function(e){var t=e.children;return n.createElement("div",{className:v.a.body},n.createElement(b,null,t))},k=a(1),j=a(221),O=a(11),N=a.n(O),w=function(){return{innerHeight:window.innerHeight,innerWidth:window.innerWidth}},C=function(e,t){return function(){return window.addEventListener(e,t),function(){return window.removeEventListener(e,t)}}};function S(e){var t=Object(n.useState)(w().innerWidth<=e),a=Object(k.a)(t,2),r=a[0],s=a[1];return Object(n.useEffect)(C("resize",function(){var t=r,a=w().innerWidth<=e;t!==a&&s(a)})),{isMobile:r,isDesktop:!r}}function U(e,t){var a=Object(n.useRef)(null);Object(n.useEffect)(function(){a.current=e},[e]),Object(n.useEffect)(function(){if(null!==t){var e=setInterval(function(){a.current()},t);return function(){return clearInterval(e)}}},[t])}var T=a(5),x=a.n(T),I=a(18),A=a(86),P=a.n(A),L={border:"1px solid",borderRadius:"100%"},B=function(e){var t=e.onClick,a=e.ring;return n.createElement("span",{className:P.a.x,style:a?L:{},onClick:t},"x")},M=a(6),q={male:["man","male","m","boy","guy","b","dude","bro","penis","dick","cock"],female:["woman","female","f","girl","g","gal","broad","bitch","vagina"],other:["transgender","transexual","trans","t","transmasculine","transfeminine","intergender","agender","androgynous"]},D=new Set([].concat(["fastcash","fastcashmoneyplus","fastcashmoneyplusbiz","fastcashmoneybiz","moneybucks","bucks","fast","cash","money","rich","wealth","saving","savings","crypto","cryptocurrency","bitcoin","btc","ethereum","eth","invest","investing","finance","ico","fortune","millionaire","billionaire","blockchain","economy","payment","trick","profit"],["woo","spirit","spirituality","god","chakra","chakras","sound","meditation","reality","dream","dreams","hypnosis","mantra","mantras","technique","energy","karma","cleanse","vegan","ascend","ascension","newage"],["sad","depressed","melencholy","anxious","anxiety","depression","anhedonia","motivation","happy","mental","brain","suicide","suicidal","ocd","obsessed","scared","fear","emptiness","cbd","antidepressant"],["politics","political","government","taxes","democrats","republicans","gop","liberal","liberals","conservative","conservatives","libtards","cucks","cuck","trump","clinton","jews","rockefellers","jfk","fascism","fascist","socialist","socialism","abortion","guns","shillary","sjw","sjws","social","justice","warriors","global","china","russia","fakebullshit","fakebullshitnews"],["achieve","love","sex","greed","power","pizza","hammers","soap","puppies","cats","friendworld","friendworldsocial","trains","subway","food","candy","family"],["ti","targeted","target","tracking","conspiracy","nuclear","drone","5g","radiation","alien","aliens","ufo","ufos","roswell","brain","mind-control","chemtrails","tracking"],Object(M.a)(q.male),Object(M.a)(q.female),Object(M.a)(q.other),["fastcash","fastcashmoneyplus","fastcashmoneyplusbiz","fastcashmoneybiz","moneybucks","bucks","fast","cash","money","rich","wealth","saving","savings","crypto","cryptocurrency","bitcoin","btc","ethereum","eth","invest","investing","finance","ico","fortune","millionaire","billionaire","blockchain","economy","payment","trick","profit","throwing","economic","explosion","market","comfort","home","house","apartment","success","food","taste","suit","dream","dreams","sleep","pillow","weird","family","vortex","hillary","clinton","politics","political","government","democrats","republicans","gop","liberal","liberals","conservative","conservatives","libtards","cucks","cuck","socialist","socialism","shillary","sjw","sjws","social","justice","warriors","science","chemicals","chemtrails","target","targeted","targeting","woo","cleanse","spirit","mental","spirituality","god","chakra","chakras","sound","meditation","reality","hypnosis","mantra","mantras","technique","energy","karma","vegan","ascend","ascension","newage","consciousness","ti","individual","tracking","conspiracy","nuclear","drone","5g","radiation","alien","aliens","ufo","ufos","roswell","brain","mind-control","sad","depressed","melencholy","anxious","anxiety","depression","anhedonia","motivation","happy","suicide","suicidal","ocd","obsessed","scared","fear","emptiness","cbd","antidepressant","addicted","addicting","addiction","internet","evacuate","planet","wrong","psychology","remember","forget","forgetting","foot","death","toenail","nail","fungus","feet","elderly","back","pain","organ","organs","accupuncture","intestine","liver","heart","male","man","testosterone","hair","loss","bald","balding","woman","female","fat","skinny","pepper","hot","furnace","drip","cancer","stop","dead","blood","cells","add","indigo","child","children","special","collective","illuminati","holocaust","internet-of-things","iot","vr","virtual","individuality","jew","jews","jewish","semetic","subliminal","astral","projection","light","healing","luck","clover","horseshoe","sexy","binaural","beats","music","sperm","seamen","sex","digital","hologram","simulation","illusion","numbers","numeric","dna","information","funny","laugh","laughing","lol","haha","kitty","kitten","cat","meow","virus","infected","pleiadians","space","physics","bunker","atlas","nuke","war","disaster","apocalypse","bomb","survival","shelter","girl","doctor","bowels","shit","poop","constipated","octopus","puzzle","stimulation","electrode","dbs","deep","therapy","scanners","scanner","tracker","beauty","ugly","surgery","plastic","constipation","constipate","poo","darpa","mind","control","pot","weed","drugs","marijuana","seduction","dating","romance","singles","chess","666","2016","freemasonry","universal","emperor","42","miracle","hell","genesis","bread","jesus","christianity","sandwich","bible","safe","safety","spyware","malware","security","towers","smartphone","weaponized","thoughts","cognitive","knowledge","processing","radio","transmission","nsa","microwave","frequency","nwo","new","world","order","state","corruption","x-ray","skull","dopamine","driving","muscle","work","hate","emf","electromagnetic","relationship","cocreate","relationships","electo","magnetic","intuition","soul","dreaming","lucid","suffering","jewelry","electric","buddha","moon","christ","blessing","buddhism","harmony","harmonics","spiritual","unarius","venus","mars","water","hydrogen","ion","acidic","alkaline","radicals","health","h20","infinity","oasis","ph","teeth","tooth","dental","dentist","implants","implant","cavity","mouth","gums","dentures","weight","quantum","motivaitonal","phobia"])),F=a(58),J=a.n(F),W=/^(http|https):\/\/.+\..+/,$=/(\.jpg$)|(\.jpeg$)|(\.png$)|(\.gif$)|(\.svg$)/,R=/^@.+/,z=/^#.+/,K=/^\/posts\/.+/,G=/^\/threads\/.+/;function V(e){return(e=ee(e)).match(R)}function H(e){return(e=ee(e)).match(z)}function Q(e){return D.has(ee(e.toLowerCase()))}function X(e){return e.split(" ").filter(V).map(function(e){return ee(e,/^@/)})}function Y(e){return e.split(" ").map(function(e){return ee(e).toLowerCase()}).filter(Q)}function Z(e){return{tags:JSON.stringify((t=e,t.split(" ").filter(H).map(function(e){return ee(e,/^#/).toLowerCase()})).concat(Y(e))),usernames:JSON.stringify(X(e))};var t}function ee(e,t){return e.replace(t?new RegExp(t,"g"):"","").replace(/(\.|\?|!|:|;|,|'|")+$/,"")}var te=a(87),ae=a.n(te);function ne(e){var t=e.url,a=e.alt,r=Object(_.a)(e,["url","alt"]);return n.createElement("img",Object.assign({className:ae.a.img,src:t,alt:a},r))}var re=a(88),se=a.n(re);function ce(e){return se()({motherfucker:"m0therf_cker",fuck:"f_ck",shit:"poo"," dick ":"penis",bitch:"b!tch",cunt:"c%nt",cocksuck:"c*cks^ck",cock:"c*ck",nigger:"african-american",nigga:"pal"," fag ":"homosexual",faggot:"homosexual",tranny:"transexual"," god ":"g-d",goddamn:"goshdarn",pussy:"p#ssy"},function(t,a){e=e.replace(a,t)}),e}var le={maxHeight:300},ie=function(e){if((u=ee(u=e)).match($)&&u.match(W))return n.createElement(ne,{url:e,style:le,alt:"user posted content"});if(function(e){return(e=ee(e)).match(W)}(e))return n.createElement("a",{href:ee(e),target:"_blank",rel:"noopener noreferrer"},e);if(V(e)){var t=ee(e,/^@/),a=e.replace(t,"").replace(/^@/,"");return n.createElement(n.Fragment,null,n.createElement(j.a,{to:"/users/".concat(t)},"@",ce(t)),a)}if(H(e)){var r=ee(e,/^#/),s=e.replace(r,"").replace(/^#/,"");return n.createElement(n.Fragment,null,n.createElement(j.a,{to:"/hashtag/".concat(r.toLowerCase())},"#",ce(r)),s)}if(function(e){return(e=ee(e)).match(K)}(e)){var c=ee(e,/^\/posts\//),l=e.replace(c,"").replace(/^\/posts\//,"");return n.createElement(n.Fragment,null,n.createElement(j.a,{to:"/posts/".concat(c)},"/posts/",c),l)}if(function(e){return(e=ee(e)).match(G)}(e)){var i=ee(e,/^\/threads\//),o=e.replace(i,"").replace(/^\/threads\//,"");return n.createElement(n.Fragment,null,n.createElement(j.a,{to:"/threads/".concat(i)},"/threads/",i),o)}return ce(e);var u},oe=function(e,t){if(!e.length)return[t];var a,n=(a=e)[a.length-1];return"string"===typeof n&&"string"===typeof t?[].concat(Object(M.a)(e.slice(0,-1)),[n+" "+t]):"string"===typeof n?[].concat(Object(M.a)(e.slice(0,-1)),[n+" ",t]):[].concat(Object(M.a)(e),[" ",t])},ue=function(e,t){return n.createElement(n.Fragment,{key:t},e)},me=function(e){return e.split("\n").map(function(e,t){return n.createElement("p",{key:t},e.split(" ").map(ie).reduce(oe,[]).map(ue))})};function de(e){var t=e.content;return n.createElement(n.Fragment,null,me(t))}var pe=function(e){var t=e.alerts,a=e.readAlert;return r.a.createElement(r.a.Fragment,null,t.map(function(e){return r.a.createElement("div",{key:e.id,className:x.a.alert,onClick:function(){return a(e.id)}},r.a.createElement(B,{ring:!0}),e.link?r.a.createElement(j.a,{to:e.link},e.content):r.a.createElement(de,{content:e.content}))}))},ge=function(e){var t=e.alerts,a=e.onEmptyClick,n=e.readAlert;return r.a.createElement("div",{className:x.a.alertDropdown},t.length?r.a.createElement(pe,{alerts:t,readAlert:n}):r.a.createElement("div",{className:x.a.noAlerts,onClick:a},"No Alerts!"))},fe=function(e){var t,a=e.unread;return r.a.createElement("div",{className:N()(x.a.circle,(t={},Object(I.a)(t,x.a.unread,a),Object(I.a)(t,x.a.unread1,a>0&&a<5),Object(I.a)(t,x.a.unread2,a>=5&&a<10),Object(I.a)(t,x.a.unread3,a>=10&&a<15),Object(I.a)(t,x.a.unread4,a>=15),t))},a||0)},he="__JWT__",_e=function(){var e=localStorage.getItem(he);return e?JSON.parse(e):{__currentUser__:""}},Ee=_e();Ee.steve_p&&(delete Ee.steve_p,localStorage.setItem(he,JSON.stringify(Ee))),Ee.Steve_p&&(delete Ee.Steve_p,localStorage.setItem(he,JSON.stringify(Ee)));var ve=function(){return localStorage.getItem("__TRACKING_TOKEN__")||""},be={get:function(){var e=_e();return e[e.__currentUser__]},getMapping:_e,getCurrentUser:function(){var e=_e();return{username:e.__currentUser__,jwt:e[e.__currentUser__]}},getInnactiveUserList:function(){var e=_e();return Object.keys(e).filter(function(t){return"__currentUser__"!==t&&t!==e.__currentUser__}).map(function(t){return{username:t,jwt:e[t]}})},getTrackingToken:ve,setTrackingToken:function(){try{var e=ve();if(e)return e;var t="".concat(Date.now(),"-").concat(Math.random());return localStorage.setItem("__TRACKING_TOKEN__",t),t}catch(a){console.log("could not set trakcing token: ",a)}},set:function(e,t){var a=_e();a[e]=t,localStorage.setItem(he,JSON.stringify(a))},setCurrentUser:function(e){var t=_e();t.__currentUser__=e,localStorage.setItem(he,JSON.stringify(t))},clearCurrentUser:function(){var e=_e();e.__currentUser__="",localStorage.setItem(he,JSON.stringify(e))}},ye=function(){be.clearCurrentUser(),window.location.reload()},ke=function(){var e=be.getInnactiveUserList(),t=function(){try{return JSON.parse(localStorage.__JWT__).__currentUser__}catch(e){return console.log(e),""}}();return r.a.createElement("ul",{className:x.a.userDropdown},r.a.createElement(j.a,{to:"/users/".concat(t)},r.a.createElement("li",null,r.a.createElement("div",null,"View Profile"))),r.a.createElement(j.a,{to:"/profile"},r.a.createElement("li",null,r.a.createElement("div",null,"Update Profile"))),r.a.createElement(j.a,{to:"/messages"},r.a.createElement("li",null,r.a.createElement("div",null,"Messages"))),r.a.createElement("a",{href:"#logout",onClick:ye},r.a.createElement("li",null,"Logout")),r.a.createElement(j.a,{to:"/login"},r.a.createElement("li",null,r.a.createElement("div",null,"Login"))),r.a.createElement(j.a,{to:"/signup"},r.a.createElement("li",null,r.a.createElement("div",null,"Create Account"))),!!e.length&&r.a.createElement("div",{className:x.a.switchAccounts},r.a.createElement("strong",null,"Switch Account"),r.a.createElement("ul",null,e.map(function(e){var t=e.username;return r.a.createElement("li",{key:t,onClick:function(){return function(e){be.setCurrentUser(e),window.location.reload()}(t)}},t)}))))},je="__dropdown_component__";function Oe(e){var t=e.children,a=e.hide,s=function(e){var t=document.getElementById(je);t&&e.target!==t&&!t.contains(e.target)&&a()};return Object(n.useEffect)(function(){return document.addEventListener("click",s),function(){return document.removeEventListener("click",s)}}),r.a.createElement("div",{id:je,className:N()(x.a.dropdown,"solid")},t)}var Ne="{\n  currentUser {\n    id\n    username\n    avatarUrl\n    alerts: alertsList (condition: { read: false }) {\n      id\n      content\n      link\n    }\n  }\n}",we="\nmutation readAlert($input: ReadAlertInput!) {\n  readAlert(input: $input) {\n    alert {\n      id\n      read\n    }\n  }\n}";var Ce=function(e){var t=e.toggleDropdownVisible,a=e.currentUser,n=e.loading;return r.a.createElement("div",{className:x.a.content},r.a.createElement(j.a,{to:"/"},r.a.createElement("div",{className:x.a.title},"FriendWorld")),r.a.createElement("div",{className:x.a.links},a?r.a.createElement(Se,{currentUser:a,toggleDropdownVisible:t}):!n&&r.a.createElement(Ue,null)))},Se=function(e){var t=e.currentUser,a=e.toggleDropdownVisible,n=S(540),s=n.isDesktop,c=n.isMobile;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:x.a.link,onClick:function(){return a("users")},style:{maxWidth:"180px",overflow:"auto"}},t.username,r.a.createElement("div",{className:N()(x.a.circle,x.a.user),style:{backgroundImage:"url(".concat(t.avatarUrl,")")}})),s&&r.a.createElement("div",{className:x.a.link,onClick:function(){return a("alerts")}},"Alerts",r.a.createElement(fe,{unread:t.alerts.length})),c&&r.a.createElement("div",{className:x.a.link,onClick:function(){return a("alerts")}},r.a.createElement(fe,{unread:t.alerts.length})))},Ue=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{to:"/login",className:x.a.link},"Login"),r.a.createElement(j.a,{to:"/signup",className:x.a.link},"Signup"))},Te=function(e){var t=Object(n.useState)(null),a=Object(k.a)(t,2),s=a[0],c=a[1],l=Object(i.d)({query:Ne}),o=Object(k.a)(l,2),u=o[0],m=u.data,d=u.fetching,p=o[1],g=Object(i.c)(we),f=Object(k.a)(g,2),h=(f[0],f[1]),_=m&&m.currentUser||null,E=function(){return c(null)};return Object(n.useEffect)(function(){return e.history.listen(E)}),U(function(){document.hidden||p({requestPolicy:"network-only"})},1e4),r.a.createElement("nav",{className:N()(x.a.container,"solid")},r.a.createElement(b,null,r.a.createElement(Ce,{loading:d,currentUser:_,toggleDropdownVisible:c}),r.a.createElement("div",{className:x.a.dropdownPosition},s&&r.a.createElement(Oe,{hide:E},"users"===s&&r.a.createElement(ke,null),"alerts"===s&&_&&r.a.createElement(ge,{alerts:_.alerts,onEmptyClick:E,readAlert:function(e){return h({input:{alertId:e}})}})))))},xe=a(90),Ie=a.n(xe),Ae=function(e){var t=e.error;return n.createElement("div",{className:Ie.a.error},"An Error Occurred: ",JSON.stringify(t,null,3))},Pe=a(91),Le=a.n(Pe),Be=function(){var e=Object(n.useState)(""),t=Object(k.a)(e,2),a=t[0],s=t[1];return Object(n.useEffect)(function(){var e=setInterval(function(){return s(a+".")},350);return function(){return clearInterval(e)}}),r.a.createElement("div",{className:Le.a.loading},"loading",a)},Me=a(46),qe=a.n(Me),De="\nmutation($input: LoginInput!) {\n  login(input: $input) {\n    jwtToken\n    query {\n      currentUser {\n        id\n        username\n      }\n    }\n  }\n}";var Fe=function(){var e=Object(n.useState)(""),t=Object(k.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(""),l=Object(k.a)(c,2),o=l[0],u=l[1],m=Object(n.useState)(""),d=Object(k.a)(m,2),p=d[0],g=d[1],f=Object(i.c)(De),h=Object(k.a)(f,2),_=h[0],E=_.error,v=_.fetching,b=_.data,y=h[1];return Object(n.useMemo)(function(){b&&b.login&&(b.login.jwtToken?(be.set(a,b.login.jwtToken),be.setCurrentUser(a),window.location.href="/"):g("Incorrect username/password combination"))},[a,b]),r.a.createElement("section",{className:qe.a.login},r.a.createElement("div",{className:qe.a.card},r.a.createElement("h1",null,"Login"),E&&r.a.createElement(Ae,{error:E}),v&&r.a.createElement(Be,null),!E&&!v&&r.a.createElement("form",null,r.a.createElement("input",{name:"fw_username",placeholder:"username",value:a,onChange:function(e){return s(e.target.value)}}),r.a.createElement("input",{type:"password",name:"password",placeholder:"password",value:o,onChange:function(e){return u(e.target.value)}}),r.a.createElement("button",{className:qe.a.submitButton,onClick:function(e){e.preventDefault(),a&&o&&(g(""),y({input:{username:a,password:o}}))}},"Submit"),p&&r.a.createElement(Ae,{error:p}))))},Je=a(28),We=a.n(Je),$e="\nmutation($input: SignupInput!) {\n  signup(input: $input) {\n    jwtToken\n  }\n}";var Re=function(){var e=Object(n.useState)(""),t=Object(k.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(""),l=Object(k.a)(c,2),o=l[0],u=l[1],m=Object(n.useState)(""),d=Object(k.a)(m,2),p=d[0],g=d[1],f=Object(n.useState)(""),h=Object(k.a)(f,2),_=h[0],E=h[1],v=Object(i.c)($e),b=Object(k.a)(v,2),y=b[0],j=y.error,O=y.fetching,N=y.data,w=b[1],C=j?j.message.includes("violates unique constraint")?"That username is already taken. Please try again":j.message:_||"";return N&&!j&&(be.set(a,N.signup.jwtToken),be.setCurrentUser(a),window.location.href="/onboarding"),r.a.createElement("section",{className:We.a.signup},r.a.createElement("div",{className:We.a.card},r.a.createElement("h1",null,"Create Account"),r.a.createElement("form",null,r.a.createElement("div",{className:We.a.inputs},r.a.createElement("input",{name:"fw_username",placeholder:"Username",value:a,onChange:function(e){s(e.target.value),e.target.value.length>18&&E("Username must be 18 characters or less")}}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:o,onChange:function(e){return u(e.target.value)}}),r.a.createElement("input",{type:"password",name:"password_confirm",placeholder:"Password Confirmation",value:p,onChange:function(e){return g(e.target.value)}})),C&&r.a.createElement(Ae,{error:C}),O&&r.a.createElement(Be,null),!O&&r.a.createElement("button",{className:We.a.submitButton,onClick:function(e){e.preventDefault(),a&&o?o===p?w({input:{username:a,password:o}}):E("Password must match Password Confirmation"):E("Must include username and password.")}},"Submit"))))},ze=a(59),Ke=a.n(ze),Ge=a(14),Ve=a.n(Ge),He=function(e){var t=e.post;return n.createElement("article",{className:Ve.a.post},n.createElement("div",{className:Ve.a.main},!!t.author&&n.createElement(j.a,{to:"/users/".concat(t.author.username),className:Ve.a.panel},n.createElement("aside",{className:Ve.a.panelContainer},n.createElement("div",{className:Ve.a.avatar,style:{backgroundImage:"url(".concat(t.author.avatarUrl,")")}}),n.createElement("div",{className:Ve.a.userInfo},n.createElement("div",{className:Ve.a.username},t.author.username),t.author.postStats&&n.createElement("div",{className:Ve.a.totalPosts},n.createElement("strong",null,"Posts:")," ",t.author.postStats.totalCount)))),n.createElement("div",{className:Ve.a.content},n.createElement(de,{content:t.content}))),n.createElement("div",{className:N()(Ve.a.footer,"offWhite")},n.createElement("div",{className:Ve.a.postedAt},n.createElement("time",null,"Posted at: ",new Date(t.createdAt).toISOString()),n.createElement("span",null,n.createElement(j.a,{to:"/posts/".concat(t.id)},"/posts/",t.id))),!!t.thread&&n.createElement("div",{className:Ve.a.threadLink},"In thread: ",n.createElement(j.a,{to:"/threads/".concat(t.thread.id)},ce(t.thread.title)))))},Qe="\nquery ".concat("post"," ($id: Int!){\n  post: ").concat("post"," (id: $id) {\n    id\n    createdAt\n    content\n    author {\n      id\n      username\n      avatarUrl\n      postStats: authoredPosts {\n        totalCount\n      }\n    }\n    thread {\n      id\n      title\n    }\n  }\n}"),Xe=function(e){var t=e.id,a=Object(i.d)({query:Qe,variables:{id:t}}),r=Object(k.a)(a,1)[0],s=r.error,c=r.fetching,l=r.data;return n.createElement("section",null,n.createElement("div",{className:Ke.a.back},n.createElement(j.a,{to:"/"},"< Back to forum")),n.createElement("div",{className:Ke.a.left},s&&n.createElement(Ae,{error:s}),c&&n.createElement(Be,null),l&&(l.post?n.createElement(He,{post:l.post}):"This post does not exist!")))},Ye=a(15),Ze=a.n(Ye),et=a(21),tt=a(23),at=a(92),nt=a.n(at),rt=a(60),st=a.n(rt),ct=function(e){var t=e.url,a=e.img,r=e.content,s=e.onClick;return n.createElement("div",{className:st.a.ad},n.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer",onClick:s||nt.a},a&&n.createElement(ne,{url:a,alt:r}),r&&n.createElement("div",{className:st.a.content},r)))},lt=a(47),it=a.n(lt),ot=function(e){try{var t=JSON.parse(e);return Object(tt.isObject)(t)?t:{}}catch(a){return{}}},ut="{\n  currentUser {\n    id\n    trackingInfo\n  }\n  ads: adsList {\n    id\n    url\n    img\n    content\n    tags\n    isGeneric\n    weight\n    targetTags\n    primaryTags\n  }\n}";function mt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object(i.d)({query:ut}),r=Object(k.a)(a,1)[0],s=r.data,c=r.fetching;return{ads:Object(n.useMemo)(function(){if(!s)return[];var a=s.ads.map(function(e){return Object(et.a)({},e,{tags:JSON.parse(e.tags),primaryTags:JSON.parse(e.primaryTags),targetTags:JSON.parse(e.targetTags)})}),n=s.currentUser?ot(s.currentUser.trackingInfo):{},r=[n.gender].concat(Object(M.a)(n.profileTags||[]));return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=new Set(t.tags||[]),r=new Set(t.targetTags||[]),s=e.filter(function(e){return e.isGeneric}),c=e.filter(function(e){return e.primaryTags.some(function(e){return n.has(e)})});if(c.length>=a)return Object(tt.sampleSize)(c,a);var l=e.filter(function(e){return e.tags.some(function(e){return n.has(e)})&&!c.includes(e)});if(c.length+l.length>=a)return[].concat(Object(M.a)(Object(tt.shuffle)(c)),Object(M.a)(Object(tt.sampleSize)(l,a-c.length)));var i=[].concat(Object(M.a)(Object(tt.shuffle)(c)),Object(M.a)(Object(tt.shuffle)(l))),o=e.filter(function(e){return e.targetTags.some(function(e){return r.has(e)})&&!i.includes(e)}),u=[].concat(Object(M.a)(o),Object(M.a)(s.filter(function(e){return!i.includes(e)})));return[].concat(Object(M.a)(i),Object(M.a)(Object(tt.sampleSize)(u,a-i.length)))}(a,Object(et.a)({},t,{targetTags:r}),e)},[e,t,s]),fetchingAds:c}}var dt=function(e){var t=e.ads,a=e.fetching,n=Object(i.c)("\nmutation logAdClick($input: LogAdClickInput!) {\n  logAdClick(input: $input) {\n    adClick {\n      adId\n      userId\n      clickCount\n    }\n  }\n}"),s=Object(k.a)(n,2),c=(s[0],s[1]);if(a)return r.a.createElement(r.a.Fragment,null,"loading...");if(!t)return null;return r.a.createElement("section",{className:it.a.adContainer},r.a.createElement("div",{className:it.a.label},"SPONSORED CONTENT"),t.map(function(e,t){return r.a.createElement("div",{className:it.a.adWrapper,key:t},r.a.createElement(ct,Object.assign({},e,{onClick:function(){return t=e.id,setTimeout(function(){return c({input:{ad:t}})},200);var t}})))}))},pt=a(29),gt=a.n(pt),ft="Join the conversation...";var ht=function(e){var t=e.placeholder,a=e.buttonContent,s=e.inputStyle,c=e.onSubmit,l=e.onChange,i=Object(n.useState)(""),o=Object(k.a)(i,2),u=o[0],m=o[1],d=function(){c(u),m("")};return r.a.createElement("div",{className:gt.a.container},r.a.createElement("div",{className:gt.a.inner},r.a.createElement("textarea",{className:gt.a.contentInput,placeholder:t||ft,onChange:function(e){m(e.target.value),l&&l(e.target.value)},value:u,style:s,onKeyDown:function(e){13===e.keyCode&&e.metaKey&&d()}}),r.a.createElement("button",{className:gt.a.submitButton,onClick:d},a||"Submit")))},_t="\nquery ".concat("thread"," ($id: Int!) {\n  thread: ").concat("thread"," (id: $id) {\n    id\n    title\n    posts: postsList {\n      id\n      content\n      createdAt\n      tags\n      author {\n        id\n        username\n        avatarUrl\n        postStats: authoredPosts {\n          totalCount\n        }\n      }\n    }\n  }\n  currentUser {\n    id\n  }\n}"),Et=function(e){var t=e.threadId,a=e.disabled,n=Object(i.c)("\nmutation createPost($input: CreatePostInput!) {\n  createPost(input: $input) {\n    post {\n      id\n      content\n      createdAt\n      author {\n        id\n        avatarUrl\n        username\n      }\n    }\n  }\n}"),s=Object(k.a)(n,2),c=(s[0],s[1]);return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(j.a,{to:"/signup"},r.a.createElement("h2",{className:Ze.a.signup},"Create An Account To Join The Conversation!")),r.a.createElement("div",{className:N()(Ze.a.addPost,a&&Ze.a.disabled)},r.a.createElement(ht,{onSubmit:function(e){if(e){var a=Z(e),n=a.tags,r=a.usernames;c({input:{threadId:t,content:e,tags:n,usernames:r}})}}})))},vt=[1],bt=function(e){var t=e.id,a=S(820),s=a.isMobile,c=a.isDesktop,l=Object(i.d)({query:_t,variables:{id:t}}),o=Object(k.a)(l,1)[0],u=o.data,m=o.error,d=o.fetching,p=mt(4,{tags:!vt.includes(t)&&u&&u.thread?u.thread.posts.flatMap(function(e){return JSON.parse(e.tags)}):[]}),g=p.ads,f=p.fetchingAds,h=m&&r.a.createElement(Ae,{error:m}),_=d&&r.a.createElement(Be,null),E=u&&(u.thread?r.a.createElement("div",{className:Ze.a.container},r.a.createElement("header",{className:Ze.a.threadTitle},r.a.createElement("h2",null,ce(u.thread.title))),r.a.createElement("div",null,r.a.createElement(j.a,{to:"/threads/".concat(u.thread.id)},r.a.createElement("div",{className:Ze.a.threadLink},"/threads/",u.thread.id)),r.a.createElement(r.a.Fragment,null,u.thread.posts.map(function(e,t){return r.a.createElement(n.Fragment,{key:e.id},function(e){if(!s)return!1;if((e+1)%4)return!1;var t=((e+1)/4-1)%g.length;return r.a.createElement("div",{className:Ze.a.ad},r.a.createElement(dt,{ads:[g[t]],fetching:f}))}(t),r.a.createElement(He,{post:e}))})),r.a.createElement(Et,{threadId:u.thread.id,disabled:!u.currentUser}))):"This thread does not exist!");return r.a.createElement("section",null,r.a.createElement("div",{className:Ze.a.back},r.a.createElement(j.a,{to:"/"},"< Back to forum")),r.a.createElement("div",{className:Ze.a.threadContainer},r.a.createElement("div",{className:Ze.a.left},h,_,E),c&&r.a.createElement("div",{className:Ze.a.adContainer},r.a.createElement(dt,{ads:g,fetching:f}))))},yt=a(19),kt=a.n(yt),jt=function(){var e=Object(n.useState)(""),t=Object(k.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(""),l=Object(k.a)(c,2),o=l[0],u=l[1],m=Object(i.d)({query:"{\n  currentUser {\n    id\n    username\n    avatarUrl\n    postStats: authoredPosts {\n      totalCount\n    }\n  }\n}"}),d=Object(k.a)(m,1)[0],p=Object(i.c)("\nmutation createThread($input: CreateThreadInput!) {\n  createThread(input: $input) {\n    thread {\n      id\n      title\n    }\n  }\n}"),g=Object(k.a)(p,2),f=g[0],h=g[1];if(f.data)return window.location.href="/threads/".concat(f.data.createThread.thread.id),r.a.createElement("div",null);if(d.fetching||f.fetching)return r.a.createElement("span",null,"loading...");var _=d.data&&!d.data.currentUser,E=d.data&&d.data.currentUser&&Object(et.a)({},d.data.currentUser,{postStats:{totalCount:d.data.currentUser.postStats.totalCount+1}});return r.a.createElement("section",{className:kt.a.newThread},r.a.createElement("div",{className:kt.a.back},r.a.createElement(j.a,{to:"/"},"< Back to forum")),!_&&r.a.createElement("h1",{className:kt.a.sectionTitle},"New Thread"),_&&r.a.createElement(j.a,{to:"/signup"},r.a.createElement("h2",{className:kt.a.signup},"Create An Account To Join The Conversation!")),r.a.createElement("div",{className:N()(Object(I.a)({},kt.a.disabled,_))},r.a.createElement("h2",{className:kt.a.label},"Title"),r.a.createElement("input",{className:kt.a.input,onChange:function(e){return s(e.target.value)},value:a}),r.a.createElement("h2",{className:kt.a.label},"Content"),r.a.createElement(ht,{onSubmit:function(){if(a&&o){var e=Z(a+" "+o),t=e.tags,n=e.usernames;h({input:{title:a,content:o,tags:t,usernames:n}})}},onChange:u,buttonContent:"Start Thread",placeholder:"",inputStyle:{height:"200px"}}),(a||o)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:kt.a.label},"[PREVIEW] ",ce(a)),r.a.createElement(He,{post:{id:"XX",createdAt:(new Date).toString(),content:o,author:E}}))))},Ot=a(61),Nt=a.n(Ot),wt=a(93),Ct=a(224),St=a(4),Ut=a.n(St),Tt="\n  id\n  createdAt\n  username\n  avatarUrl\n  email\n  gender\n  birthday\n  bio\n  job\n  interests\n  websites\n  media\n  religion\n  politics\n  trackingInfo\n",xt="{\n  currentUser {\n    ".concat(Tt,"\n    trackingInfo\n    postStats: authoredPosts {\n      totalCount\n    }\n  }\n}"),It="mutation UpdateUser($input: UpdateUserInput!) {\n  updateUser(input: $input) {\n    user {\n      ".concat(Tt,"\n    }\n  }\n}");function At(e){var t=e.history,a=Object(i.d)({query:xt}),n=Object(k.a)(a,1)[0],s=n.data,c=n.error,l=n.fetching;return c?r.a.createElement(Ae,{error:c}):l?r.a.createElement(Be,null):s?s.currentUser?r.a.createElement(qt,{currentUser:s.currentUser,goto:function(e){return t.push(e)}}):r.a.createElement(Ct.a,{to:"/signup"}):null}function Pt(e){var t=e.trackingInfo?JSON.parse(e.trackingInfo):{},a=e.gender?function(e){var t=e.split(" ").map(function(e){return ee(e).toLowerCase()});return J()(t,q.male).length?"male":J()(t,q.female).length?"female":"other"}(e.gender):void 0,n=Y([e.bio,e.job,e.interests,e.media,e.religion,e.politics].join(" "));return JSON.stringify(Object(et.a)({},t,{gender:a,profileTags:n}))}var Lt=function(e){return Date.parse(e)?new Date(e).toISOString():null},Bt=function(e){return e.match(/^.+@.+\..+$/)?e:null},Mt=function(e){return new Promise(function(t){return setTimeout(t,e)})};function qt(e){var t=e.currentUser,a=(e.goto,Object(n.useState)(t.avatarUrl)),s=Object(k.a)(a,2),c=s[0],l=s[1],o=Object(n.useState)(t.email||""),u=Object(k.a)(o,2),m=u[0],d=u[1],p=Object(n.useState)(t.gender),g=Object(k.a)(p,2),f=g[0],h=g[1],_=Object(n.useState)(t.birthday||""),E=Object(k.a)(_,2),v=E[0],b=E[1],y=Object(n.useState)(t.bio),O=Object(k.a)(y,2),N=O[0],w=O[1],C=Object(n.useState)(t.job),U=Object(k.a)(C,2),T=U[0],x=U[1],I=Object(n.useState)(t.interests),A=Object(k.a)(I,2),P=A[0],L=A[1],B=Object(n.useState)(t.websites),M=Object(k.a)(B,2),q=M[0],D=M[1],F=Object(n.useState)(t.media),J=Object(k.a)(F,2),W=J[0],$=J[1],R=Object(n.useState)(t.religion),z=Object(k.a)(R,2),K=z[0],G=z[1],V=Object(n.useState)(t.politics),H=Object(k.a)(V,2),Q=H[0],X=H[1],Y=Object(n.useState)(!1),Z=Object(k.a)(Y,2),ee=Z[0],te=Z[1],ae=S(540),ne=ae.isMobile,re=ae.isDesktop,se=Object(n.useState)(!1),ce=Object(k.a)(se,2),le=ce[0],ie=ce[1],oe=Object(i.c)(It),ue=Object(k.a)(oe,2),me=ue[0],de=ue[1],pe=ee&&v&&!Lt(v)?"Birthday must be a valid date":"",ge=ee&&m&&!Bt(m)?"Email must be in correct format":"",fe=r.a.createElement("header",{className:Ut.a.header},r.a.createElement("h1",null,"Update Profile: ",t.username),r.a.createElement("div",{className:Ut.a.subheader},"uuid: ",t.id),r.a.createElement("div",{className:Ut.a.subheader},r.a.createElement(j.a,{to:"/users/".concat(t.username)},"View Profile"))),he=function(){var e=Object(wt.a)(Nt.a.mark(function e(){var a,n;return Nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return te(!0),ie(!0),a={email:Bt(m),birthday:Lt(v),avatarUrl:c,gender:f,bio:N,job:T,interests:P,websites:q,media:W,religion:K,politics:Q},n=Pt(Object(et.a)({},a,{trackingInfo:t.trackingInfo})),e.next=6,Promise.all([de({input:Object(et.a)({},a,{trackingInfo:n})}),Mt(1e3)]);case 6:ie(!1);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:Ut.a.profile},ne&&fe,r.a.createElement("div",{className:Ut.a.content},r.a.createElement("div",{className:Ut.a.left},r.a.createElement("div",null,r.a.createElement("div",{className:Ut.a.avatar,style:{backgroundImage:"url(".concat(c,")")}}),r.a.createElement("div",null,r.a.createElement("strong",null,"Posts:")," ",t.postStats.totalCount))),r.a.createElement("div",{className:Ut.a.right},me.fetching||le?r.a.createElement(Be,null):r.a.createElement(r.a.Fragment,null,re&&fe,r.a.createElement("div",{className:Ut.a.buttonContainer},r.a.createElement("button",{className:Ut.a.submitButton,onClick:he},"Update Profile")),r.a.createElement("div",{className:Ut.a.inputSection},r.a.createElement("h3",null,"Avatar Url"),r.a.createElement("input",{className:Ut.a.contentInput,value:c,placeholder:"http://www.website.com/image.jpeg",onChange:function(e){return l(e.target.value)}})),r.a.createElement("div",{className:Ut.a.inputSection},r.a.createElement("h3",null,"Email"),r.a.createElement("input",{className:Ut.a.contentInput,value:m,placeholder:"email@website.com",onChange:function(e){return d(e.target.value)}}),!!ge&&r.a.createElement("div",null,ge)),r.a.createElement("div",{className:Ut.a.inputSection},r.a.createElement("h3",null,"Gender"),r.a.createElement("input",{className:Ut.a.contentInput,value:f,placeholder:"Gender",onChange:function(e){return h(e.target.value)}})),r.a.createElement("div",{className:Ut.a.inputSection},r.a.createElement("h3",null,"Birthday"),r.a.createElement("input",{className:Ut.a.contentInput,value:v,placeholder:"03/11/19",onChange:function(e){return b(e.target.value)}}),!!pe&&r.a.createElement("div",null,pe)),r.a.createElement("div",{className:Ut.a.inputSection},r.a.createElement("h3",null,"About Me"),r.a.createElement("textarea",{className:Ut.a.contentInput,value:N,placeholder:"Tell us about yourself!",onChange:function(e){return w(e.target.value)}})),r.a.createElement("div",{className:Ut.a.inputSection},r.a.createElement("h3",null,"Occupation"),r.a.createElement("input",{className:Ut.a.contentInput,value:T,placeholder:"Accountant",onChange:function(e){return x(e.target.value)}})),r.a.createElement("div",{className:Ut.a.inputSection},r.a.createElement("h3",null,"Interestes"),r.a.createElement("input",{className:Ut.a.contentInput,value:P,placeholder:"Bowling, Stamp Collecting, Family",onChange:function(e){return L(e.target.value)}})),r.a.createElement("div",{className:Ut.a.inputSection},r.a.createElement("h3",null,"Favorite Websites"),r.a.createElement("input",{className:Ut.a.contentInput,value:q,placeholder:"friendworld.social, fastcashmoneyplus.biz",onChange:function(e){return D(e.target.value)}})),r.a.createElement("div",{className:Ut.a.inputSection},r.a.createElement("h3",null,"Favorite Movies, TV shows, and Music"),r.a.createElement("input",{className:Ut.a.contentInput,value:W,placeholder:"The Godfather, Citizen Kane, Casablanca",onChange:function(e){return $(e.target.value)}})),r.a.createElement("div",{className:Ut.a.inputSection},r.a.createElement("h3",null,"Religious Views"),r.a.createElement("input",{className:Ut.a.contentInput,value:K,placeholder:"God",onChange:function(e){return G(e.target.value)}})),r.a.createElement("div",{className:Ut.a.inputSection},r.a.createElement("h3",null,"Political Views"),r.a.createElement("input",{className:Ut.a.contentInput,value:Q,placeholder:"Liberal/Conservative",onChange:function(e){return X(e.target.value)}})),r.a.createElement("div",{className:Ut.a.buttonContainer},r.a.createElement("button",{className:Ut.a.submitButton,onClick:he},"Update Profile"))))))}var Dt=a(10),Ft=a.n(Dt),Jt=function(e){var t=e.title,a=e.info;return a&&r.a.createElement("div",{className:Ft.a.infoSection},r.a.createElement("h3",null,t),r.a.createElement(de,{content:a}))},Wt=function(e){var t=e.username,a=Object(i.d)({query:"\nquery userByUsername ($username: UsernameDomain!) {\n  ads {\n    totalCount\n  }\n  user: userByUsername (username: $username) {\n    id\n    createdAt\n    username\n    avatarUrl\n    email\n    gender\n    birthday\n    bio\n    job\n    interests\n    websites\n    media\n    religion\n    politics\n    trackingInfo\n    postStats: authoredPosts {\n      totalCount\n    }\n    adClicks {\n      totalCount\n    }\n    posts: authoredPostsList (orderBy: [CREATED_AT_DESC]) {\n      id\n      content\n      createdAt\n      thread {\n        id\n        title\n      }\n    }\n  }\n}",variables:{username:t}}),n=Object(k.a)(a,1)[0],s=n.error,c=n.fetching,l=n.data,o=S(540),u=o.isMobile,m=o.isDesktop;if(s)return r.a.createElement(Ae,{error:s});if(c)return r.a.createElement(Be,null);if(!l||!l.user)return r.a.createElement("div",{style:{margin:"20px 0",textAlign:"center"}},t," is not an active Friendworld user!");var d,p=l.user,g=l.ads,f=r.a.createElement("header",{className:Ft.a.header},r.a.createElement("h1",{className:Ft.a.intro},"Welcome to ",p.username,"'s Profile!"),r.a.createElement("h4",{className:Ft.a.memberSince},p.username," has been a member since ",(d=p.createdAt,new Date(d).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))),r.a.createElement("h4",{className:Ft.a.memberSince},p.username," has engaged with ",p.adClicks.totalCount,"/",g.totalCount," pieces of sponsored content!"));return r.a.createElement("div",{className:Ft.a.profile},u&&f,r.a.createElement("div",{className:Ft.a.content},r.a.createElement("div",{className:Ft.a.left},r.a.createElement("div",null,r.a.createElement("div",{className:Ft.a.avatar,style:{backgroundImage:"url(".concat(p.avatarUrl,")")}}),r.a.createElement("div",null,r.a.createElement("strong",null,"Posts:")," ",p.postStats.totalCount),r.a.createElement("div",{className:Ft.a.sendMessage},r.a.createElement(j.a,{to:"/messages/".concat(p.username)},"Message ",p.username)))),r.a.createElement("div",{className:Ft.a.right},m&&f,r.a.createElement("div",{className:Ft.a.userInfo},r.a.createElement(Jt,{title:"Gender",info:p.gender}),r.a.createElement(Jt,{title:"Birthday",info:p.birthday}),r.a.createElement(Jt,{title:"About Me",info:p.bio}),r.a.createElement(Jt,{title:"Occupation",info:p.job}),r.a.createElement(Jt,{title:"Interests",info:p.interests}),r.a.createElement(Jt,{title:"Favorite Websites",info:p.websites}),r.a.createElement(Jt,{title:"Favorite Movies, TV shows, and Music",info:p.media}),r.a.createElement(Jt,{title:"Religious Views",info:p.religion}),r.a.createElement(Jt,{title:"Political Views",info:p.politics})),r.a.createElement("div",{className:Ft.a.recentPosts},p.posts.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Recent posts by ",p.username,":"),p.posts.map(function(e){return r.a.createElement("div",{className:Ft.a.postContainer,key:e.id},r.a.createElement(He,{post:e}))})):r.a.createElement("h3",null,"This user has not made any posts yet!")),r.a.createElement("div",{className:Ft.a.uuid},"user uuid: ",p.id))))},$t=a(7),Rt=a.n($t),zt=a(42),Kt=a.n(zt),Gt="{\n  messageData: currentUser {\n    username\n    sent: messagesSentList {\n      createdAt\n      user: to {\n        username\n      }\n    }\n    received: messagesReceivedList {\n      createdAt\n      user: from {\n        username\n      }\n    }\n  }\n}",Vt=function(e,t){var a=t.createdAt,n=t.user.username,r=new Date(a);return(!e.has(n)||e.get(n)<r)&&e.set(n,r),e},Ht=function(e){if(!e)return[];var t=[].concat(Object(M.a)(e.sent),Object(M.a)(e.received)).reduce(Vt,new Map),a=Array.from(t.entries());return Kt()(a,[1]).reverse().map(function(e){return e[0]})};function Qt(){var e=Object(i.d)({query:Gt}),t=Object(k.a)(e,1)[0],a=t.error,s=t.fetching,c=t.data;if(a)return r.a.createElement(Ae,{error:a});if(s)return r.a.createElement(Be,null);if(!c||!c.messageData)return null;var l=Ht(c.messageData);return r.a.createElement("aside",{className:Rt.a.sidePanelContainer},r.a.createElement("div",{className:Rt.a.sidePanel},l.length?l.map(function(e){return r.a.createElement(n.Fragment,{key:e},r.a.createElement(j.a,{to:"/messages/".concat(e)},r.a.createElement("div",{className:Rt.a.user},e)))}):r.a.createElement("div",{className:Rt.a.emptyUsers},"You have no conversations.")))}var Xt="query messagesByUsername ($username: UsernameDomain!) {\n  currentUser {\n    username\n  }\n  requestedUser: userByUsername(username: $username) {\n    sent: messagesSentList {\n      id\n      content\n      createdAt\n      to {\n        username\n      }\n      from {\n        username\n      }\n    }\n    received: messagesReceivedList {\n      id\n      content\n      createdAt\n      to {\n        id\n        username\n      }\n      from {\n        id\n        username\n      }\n    }\n  }\n}",Yt="mutation createMessage ($input: CreateMessageInput!) {\n  createMessage (input: $input) {\n    message {\n      id\n      content\n      from {\n        id\n        username\n      }\n    }\n  }\n}";function Zt(e){var t=e.username,a=Object(n.useRef)(null),s=Object(n.useState)(""),c=Object(k.a)(s,2),l=c[0],o=c[1],u=Object(i.d)({query:Xt,variables:{username:t||""}}),m=Object(k.a)(u,2),d=m[0],p=d.error,g=d.data,f=m[1],h=Object(i.c)(Yt),_=Object(k.a)(h,2),E=(_[0],_[1]);U(function(){document.hidden||f({requestPolicy:"network-only"})},1e3);var v=[g&&g.requestedUser&&g.requestedUser.received&&g.requestedUser.sent&&g.requestedUser.received.length+g.requestedUser.sent.length];Object(n.useEffect)(function(){a.current&&(a.current.scrollTop=a.current.scrollHeight)},v);if(p)return r.a.createElement(Ae,{error:p});if(!g||!g.currentUser)return null;if(g.currentUser.username===t)return r.a.createElement(Ct.a,{to:"/messages"});var b=g.requestedUser?ea(g.requestedUser):[],y=b.map(function(e){return r.a.createElement("div",{className:Rt.a.message,key:e.id},r.a.createElement("div",{className:Rt.a.sender},r.a.createElement(j.a,{to:"/users/".concat(e.from.username)},r.a.createElement("strong",null,e.from.username)),r.a.createElement("time",null,"[",e.createdAt,"]")),r.a.createElement("div",{className:Rt.a.content},r.a.createElement(de,{content:e.content})))});return r.a.createElement("section",{className:Rt.a.messagePanel},!g.requestedUser&&"".concat(t," is not an active FriendWorld user"),g.requestedUser&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:a,className:Rt.a.sentMessages},g.requestedUser&&(b.length?y:"Send ".concat(t," a message!"))),r.a.createElement("input",{className:Rt.a.sendBox,value:l,onChange:function(e){return o(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&l&&(E({input:{content:l,toUsername:t||""}}),o(""))},placeholder:"Press ENTER to send message"})))}var ea=function(e){return Kt()([].concat(Object(M.a)(e.received),Object(M.a)(e.sent)),"createdAt")},ta="mutation createMessage ($input: CreateMessageInput!) {\n  createMessage (input: $input) {\n    message {\n      id\n      content\n      from {\n        id\n        username\n      }\n    }\n  }\n}";function aa(){var e=Object(n.useState)(""),t=Object(k.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(""),l=Object(k.a)(c,2),o=l[0],u=l[1],m=Object(i.c)(ta),d=Object(k.a)(m,2),p=(d[0],d[1]),g=function(){a&&o&&p({input:{content:a,toUsername:o}}).then(function(){window.location.href="messages/".concat(o)})};return r.a.createElement("section",{className:Rt.a.messagePanel},r.a.createElement("div",null,"Send a new message to:",r.a.createElement("div",null,r.a.createElement("input",{className:Rt.a.sendBox,placeholder:"Enter username here",value:o,onChange:function(e){return u(e.target.value)}}),r.a.createElement("textarea",{className:N()(Rt.a.sendBox,Rt.a.newMessageBox),value:a,onChange:function(e){return s(e.target.value)},placeholder:"Enter message here",onKeyDown:function(e){13===e.keyCode&&e.metaKey&&g()}})),r.a.createElement("button",{className:Rt.a.submitButton,onClick:g},"Send")))}var na=function(e){var t=e.username,a=S(450),s=a.isMobile,c=a.isDesktop,l=Object(n.useState)(!1),o=Object(k.a)(l,2),u=o[0],m=o[1],d=Object(i.d)({query:"{\n  currentUser {\n    username\n  }\n}"}),p=Object(k.a)(d,1)[0],g=p.data,f=p.error,h=p.fetching;return f?r.a.createElement(Ae,{error:f}):h?r.a.createElement(Be,null):g&&!g.currentUser?r.a.createElement(Ct.a,{to:"/signup"}):g&&g.currentUser&&g.currentUser.username===t?r.a.createElement(Ct.a,{to:"/messages"}):r.a.createElement("div",{className:Rt.a.messages},r.a.createElement("header",{className:Rt.a.header},r.a.createElement("h1",null,"Message Console"),s&&(u||t)?r.a.createElement(j.a,{to:"/messages",onClick:function(){return m(!1)}},"< All Messages"):r.a.createElement(j.a,{to:"/messages",onClick:function(){return m(!0)}},"New Message")),r.a.createElement("section",{className:Rt.a.messagesSection},s&&r.a.createElement("div",{className:Rt.a.mobileContainer},t&&r.a.createElement(Zt,{username:t}),!t&&u&&r.a.createElement(aa,null),!t&&!u&&r.a.createElement(Qt,null)),c&&r.a.createElement("div",{className:Rt.a.desktopContainer},r.a.createElement(Qt,null),t&&r.a.createElement(Zt,{username:t}),!t&&r.a.createElement(aa,null))))},ra=a(16),sa=a.n(ra),ca=a(94),la=a.n(ca),ia=function(e){var t=e.thread,a=t.posts[0]&&t.posts[0].author.username,r=ce(t.title.length>297?t.title.substring(0,297)+"...":t.title);return n.createElement("article",{key:t.id,className:sa.a.threadPost},n.createElement(j.a,{className:sa.a.postLink,to:"/threads/".concat(t.id)},r),n.createElement("div",{className:sa.a.info},n.createElement("strong",null,"LAST POST:")," ",n.createElement("time",null,"[",t.latestPostTime,"]")),n.createElement("div",{className:sa.a.info},n.createElement("strong",null,"by: "),n.createElement(j.a,{to:"/users/".concat(a)},a)),n.createElement("div",{className:sa.a.info},n.createElement("strong",null,"POSTS:")," ",t.postStats.totalCount))},oa=[1],ua=function(){var e=S(540),t=e.isMobile,a=e.isDesktop,r=Object(i.d)({query:"{\n  currentUser {\n    id\n  }\n  threads: threadsList (orderBy: [LATEST_POST_TIME_DESC]) {\n    id\n    title\n    hidden\n    latestPostTime\n    postStats: posts {\n      totalCount\n    }\n    posts: postsList (first: 1, orderBy: [CREATED_AT_DESC]) {\n      author {\n        username\n      }\n    }\n  }\n}"}),s=Object(k.a)(r,1)[0],c=s.fetching,l=s.error,o=s.data,u=mt(6),m=u.ads,d=u.fetchingAds,p=o&&o.threads?la()(o.threads,function(e){return oa.includes(e.id)}):[[],[]];return n.createElement("section",{className:sa.a.forum},n.createElement("section",{className:sa.a.left},c&&n.createElement(Be,null),l&&n.createElement(Ae,{error:l}),o&&n.createElement(n.Fragment,null,o.currentUser&&n.createElement("div",{className:sa.a.quickLinks},n.createElement("strong",null,"quick links:")," ",n.createElement(j.a,{to:"/messages"},"Messages"),", ",n.createElement(j.a,{to:"/profile"},"Update Profile"),", ",n.createElement(j.a,{to:"/stats"},"Stats")),n.createElement("header",{className:sa.a.header},n.createElement("h1",null,"Forum"),n.createElement(j.a,{to:"/threads/new",className:sa.a.startThread},"Start A Thread!")),n.createElement("div",{style:{border:"1px dashed",padding:"3px",paddingBottom:0,marginBottom:"10px"}},n.createElement(ia,{thread:p[0][0]})),p[1].length&&p[1].map(function(e,a){return n.createElement(n.Fragment,{key:e.id},function(e){if(!t)return!1;if((e+1)%4)return!1;var a=((e+1)/4-1)%m.length;return n.createElement("div",{className:sa.a.adContainer},n.createElement(dt,{ads:[m[a]],fetching:d}))}(a),!e.hidden&&n.createElement(ia,{thread:e}))}))),a&&n.createElement(dt,{ads:m,fetching:d}))},ma=a(30),da=a.n(ma),pa="{\n  userStatsList {\n    username\n    postCount\n  }\n  userAdClicksList {\n    username\n    adClicks\n  }\n}";var ga=function(){var e=Object(i.d)({query:pa}),t=Object(k.a)(e,1)[0],a=t.error,n=t.fetching,s=t.data;return a?r.a.createElement(Ae,{error:a}):n?r.a.createElement(Be,null):s?r.a.createElement("section",{className:da.a.stats},r.a.createElement("h1",null,"User Stats"),r.a.createElement("div",{className:da.a.sectionContainer},r.a.createElement("div",{className:da.a.statSection},r.a.createElement("h2",null,"Top Posters:"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Username"),r.a.createElement("th",null,"Posts"))),r.a.createElement("tbody",null,s.userStatsList.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1,"."),r.a.createElement("td",null,r.a.createElement(j.a,{to:"/users/".concat(e.username)},e.username)),r.a.createElement("td",null,e.postCount))})))),r.a.createElement("div",{className:da.a.statSection},r.a.createElement("h2",null,"Sponsored Content Engagements:"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Username"),r.a.createElement("th",null,"Engagements"))),r.a.createElement("tbody",null,s.userAdClicksList.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1,"."),r.a.createElement("td",null,r.a.createElement(j.a,{to:"/users/".concat(e.username)},e.username)),r.a.createElement("td",null,e.adClicks))})))))):null},fa=a(62),ha=a.n(fa);var _a=function(){return r.a.createElement("section",{className:ha.a.onboarding},r.a.createElement("div",{className:ha.a.card},r.a.createElement("h1",null,"Welcome to Friendworld!"),r.a.createElement("p",null,"Thanks for signing up! Please fill out your profile so everyone knows what you're all about!"),r.a.createElement(j.a,{to:"/profile"},"Click here to update your profile"),r.a.createElement("p",null,"Or, hit the forums now and fill out your profile later :)"),r.a.createElement(j.a,{to:"/"},"Click here to go to the forum")))},Ea="{\n  stats: ads {\n    totalCount\n  }\n  ads: adsList {\n    id\n    url\n    img\n    content\n    tags\n    isGeneric\n    weight\n    targetTags\n    primaryTags\n  }\n}";var va=function(){var e=Object(i.d)({query:Ea}),t=Object(k.a)(e,1)[0];return t.data,t.fetching,t.error,"ads"},ba=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return n.createElement("main",{className:"App"},n.createElement(g.a,{path:"/",component:Te}),n.createElement(y,null,n.createElement(f.a,null,n.createElement(g.a,{exact:!0,path:"/",component:ua}),n.createElement(g.a,{exact:!0,path:"/threads/new",component:jt}),n.createElement(g.a,{exact:!0,path:"/threads/:id",render:function(e){var t=e.match;return n.createElement(bt,{id:Number(t.params.id)})}}),n.createElement(g.a,{exact:!0,path:"/messages",render:function(e){e.match;return n.createElement(na,null)}}),n.createElement(g.a,{path:"/messages/:username",render:function(e){var t=e.match;return n.createElement(na,{username:t.params.username})}}),n.createElement(g.a,{path:"/posts/:id",render:function(e){var t=e.match;return n.createElement(Xe,{id:Number(t.params.id)})}}),n.createElement(g.a,{path:"/users/:username",render:function(e){var t=e.match;return n.createElement(Wt,{username:t.params.username})}}),n.createElement(g.a,{exact:!0,path:"/login",component:Fe}),n.createElement(g.a,{exact:!0,path:"/signup",component:Re}),n.createElement(g.a,{exact:!0,path:"/profile",component:At}),n.createElement(g.a,{exact:!0,path:"/stats",component:ga}),n.createElement(g.a,{exact:!0,path:"/onboarding",component:_a}),n.createElement(g.a,{exact:!0,path:"/dev/ads",component:va}))),n.createElement("footer",{style:{fontSize:"11px",padding:"10px 0"}},n.createElement(b,null,"(c) 2019 FriendWorld.social")))}}]),t}(n.Component),ya=Object(h.a)(ba);be.setTrackingToken();var ka=Object(i.b)({url:"https://friendworld.appspot.com/graphql",fetchOptions:function(){var e=be.get();return e?{headers:{Authorization:"Bearer ".concat(e),trackingToken:be.getTrackingToken()||""}}:{headers:{trackingToken:be.getTrackingToken()||""}}}}),ja=(new Date).getHours();(ja<5||ja>=22)&&(document.body.className="nightmode"),c.a.render(r.a.createElement(i.a,{value:ka},r.a.createElement(l.a,null,r.a.createElement(ya,null))),document.getElementById("root"))},28:function(e,t,a){e.exports={signup:"styles_signup__1TBgB",card:"styles_card__2i6Va",inputs:"styles_inputs__2-zI-",submitButton:"styles_submitButton__1RQ0F"}},29:function(e,t,a){e.exports={container:"styles_container__1c7gy",inner:"styles_inner__2Y1v5",contentInput:"styles_contentInput__1FYQK",submitButton:"styles_submitButton__F4S4o"}},30:function(e,t,a){e.exports={stats:"styles_stats__AKzjd",statSection:"styles_statSection__2sbUJ",sectionContainer:"styles_sectionContainer__2Iauo"}},4:function(e,t,a){e.exports={header:"styles_header__kQFtS",memberSince:"styles_memberSince__6_eN_",content:"styles_content__2k8HI",left:"styles_left__3RLgw",right:"styles_right__1wvr3",avatar:"styles_avatar__up-xt",subheader:"styles_subheader__2yCNY",postContainer:"styles_postContainer__8sWw_",recentPosts:"styles_recentPosts__2pfm9",inputSection:"styles_inputSection__3flum",contentInput:"styles_contentInput__1yKr9",submitButton:"styles_submitButton__qntJH",profile:"styles_profile__CnGcI",buttonContainer:"styles_buttonContainer__21qge"}},46:function(e,t,a){e.exports={login:"styles_login__1bddG",card:"styles_card__342W-",submitButton:"styles_submitButton__3gLIc"}},47:function(e,t,a){e.exports={adContainer:"styles_adContainer__lMNuW",label:"styles_label__2MmNX",adWrapper:"styles_adWrapper__7ikg8"}},5:function(e,t,a){e.exports={container:"styles_container__3ZrW4",content:"styles_content__mkpSL",title:"styles_title__g_H6k",links:"styles_links__1lT-N",link:"styles_link__2r07p",user:"styles_user__KXrwW",circle:"styles_circle__3a6lQ",label:"styles_label__3nbc0",unread:"styles_unread__39lvg",unread1:"styles_unread1__1t29L",Unread:"styles_Unread__20_Xf",unread2:"styles_unread2__1gjma",unread3:"styles_unread3__2odvK",Rotate:"styles_Rotate__Jr-hj",unread4:"styles_unread4__2qCGs",Breathe:"styles_Breathe__TeGmQ",dropdownPosition:"styles_dropdownPosition__RvAKI",dropdown:"styles_dropdown__3tTva",alert:"styles_alert__2nkwt",alertDropdown:"styles_alertDropdown__28W3J",noAlerts:"styles_noAlerts__aWfQ5",userDropdown:"styles_userDropdown__3RMMv",switchAccounts:"styles_switchAccounts__3Okr5"}},57:function(e,t,a){e.exports={width:"styles_width__2uPjX",body:"styles_body__3rj8V"}},59:function(e,t,a){e.exports={back:"styles_back__3PY0I"}},60:function(e,t,a){e.exports={ad:"styles_ad__tC5Qg"}},62:function(e,t,a){e.exports={onboarding:"styles_onboarding__3XU1K",card:"styles_card__PWU0O"}},7:function(e,t,a){e.exports={header:"styles_header__hU_hQ",messagesSection:"styles_messagesSection__2TjQW",mobileContainer:"styles_mobileContainer__2EvvN",desktopContainer:"styles_desktopContainer__hT0b1",messagePanel:"styles_messagePanel__3ea8x",sentMessages:"styles_sentMessages__-5hBn",newMessageBox:"styles_newMessageBox__151Oc",sendBox:"styles_sendBox__2qRGc",submitButton:"styles_submitButton__3lvS8",message:"styles_message__Ok6NK",sender:"styles_sender__2ZGF9",sidePanelContainer:"styles_sidePanelContainer__3Z_GC",emptyUsers:"styles_emptyUsers__2F5wl",sidePanel:"styles_sidePanel__2cb8A",user:"styles_user__3s6J6"}},86:function(e,t,a){e.exports={x:"styles_x__2XNkA"}},87:function(e,t,a){e.exports={img:"styles_img__2wl0K"}},90:function(e,t,a){e.exports={error:"styles_error__30xW5"}},91:function(e,t,a){},99:function(e,t,a){e.exports=a(219)}},[[99,1,2]]]);
//# sourceMappingURL=main.1184c905.chunk.js.map